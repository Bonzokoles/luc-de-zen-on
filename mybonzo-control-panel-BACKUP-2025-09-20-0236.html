<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üöÄ MyBonzo Control Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#3b82f6',
            secondary: '#8b5cf6',
            success: '#10b981',
            warning: '#f59e0b',
            danger: '#ef4444',
          }
        }
      }
    }
  </script>
  <style>
    body { 
      font-family: 'Gagarin', 'Consolas', 'Courier New', monospace; 
      background: #000000 !important;
      margin: 0;
      padding: 0;
    }
    .main-container {
      background: #000000;
      border: 2px solid #009900;
      box-shadow: 0 0 12px #009900;
      border-radius: 15px;
      margin: 20px;
      padding: 20px;
    }
    .dark-panel { 
      background: #000000 !important; 
      border: 1px solid #009900 !important; 
      box-shadow: 0 0 6px #00990030;
    }
    .dark-card { 
      background: #000000 !important; 
      border: 1px solid #009900 !important; 
      box-shadow: 0 0 3px #00990020;
    }
    .no-rounded { border-radius: 0px !important; }
    .transfer-status { 
      font-family: 'Gagarin', 'Courier New', monospace; 
      background: #000000; 
      border: 1px solid #009900; 
      box-shadow: 0 0 3px #00990020;
    }
    .main-title {
      font-family: 'Gagarin', monospace;
      font-size: 35pt;
      font-weight: bold;
      color: #00cc00;
      text-shadow: 0 0 6px #009900;
    }
    .glow-text {
      color: #00cc00;
      text-shadow: 0 0 3px #009900;
    }
    .glow-border {
      border: 1px solid #009900;
      box-shadow: 0 0 3px #00990030;
    }
  </style>
</head>

<body class="bg-black text-white min-h-screen">
  <div id="app" class="main-container">
    
    <!-- Header z animacjƒÖ -->
    <header class="mb-8">
      <div class="dark-panel no-rounded p-6">
        <div>
          <h1 class="main-title">
            ‚ñ† MY_GIT_dev_cntR_01
          </h1>
          <p class="glow-text mt-2 text-lg">Q:\mybonzo\luc-de-zen-on ‚Üí Git Transfer Control</p>
        </div>
        <div class="flex items-center gap-4">
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-green-500 no-rounded glow-border"></div>
            <span class="glow-text font-mono">ONLINE</span>
          </div>
          <div class="glow-text text-sm font-mono">
            <div id="currentTime"></div>
          </div>
        </div>
      </div>
    </header>

    <!-- Git Transfer Status -->
    <div class="dark-panel no-rounded p-6 mb-8">
      <h2 class="text-xl font-bold glow-text mb-4 font-mono">‚ñ† GIT TRANSFER CONTROL</h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Transfer Direction -->
        <div class="dark-card no-rounded p-4">
          <h3 class="glow-text font-mono mb-3">TRANSFER DIRECTION</h3>
          <div class="space-y-2 text-sm font-mono">
            <div class="flex justify-between">
              <span class="text-gray-400">SOURCE:</span>
              <span class="glow-text">Q:\mybonzo\luc-de-zen-on</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">TARGET:</span>
              <span class="glow-text" id="targetBranch">origin/main</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">STATUS:</span>
              <span class="glow-text" id="transferStatus">READY</span>
            </div>
          </div>
          
          <div class="mt-4 space-y-2">
            <select id="targetBranchSelect" title="Wybierz docelowy branch" class="w-full bg-black glow-border no-rounded px-3 py-2 text-sm glow-text font-mono">
              <option value="origin/main">origin/main</option>
              <option value="origin/develop">origin/develop</option>
              <option value="origin/staging">origin/staging</option>
              <option value="origin/feature">origin/feature/*</option>
            </select>
            
            <input type="text" id="commitMessage" placeholder="Commit message..." 
                   class="w-full bg-black glow-border no-rounded px-3 py-2 text-sm glow-text font-mono placeholder-gray-600">
          </div>
        </div>

        <!-- Transfer Operations -->
        <div class="dark-card no-rounded p-4">
          <h3 class="glow-text font-mono mb-3">OPERATIONS</h3>
          
          <div class="space-y-2">
            <button onclick="gitPush()" 
                    class="w-full bg-black hover:bg-gray-900 glow-text px-4 py-2 no-rounded font-mono text-sm glow-border transition-colors">
              ‚ñ≤ PUSH TO REMOTE
            </button>
            
            <button onclick="gitPull()" 
                    class="w-full bg-black hover:bg-gray-900 glow-text px-4 py-2 no-rounded font-mono text-sm glow-border transition-colors">
              ‚ñº PULL FROM REMOTE
            </button>
            
            <button onclick="gitSync()" 
                    class="w-full bg-black hover:bg-gray-900 glow-text px-4 py-2 no-rounded font-mono text-sm glow-border transition-colors">
              ‚Üï FULL SYNC
            </button>
            
            <button onclick="gitStatus()" 
                    class="w-full bg-black hover:bg-gray-900 glow-text px-4 py-2 no-rounded font-mono text-sm glow-border transition-colors">
              ? STATUS CHECK
            </button>
          </div>
        </div>

        <!-- Transfer Monitor -->
        <div class="dark-card no-rounded p-4">
          <h3 class="glow-text font-mono mb-3">TRANSFER MONITOR</h3>
          
          <div id="transferMonitor" class="transfer-status no-rounded p-3 text-xs font-mono h-32 overflow-y-auto">
            <div class="glow-text">[READY] Transfer system initialized</div>
            <div class="glow-text">[INFO] Monitoring Q:\mybonzo\luc-de-zen-on</div>
            <div class="glow-text">[WAIT] Awaiting transfer commands...</div>
          </div>
          
          <div class="flex gap-2 mt-3">
            <button onclick="clearTransferLog()" 
                    class="bg-black hover:bg-gray-900 glow-text px-3 py-1 no-rounded font-mono text-xs glow-border">
              CLEAR
            </button>
            <button onclick="toggleAutoScroll()" 
                    class="bg-black hover:bg-gray-900 glow-text px-3 py-1 no-rounded font-mono text-xs glow-border">
              SCROLL
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Status Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Production Status -->
      <div class="dark-card no-rounded p-6">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-black no-rounded flex items-center justify-center text-xl glow-border">
            ‚ñ†
          </div>
          <div>
            <p class="glow-text text-sm font-mono">PRODUCTION</p>
            <p class="text-xl font-bold glow-text font-mono" id="prodStatus">ONLINE</p>
          </div>
        </div>
      </div>

      <!-- Git Operations -->
      <div class="dark-card no-rounded p-6">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-blue-900 no-rounded flex items-center justify-center text-xl border border-blue-600">
            ‚ñ≤
          </div>
          <div>
            <p class="text-blue-400 text-sm font-mono">GIT TRANSFERS</p>
            <p class="text-xl font-bold text-blue-400 font-mono" id="gitTransferCount">0</p>
          </div>
        </div>
      </div>

      <!-- Security Status -->
      <div class="dark-card no-rounded p-6">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-yellow-900 no-rounded flex items-center justify-center text-xl border border-yellow-600">
            ‚ñ†
          </div>
          <div>
            <p class="text-yellow-400 text-sm font-mono">SECURITY</p>
            <p class="text-xl font-bold text-yellow-400 font-mono" id="alertCount">CLEAN</p>
          </div>
        </div>
      </div>

      <!-- Branch Status -->
      <div class="dark-card no-rounded p-6">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-purple-900 no-rounded flex items-center justify-center text-xl border border-purple-600">
            ‚óè
          </div>
          <div>
            <p class="text-purple-400 text-sm font-mono">BRANCHES</p>
            <p class="text-xl font-bold text-purple-400 font-mono" id="branchCount">MAIN</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Control Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      
      <!-- Deployment Controls -->
      <div class="dark-panel no-rounded p-6">
        <h2 class="text-2xl font-bold mb-6 flex items-center gap-3 text-white font-mono">
          ‚ñ† DEPLOYMENT CONTROL
        </h2>
        
        <div class="space-y-6">
          <!-- Production Deploy -->
          <div class="dark-card no-rounded p-5">
            <div class="flex items-center justify-between mb-4">
              <div>
                <h3 class="font-semibold text-green-400 text-lg font-mono">PRODUCTION DEPLOY</h3>
                <p class="text-sm text-green-400/70 font-mono">Q:\mybonzo ‚Üí production environment</p>
              </div>
              <div class="text-right font-mono">
                <p class="text-xs text-green-400">LAST: <span id="lastDeploy">NEVER</span></p>
                <p class="text-xs text-green-300" id="deployStatus">READY</p>
              </div>
            </div>
            
            <div class="flex gap-3 mb-4">
              <button onclick="deployProduction()" 
                      class="bg-green-800 hover:bg-green-700 px-6 py-3 no-rounded font-mono transition-colors border border-green-600 text-white">
                ‚ñ≤ DEPLOY PROD
              </button>
              <button onclick="deployStaging()" 
                      class="bg-yellow-800 hover:bg-yellow-700 px-6 py-3 no-rounded font-mono transition-colors border border-yellow-600 text-white">
                ‚óÜ DEPLOY STAGE
              </button>
            </div>
            
            <div class="flex items-center gap-2 text-sm">
              <input type="checkbox" id="skipTests" class="no-rounded bg-black border-gray-600">
              <label for="skipTests" class="text-gray-400 font-mono">SKIP TESTS (EMERGENCY ONLY)</label>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="bg-gradient-to-r from-blue-900/30 to-blue-800/30 rounded-xl p-5 border border-blue-500/30">
            <h3 class="font-semibold text-blue-400 text-lg mb-4">Szybkie Akcje</h3>
            
            <div class="grid grid-cols-2 gap-3">
              <button onclick="startDevServer()" 
                      class="bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 px-4 py-3 rounded-lg transition-all transform hover:scale-105 font-medium shadow-lg">
                ‚ñ∂Ô∏è Start Dev
              </button>
              <button onclick="buildProject()" 
                      class="bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 px-4 py-3 rounded-lg transition-all transform hover:scale-105 font-medium shadow-lg">
                üî® Build
              </button>
              <button onclick="runSecurityScan()" 
                      class="bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 px-4 py-3 rounded-lg transition-all transform hover:scale-105 font-medium shadow-lg">
                üîç Security Scan
              </button>
              <button onclick="openProject()" 
                      class="bg-gradient-to-r from-indigo-600 to-indigo-500 hover:from-indigo-500 hover:to-indigo-400 px-4 py-3 rounded-lg transition-all transform hover:scale-105 font-medium shadow-lg">
                üìÅ Otw√≥rz Projekt
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- System Status & Git -->
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50">
        <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
          üìä Status Systemu & Git
        </h2>
        
        <div class="space-y-6">
          <!-- Git Status -->
          <div class="bg-gradient-to-r from-orange-900/30 to-orange-800/30 rounded-xl p-5 border border-orange-500/30">
            <div class="flex items-center justify-between mb-4">
              <h3 class="font-semibold text-orange-400 text-lg">Git Repository</h3>
              <button onclick="refreshGitStatus()" 
                      class="bg-orange-600 hover:bg-orange-500 px-3 py-2 rounded-lg text-sm transition-all transform hover:scale-105">
                üîÑ Od≈õwie≈º
              </button>
            </div>
            
            <div id="gitStatus" class="space-y-3 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-400">Branch:</span>
                <span class="text-white font-mono" id="currentBranch">main</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Commit:</span>
                <span class="text-white font-mono text-xs" id="currentCommit">abc1234567</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Status:</span>
                <span class="text-green-400" id="repoStatus">Czysty</span>
              </div>
            </div>
            
            <div class="flex gap-2 mt-4">
              <button onclick="validateCode()" 
                      class="bg-green-600 hover:bg-green-500 px-4 py-2 rounded-lg text-sm transition-all transform hover:scale-105">
                ‚úÖ Waliduj Kod
              </button>
              <button onclick="commitChanges()" 
                      class="bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm transition-all transform hover:scale-105">
                üìù Commit
              </button>
            </div>
          </div>

          <!-- Health Monitoring -->
          <div class="bg-gradient-to-r from-cyan-900/30 to-cyan-800/30 rounded-xl p-5 border border-cyan-500/30">
            <h3 class="font-semibold text-cyan-400 text-lg mb-4">Health Monitoring</h3>
            
            <div class="grid grid-cols-2 gap-3 mb-4">
              <button onclick="checkProduction()" 
                      class="bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg text-sm transition-all transform hover:scale-105 font-medium">
                ‚úÖ Check Prod
              </button>
              <button onclick="checkStaging()" 
                      class="bg-yellow-600 hover:bg-yellow-500 px-4 py-3 rounded-lg text-sm transition-all transform hover:scale-105 font-medium">
                üé≠ Check Staging
              </button>
            </div>
            
            <div id="healthStatus" class="text-xs text-gray-300 bg-black/30 rounded-lg p-3">
              <div>Ostatnie sprawdzenie: <span id="lastHealthCheck">Nigdy</span></div>
              <div>Status produkcji: <span id="prodHealthStatus" class="text-green-400">Online</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Emergency & Backup Controls -->
    <div class="bg-gradient-to-r from-red-900/20 to-pink-900/20 backdrop-blur-sm rounded-2xl p-6 border border-red-500/30 mb-8">
      <h2 class="text-2xl font-bold mb-6 flex items-center gap-3 text-red-400">
        üö® Kontrole Awaryjne & Backup
      </h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Quick Backup -->
        <div class="bg-gray-800/50 rounded-xl p-5">
          <h3 class="font-semibold text-purple-400 mb-4 flex items-center gap-2">
            üíæ Szybki Backup
          </h3>
          <textarea id="backupReason" placeholder="Pow√≥d tworzenia backup (opcjonalnie)..." 
                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm mb-3 text-white placeholder-gray-400"></textarea>
          <button onclick="createQuickBackup()" 
                  class="w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 px-4 py-3 rounded-lg font-medium transition-all transform hover:scale-105 shadow-lg">
            üíæ Utw√≥rz Backup Teraz
          </button>
        </div>

        <!-- Emergency Rollback -->
        <div class="bg-gray-800/50 rounded-xl p-5">
          <h3 class="font-semibold text-red-400 mb-4 flex items-center gap-2">
            ‚è™ Awaryjny Rollback
          </h3>
          <select id="rollbackVersion" title="Select backup version" class="w-full bg-black border border-gray-500 no-rounded px-3 py-2 text-sm mb-3 text-white font-mono">
            <option value="">SELECT BACKUP...</option>
            <option value="backup_2025-09-12_14-30">backup_2025-09-12_14-30</option>
            <option value="backup_2025-09-12_10-15">backup_2025-09-12_10-15</option>
            <option value="backup_2025-09-11_16-45">backup_2025-09-11_16-45</option>
          </select>
          <button onclick="performEmergencyRollback()" 
                  class="w-full bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 px-4 py-3 rounded-lg font-medium transition-all transform hover:scale-105 shadow-lg">
            üö® ROLLBACK TERAZ
          </button>
        </div>

        <!-- System Info -->
        <div class="bg-gray-800/50 rounded-xl p-5">
          <h3 class="font-semibold text-blue-400 mb-4 flex items-center gap-2">
            ‚ÑπÔ∏è Info Systemu
          </h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Node.js:</span>
              <span id="nodeVersion" class="text-white">v22.18.0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Astro:</span>
              <span id="astroVersion" class="text-white">v5.13.7</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Projekt:</span>
              <span class="text-white">luc-de-zen-on</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">≈öcie≈ºka:</span>
              <span class="text-white text-xs">Q:\mybonzo\luc-de-zen-on</span>
            </div>
          </div>
          <button onclick="openProjectFolder()" 
                  class="w-full mt-3 bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm transition-all transform hover:scale-105">
            üìÇ Otw√≥rz Folder
          </button>
        </div>
      </div>
    </div>

    <!-- System Console -->
    <div class="dark-panel no-rounded p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold flex items-center gap-2 text-white font-mono">
          ‚ñ† SYSTEM CONSOLE
        </h2>
        <div class="flex gap-2">
          <button onclick="clearConsole()" 
                  class="bg-red-800 hover:bg-red-700 px-4 py-2 no-rounded text-sm transition-colors border border-red-600 text-white font-mono">
            CLEAR
          </button>
          <button onclick="toggleAutoScroll()" id="autoScrollBtn"
                  class="bg-blue-800 hover:bg-blue-700 px-4 py-2 no-rounded text-sm transition-colors border border-blue-600 text-white font-mono">
            SCROLL: ON
          </button>
        </div>
      </div>
      
      <div id="consoleOutput" class="bg-black no-rounded p-4 h-80 overflow-y-auto font-mono text-sm border border-gray-600">
        <div class="text-green-400">[INIT] MyBonzo Control Panel initialized</div>
        <div class="text-blue-400">[PATH] Connected to Q:\mybonzo\luc-de-zen-on</div>
        <div class="text-green-400">[READY] All systems online and operational</div>
        <div class="text-cyan-400">[INFO] Git transfer system ready for commands</div>
      </div>
    </div>
  </div>

  <script>
    // Global state
    let consoleAutoScroll = true;
    let deploymentInProgress = false;
    
    // Utility functions
    function getCurrentTime() {
      return new Date().toLocaleTimeString('pl-PL');
    }
    
    function addToConsole(message, type = 'info') {
      const console = document.getElementById('consoleOutput');
      const timestamp = getCurrentTime();
      const colors = {
        info: 'text-white',
        success: 'text-green-400',
        warning: 'text-yellow-400',
        error: 'text-red-400',
        system: 'text-blue-400'
      };
      
      const logLine = document.createElement('div');
      logLine.className = colors[type];
      logLine.innerHTML = `[${timestamp}] ${message}`;
      console.appendChild(logLine);
      
      if (consoleAutoScroll) {
        console.scrollTop = console.scrollHeight;
      }
      
      // Keep console clean - max 100 lines
      while (console.children.length > 100) {
        console.removeChild(console.firstChild);
      }
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
        type === 'success' ? 'bg-green-600' : 
        type === 'error' ? 'bg-red-600' : 
        type === 'warning' ? 'bg-yellow-600' : 'bg-blue-600'
      } text-white max-w-sm transform transition-all duration-300 translate-x-full`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.classList.remove('translate-x-full');
      }, 100);
      
      // Animate out and remove
      setTimeout(() => {
        notification.classList.add('translate-x-full');
        setTimeout(() => notification.remove(), 300);
      }, 4000);
    }

    // Simulate API call with delay
    async function simulateAPICall(operation, duration = 1000) {
      addToConsole(`üîÑ Rozpoczynam: ${operation}`, 'system');
      await new Promise(resolve => setTimeout(resolve, duration));
      return { success: Math.random() > 0.1, operation }; // 90% success rate
    }

    // Deployment functions
    async function deployProduction() {
      if (deploymentInProgress) {
        showNotification('Deployment ju≈º w toku!', 'warning');
        return;
      }
      
      const skipTests = document.getElementById('skipTests').checked;
      deploymentInProgress = true;
      
      try {
        addToConsole('üöÄ Rozpoczynam deployment produkcyjny...', 'system');
        showNotification('Deployment produkcyjny rozpoczƒôty', 'info');
        
        document.getElementById('deployStatus').textContent = 'Deploying...';
        document.getElementById('deployCount').textContent = '1';
        
        if (!skipTests) {
          const testResult = await simulateAPICall('Uruchamianie test√≥w', 2000);
          if (!testResult.success) throw new Error('Testy nieudane');
          addToConsole('‚úÖ Testy przesz≈Çy pomy≈õlnie', 'success');
        } else {
          addToConsole('‚ö†Ô∏è Pominiƒôto testy (wymuszono)', 'warning');
        }
        
        const buildResult = await simulateAPICall('Budowanie aplikacji', 3000);
        if (!buildResult.success) throw new Error('Build nieudany');
        addToConsole('‚úÖ Build zako≈Ñczony pomy≈õlnie', 'success');
        
        const deployResult = await simulateAPICall('Wdra≈ºanie na produkcjƒô', 2500);
        if (!deployResult.success) throw new Error('Deploy nieudany');
        
        addToConsole('üéâ Deployment produkcyjny zako≈Ñczony sukcesem!', 'success');
        showNotification('Produkcja wdro≈ºona pomy≈õlnie!', 'success');
        
        document.getElementById('deployStatus').textContent = 'Sukces';
        document.getElementById('lastDeploy').textContent = getCurrentTime();
        document.getElementById('prodStatus').textContent = 'Wdro≈ºony';
        
      } catch (error) {
        addToConsole(`‚ùå Deployment nieudany: ${error.message}`, 'error');
        showNotification(`B≈ÇƒÖd deploymentu: ${error.message}`, 'error');
        document.getElementById('deployStatus').textContent = 'B≈ÇƒÖd';
      } finally {
        deploymentInProgress = false;
        document.getElementById('deployCount').textContent = '0';
      }
    }

    async function deployStaging() {
      try {
        addToConsole('üé≠ Rozpoczynam deployment staging...', 'system');
        showNotification('Deployment staging rozpoczƒôty', 'info');
        
        const result = await simulateAPICall('Deploy na staging', 2000);
        if (!result.success) throw new Error('Staging deploy nieudany');
        
        addToConsole('‚úÖ Staging deployment zako≈Ñczony sukcesem', 'success');
        showNotification('Staging wdro≈ºony pomy≈õlnie!', 'success');
        
      } catch (error) {
        addToConsole(`‚ùå Staging deployment nieudany: ${error.message}`, 'error');
        showNotification(`B≈ÇƒÖd staging: ${error.message}`, 'error');
      }
    }

    // Development functions
    async function startDevServer() {
      try {
        addToConsole('‚ñ∂Ô∏è Uruchamianie serwera deweloperskiego...', 'system');
        showNotification('Uruchamianie dev server...', 'info');
        
        // Try to execute actual command using file protocol
        const command = 'cd Q:\\mybonzo\\luc-de-zen-on && npm run dev';
        addToConsole(`üìù Wykonujƒô: ${command}`, 'system');
        
        // Since we can't execute actual commands in browser, simulate
        await simulateAPICall('Start dev server', 1500);
        
        addToConsole('‚úÖ Serwer deweloperski uruchomiony na http://localhost:4321', 'success');
        showNotification('Dev server uruchomiony!', 'success');
        
      } catch (error) {
        addToConsole(`‚ùå Nie uda≈Ço siƒô uruchomiƒá dev server: ${error.message}`, 'error');
      }
    }

    async function buildProject() {
      try {
        addToConsole('üî® Budowanie projektu...', 'system');
        showNotification('Budowanie projektu...', 'info');
        
        const result = await simulateAPICall('Build projektu', 3000);
        if (!result.success) throw new Error('Build nieudany');
        
        addToConsole('‚úÖ Projekt zbudowany pomy≈õlnie', 'success');
        showNotification('Build zako≈Ñczony!', 'success');
        
      } catch (error) {
        addToConsole(`‚ùå Build nieudany: ${error.message}`, 'error');
      }
    }

    async function runSecurityScan() {
      try {
        addToConsole('üîç Uruchamianie skanu bezpiecze≈Ñstwa...', 'system');
        showNotification('Skan bezpiecze≈Ñstwa w toku...', 'info');
        
        const result = await simulateAPICall('Skanowanie bezpiecze≈Ñstwa', 4000);
        
        addToConsole('üõ°Ô∏è Skan bezpiecze≈Ñstwa zako≈Ñczony', 'success');
        addToConsole('üìä Wyniki: 0 krytycznych, 0 wysokich, 2 ≈õrednie', 'info');
        showNotification('Skan bezpiecze≈Ñstwa zako≈Ñczony', 'success');
        
        document.getElementById('alertCount').textContent = '2';
        
      } catch (error) {
        addToConsole(`‚ùå Skan bezpiecze≈Ñstwa nieudany: ${error.message}`, 'error');
      }
    }

    // Git Transfer Functions
    async function gitPush() {
      try {
        const targetBranch = document.getElementById('targetBranchSelect').value;
        const commitMsg = document.getElementById('commitMessage').value || 'Auto commit from control panel';
        
        addToTransferLog('PUSH', `Initiating push to ${targetBranch}`, 'info');
        document.getElementById('transferStatus').textContent = 'PUSHING';
        document.getElementById('gitTransferCount').textContent = '1';
        
        // Stage all changes
        addToTransferLog('STAGE', 'git add .', 'system');
        await simulateAPICall('Git add', 800);
        
        // Commit changes
        addToTransferLog('COMMIT', `git commit -m "${commitMsg}"`, 'system');
        await simulateAPICall('Git commit', 1000);
        
        // Push to remote
        addToTransferLog('PUSH', `git push ${targetBranch}`, 'system');
        const result = await simulateAPICall('Git push', 2500);
        
        if (result.success) {
          addToTransferLog('SUCCESS', `Pushed to ${targetBranch} successfully`, 'success');
          document.getElementById('transferStatus').textContent = 'PUSHED';
          showNotification('Git push completed!', 'success');
        } else {
          throw new Error('Push failed');
        }
        
      } catch (error) {
        addToTransferLog('ERROR', `Push failed: ${error.message}`, 'error');
        document.getElementById('transferStatus').textContent = 'ERROR';
      } finally {
        document.getElementById('gitTransferCount').textContent = '0';
        document.getElementById('commitMessage').value = '';
      }
    }

    async function gitPull() {
      try {
        const targetBranch = document.getElementById('targetBranchSelect').value;
        
        addToTransferLog('PULL', `Initiating pull from ${targetBranch}`, 'info');
        document.getElementById('transferStatus').textContent = 'PULLING';
        document.getElementById('gitTransferCount').textContent = '1';
        
        // Fetch latest
        addToTransferLog('FETCH', 'git fetch origin', 'system');
        await simulateAPICall('Git fetch', 1500);
        
        // Pull changes
        addToTransferLog('MERGE', `git pull ${targetBranch}`, 'system');
        const result = await simulateAPICall('Git pull', 2000);
        
        if (result.success) {
          addToTransferLog('SUCCESS', `Pulled from ${targetBranch} successfully`, 'success');
          document.getElementById('transferStatus').textContent = 'SYNCED';
          showNotification('Git pull completed!', 'success');
        } else {
          throw new Error('Pull failed');
        }
        
      } catch (error) {
        addToTransferLog('ERROR', `Pull failed: ${error.message}`, 'error');
        document.getElementById('transferStatus').textContent = 'ERROR';
      } finally {
        document.getElementById('gitTransferCount').textContent = '0';
      }
    }

    async function gitSync() {
      try {
        addToTransferLog('SYNC', 'Full synchronization started', 'info');
        document.getElementById('transferStatus').textContent = 'SYNCING';
        
        // Pull first, then push
        await gitPull();
        await new Promise(resolve => setTimeout(resolve, 500));
        await gitPush();
        
        addToTransferLog('SYNC', 'Full synchronization completed', 'success');
        document.getElementById('transferStatus').textContent = 'SYNCED';
        
      } catch (error) {
        addToTransferLog('ERROR', `Sync failed: ${error.message}`, 'error');
      }
    }

    async function gitStatus() {
      try {
        addToTransferLog('STATUS', 'Checking git status...', 'info');
        
        const result = await simulateAPICall('Git status', 1000);
        
        // Simulate git status output
        addToTransferLog('BRANCH', 'On branch main', 'info');
        addToTransferLog('ORIGIN', 'Your branch is up to date with origin/main', 'success');
        addToTransferLog('WORKING', 'Working tree clean', 'success');
        
        document.getElementById('currentBranch').textContent = 'main';
        document.getElementById('currentCommit').textContent = 'a1b2c3d4e';
        document.getElementById('repoStatus').textContent = 'CLEAN';
        
      } catch (error) {
        addToTransferLog('ERROR', `Status check failed: ${error.message}`, 'error');
      }
    }

    function addToTransferLog(type, message, level) {
      const monitor = document.getElementById('transferMonitor');
      const timestamp = new Date().toLocaleTimeString();
      
      const colors = {
        info: 'text-blue-400',
        success: 'text-green-400',
        error: 'text-red-400',
        warning: 'text-yellow-400',
        system: 'text-white'
      };
      
      const logEntry = document.createElement('div');
      logEntry.className = colors[level] || 'text-gray-400';
      logEntry.textContent = `[${timestamp}] ${type}: ${message}`;
      
      monitor.appendChild(logEntry);
      
      // Auto scroll
      if (consoleAutoScroll) {
        monitor.scrollTop = monitor.scrollHeight;
      }
      
      // Keep log clean
      while (monitor.children.length > 50) {
        monitor.removeChild(monitor.firstChild);
      }
    }

    function clearTransferLog() {
      document.getElementById('transferMonitor').innerHTML = '';
      addToTransferLog('SYSTEM', 'Transfer log cleared', 'info');
    }

    // Git functions
    async function refreshGitStatus() {
      return gitStatus();
    }

    async function validateCode() {
      try {
        addToConsole('‚úÖ Walidacja kodu w toku...', 'system');
        showNotification('Walidacja kodu...', 'info');
        
        // Run pre-commit hook
        addToConsole('üìù Uruchamianie pre-commit hook...', 'system');
        const hookResult = await simulateAPICall('Pre-commit validation', 2500);
        
        if (!hookResult.success) throw new Error('Walidacja nieudana');
        
        addToConsole('‚úÖ Walidacja kodu przesz≈Ça pomy≈õlnie', 'success');
        addToConsole('üìã ESLint: ‚úÖ, TypeScript: ‚úÖ, Prettier: ‚úÖ, Security: ‚úÖ', 'success');
        showNotification('Walidacja kodu przesz≈Ça!', 'success');
        
      } catch (error) {
        addToConsole(`‚ùå Walidacja nieudana: ${error.message}`, 'error');
      }
    }

    async function commitChanges() {
      try {
        const message = prompt('Wprowad≈∫ commit message:', 'feat: update from control panel');
        if (!message) return;
        
        addToConsole(`üìù Commitowanie zmian: "${message}"`, 'system');
        
        const result = await simulateAPICall('Git commit', 1000);
        if (!result.success) throw new Error('Commit nieudany');
        
        addToConsole('‚úÖ Zmiany zosta≈Çy commitowane', 'success');
        showNotification('Commit wykonany!', 'success');
        
        document.getElementById('currentCommit').textContent = 'f9e8d7c6b';
        
      } catch (error) {
        addToConsole(`‚ùå Commit nieudany: ${error.message}`, 'error');
      }
    }

    // Health check functions
    async function checkProduction() {
      try {
        addToConsole('‚úÖ Sprawdzanie zdrowia produkcji...', 'system');
        
        const result = await simulateAPICall('Production health check', 1500);
        
        if (result.success) {
          addToConsole('‚úÖ Produkcja: ZDROWA (200ms response)', 'success');
          document.getElementById('prodHealthStatus').textContent = 'Online';
          document.getElementById('prodHealthStatus').className = 'text-green-400';
        } else {
          addToConsole('‚ùå Produkcja: NIEZDROWA', 'error');
          document.getElementById('prodHealthStatus').textContent = 'Offline';
          document.getElementById('prodHealthStatus').className = 'text-red-400';
        }
        
        document.getElementById('lastHealthCheck').textContent = getCurrentTime();
        showNotification(`Produkcja: ${result.success ? 'Zdrowa' : 'Niezdrowa'}`, result.success ? 'success' : 'error');
        
      } catch (error) {
        addToConsole(`‚ùå Health check nieudany: ${error.message}`, 'error');
      }
    }

    async function checkStaging() {
      try {
        addToConsole('üé≠ Sprawdzanie zdrowia staging...', 'system');
        
        const result = await simulateAPICall('Staging health check', 1200);
        
        addToConsole('‚úÖ Staging: ZDROWY (150ms response)', 'success');
        showNotification('Staging: Zdrowy', 'success');
        
      } catch (error) {
        addToConsole(`‚ùå Staging health check nieudany: ${error.message}`, 'error');
      }
    }

    // Backup functions
    async function createQuickBackup() {
      try {
        const reason = document.getElementById('backupReason').value || 'Szybki backup z panelu kontrolnego';
        
        addToConsole(`üíæ Tworzenie backupu: ${reason}`, 'system');
        showNotification('Tworzenie backup...', 'info');
        
        const result = await simulateAPICall('Tworzenie backup', 3000);
        if (!result.success) throw new Error('Backup nieudany');
        
        const backupName = `backup_${new Date().toISOString().slice(0, 19).replace(/[:.]/g, '-')}`;
        
        addToConsole(`‚úÖ Backup utworzony: ${backupName}`, 'success');
        showNotification('Backup utworzony pomy≈õlnie!', 'success');
        
        document.getElementById('backupReason').value = '';
        
        const currentCount = parseInt(document.getElementById('backupCount').textContent) + 1;
        document.getElementById('backupCount').textContent = currentCount.toString();
        
        // Add to rollback list
        const select = document.getElementById('rollbackVersion');
        const option = document.createElement('option');
        option.value = backupName;
        option.textContent = backupName;
        select.insertBefore(option, select.children[1]);
        
      } catch (error) {
        addToConsole(`‚ùå Tworzenie backup nieudane: ${error.message}`, 'error');
      }
    }

    async function performEmergencyRollback() {
      const version = document.getElementById('rollbackVersion').value;
      
      if (!version) {
        showNotification('Wybierz wersjƒô do rollback', 'warning');
        return;
      }
      
      if (!confirm(`üö® UWAGA: To przywr√≥ci system do ${version}.\nOperacja jest nieodwracalna!\nCzy kontynuowaƒá?`)) {
        return;
      }
      
      try {
        addToConsole(`üö® AWARYJNY ROLLBACK do ${version}`, 'warning');
        showNotification('Wykonujƒô rollback...', 'warning');
        
        const result = await simulateAPICall('Emergency rollback', 4000);
        if (!result.success) throw new Error('Rollback nieudany');
        
        addToConsole('üéâ Rollback zako≈Ñczony pomy≈õlnie', 'success');
        showNotification('Rollback zako≈Ñczony!', 'success');
        
        document.getElementById('rollbackVersion').value = '';
        document.getElementById('currentCommit').textContent = version.slice(-8);
        
      } catch (error) {
        addToConsole(`‚ùå Rollback nieudany: ${error.message}`, 'error');
      }
    }

    // Utility functions
    function openProject() {
      addToConsole('üìÅ Otwieranie projektu w VS Code...', 'system');
      window.open('vscode://file/Q:/mybonzo/luc-de-zen-on', '_blank');
    }

    function openProjectFolder() {
      addToConsole('üìÇ Otwieranie folderu projektu...', 'system');
      // Try to open in file explorer
      window.open('file:///Q:/mybonzo/luc-de-zen-on', '_blank');
    }

    // Console functions
    function clearConsole() {
      document.getElementById('consoleOutput').innerHTML = '';
      addToConsole('Konsola wyczyszczona', 'system');
    }

    function toggleAutoScroll() {
      consoleAutoScroll = !consoleAutoScroll;
      const button = document.getElementById('autoScrollBtn');
      button.textContent = `üìú Auto-scroll: ${consoleAutoScroll ? 'ON' : 'OFF'}`;
      button.className = consoleAutoScroll ? 
        'bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm transition-all transform hover:scale-105' :
        'bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg text-sm transition-all transform hover:scale-105';
      
      addToConsole(`Auto-scroll ${consoleAutoScroll ? 'w≈ÇƒÖczony' : 'wy≈ÇƒÖczony'}`, 'system');
    }

    // Initialize
    function updateTime() {
      document.getElementById('currentTime').textContent = getCurrentTime();
    }

    // Event listeners and initialization
    document.addEventListener('DOMContentLoaded', function() {
      updateTime();
      setInterval(updateTime, 1000);
      
      addToConsole('üéâ MyBonzo Control Panel w pe≈Çni za≈Çadowany i gotowy!', 'success');
      addToConsole('üîß Wszystkie funkcje dostƒôpne - zarzƒÖdzaj projektem z ≈Çatwo≈õciƒÖ', 'info');
      
      // Simulate initial data load
      setTimeout(() => {
        refreshGitStatus();
      }, 1000);
      
      showNotification('Panel kontrolny gotowy do u≈ºycia!', 'success');
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey) {
        switch(e.key) {
          case 'd':
            e.preventDefault();
            deployProduction();
            break;
          case 'b':
            e.preventDefault();
            buildProject();
            break;
          case 'r':
            e.preventDefault();
            refreshGitStatus();
            break;
        }
      }
    });
  </script>
</body>
</html>