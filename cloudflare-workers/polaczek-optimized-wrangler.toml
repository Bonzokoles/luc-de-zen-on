name = "mybonzo-polaczek-api"
main = "polaczek-worker.js"
compatibility_date = "2024-09-19"
compatibility_flags = ["nodejs_compat"]

# Routes dla POLACZEK API z lepszym cache control
[[routes]]
pattern = "polaczek-api.mybonzo.com/*"
zone_name = "mybonzo.com"

[[routes]]
pattern = "mybonzo.com/api/polaczek/*"
zone_name = "mybonzo.com"

# Placement optimization - smart placement for better performance
[placement]
mode = "smart"

# Limits optimization
[limits]
cpu_ms = 10000

# Observability for monitoring
[observability]
enabled = true
head_sampling_rate = 0.01

# Environment variables
[vars]
ENVIRONMENT = "production"
API_VERSION = "3.0.0"
LANGUAGE = "pl"
CACHE_TTL = "3600"
CACHE_ENABLED = "true"

# KV namespace dla cache'owania Polaczka
[[kv_namespaces]]
binding = "POLACZEK_CACHE_KV"
id = "23e11c0a4015498d9e199c529cbf3133"
preview_id = "23e11c0a4015498d9e199c529cbf3133"

# R2 Bucket dla plik√≥w Polaczka
[[r2_buckets]]
binding = "POLACZEK_STORAGE_R2"
bucket_name = "mybonzo-storage"

# Build configuration
[build]
command = "echo 'Build completed'"
cwd = "./"
watch_dir = ["polaczek-worker.js"]

# Development settings
[dev]
ip = "0.0.0.0"
port = 8788
local_protocol = "https"
