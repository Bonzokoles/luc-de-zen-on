<!-- mybonzo-data-flow.xml -->
<mxfile host="app.diagrams.net">
  <diagram name="MyBonzo Data Flow">
    <mxGraphModel>
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- User Interaction -->
        <mxCell id="user" value="User" style="shape=actor;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Frontend -->
        <mxCell id="frontend" value="Frontend (Browser)" style="swimlane;fontStyle=1;startSize=30;" vertex="1" parent="1">
          <mxGeometry x="160" y="40" width="200" height="800" as="geometry" />
        </mxCell>
        <mxCell id="ui-components" value="UI Components" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="frontend">
          <mxGeometry x="40" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="local-storage" value="localStorage" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="frontend">
          <mxGeometry x="40" y="200" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- API Layer -->
        <mxCell id="api-layer" value="API Layer (Astro)" style="swimlane;fontStyle=1;startSize=30;" vertex="1" parent="1">
          <mxGeometry x="400" y="40" width="200" height="800" as="geometry" />
        </mxCell>
        <mxCell id="api-endpoints" value="API Endpoints" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="api-layer">
          <mxGeometry x="40" y="80" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Backend -->
        <mxCell id="backend-layer" value="Backend (Cloudflare)" style="swimlane;fontStyle=1;startSize=30;" vertex="1" parent="1">
          <mxGeometry x="640" y="40" width="200" height="800" as="geometry" />
        </mxCell>
        <mxCell id="d1-database" value="D1 Database" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="backend-layer">
          <mxGeometry x="40" y="80" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="workers-ai" value="Workers AI" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="backend-layer">
          <mxGeometry x="40" y="200" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- Connections -->
        <mxCell id="edge-1" value="User Interaction" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="user" target="ui-components">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-2" value="API Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ui-components" target="api-endpoints">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-3" value="DB Query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="api-endpoints" target="d1-database">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-4" value="AI Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="api-endpoints" target="workers-ai">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-5" value="Save/Load Settings" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ui-components" target="local-storage">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-6" value="Return Data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="d1-database" target="api-endpoints">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-7" value="Return AI Response" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="workers-ai" target="api-endpoints">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-8" value="Return API Response" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="api-endpoints" target="ui-components">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
