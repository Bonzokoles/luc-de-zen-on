<!DOCTYPE html>
<html>
  <head>
    <title>Test 3 Wyj≈õƒá Audio Wizualizatora MyBonzo</title>
    <style>
      body {
        background: #000;
        color: #fff;
        font-family: Arial;
        padding: 20px;
      }
      .test-section {
        background: #111;
        border: 1px solid #333;
        margin: 10px 0;
        padding: 15px;
        border-radius: 8px;
      }
      .status {
        padding: 5px;
        margin: 5px 0;
        border-radius: 4px;
      }
      .success {
        background: rgba(0, 255, 0, 0.2);
      }
      .error {
        background: rgba(255, 0, 0, 0.2);
      }
      .info {
        background: rgba(0, 100, 255, 0.2);
      }
      button {
        background: #333;
        color: #fff;
        border: 1px solid #555;
        padding: 8px 15px;
        margin: 5px;
        cursor: pointer;
        border-radius: 4px;
      }
      button:hover {
        background: #555;
      }
      .visualizer-test {
        width: 100%;
        height: 60px;
        border: 1px solid #444;
        margin: 10px 0;
        background: #000;
      }
    </style>
  </head>
  <body>
    <h1>üéØ Test 3 Wyj≈õƒá Audio Wizualizatora MyBonzo</h1>

    <div class="test-section">
      <h2>1Ô∏è‚É£ Voice Visualizer Test</h2>
      <div id="voice-status" class="status info">Sprawdzanie...</div>
      <button onclick="testVoice(true)">üé§ Start Voice</button>
      <button onclick="testVoice(false)">‚èπÔ∏è Stop Voice</button>
      <canvas
        id="voice-visualizer"
        class="visualizer-test"
        width="400"
        height="60"
      ></canvas>
    </div>

    <div class="test-section">
      <h2>2Ô∏è‚É£ Music Visualizer (English) Test</h2>
      <div id="music-status" class="status info">Sprawdzanie...</div>
      <button onclick="testMusic()">üéµ Toggle Music</button>
      <button onclick="testMusicAPI()">üìä Test API</button>
      <canvas
        id="music-visualizer"
        class="visualizer-test"
        width="400"
        height="60"
      ></canvas>
    </div>

    <div class="test-section">
      <h2>3Ô∏è‚É£ Music Visualizer (Polish) Test</h2>
      <div id="music-pl-status" class="status info">Sprawdzanie...</div>
      <button onclick="testMusicPL()">üéµ Prze≈ÇƒÖcz Muzykƒô</button>
      <button onclick="testMusicPLAPI()">üìä Test API PL</button>
      <canvas
        id="music-pl-visualizer"
        class="visualizer-test"
        width="400"
        height="60"
      ></canvas>
    </div>

    <div class="test-section">
      <h2>4Ô∏è‚É£ Comprehensive Test</h2>
      <button onclick="testAll()">üöÄ Test Wszystkich 3 Wizualizator√≥w</button>
      <div id="comprehensive-status" class="status info">
        Kliknij przycisk powy≈ºej
      </div>
    </div>

    <script>
      console.log("üéØ Audio Visualizer Test Page Loaded");

      // Status elements
      const voiceStatus = document.getElementById("voice-status");
      const musicStatus = document.getElementById("music-status");
      const musicPLStatus = document.getElementById("music-pl-status");
      const comprehensiveStatus = document.getElementById(
        "comprehensive-status"
      );

      // Check API availability on load
      window.addEventListener("load", () => {
        checkAPIs();
      });

      function checkAPIs() {
        // Voice API
        if (typeof window.VOICE_DEBUG !== "undefined") {
          voiceStatus.textContent = "‚úÖ VOICE_DEBUG API dostƒôpne";
          voiceStatus.className = "status success";
        } else {
          voiceStatus.textContent = "‚ùå VOICE_DEBUG nie znalezione";
          voiceStatus.className = "status error";
        }

        // Music API (English)
        if (typeof window.CYBER_MUSIC !== "undefined") {
          const state = window.CYBER_MUSIC.getState
            ? window.CYBER_MUSIC.getState()
            : {};
          musicStatus.textContent = `‚úÖ CYBER_MUSIC API dostƒôpne - ${JSON.stringify(
            state
          )}`;
          musicStatus.className = "status success";
        } else {
          musicStatus.textContent = "‚ùå CYBER_MUSIC nie znalezione";
          musicStatus.className = "status error";
        }

        // Music API (Polish)
        if (typeof window.CYBER_MUSIC_PL !== "undefined") {
          const state = window.CYBER_MUSIC_PL.stan
            ? window.CYBER_MUSIC_PL.stan()
            : {};
          musicPLStatus.textContent = `‚úÖ CYBER_MUSIC_PL API dostƒôpne - ${JSON.stringify(
            state
          )}`;
          musicPLStatus.className = "status success";
        } else {
          musicPLStatus.textContent = "‚ùå CYBER_MUSIC_PL nie znalezione";
          musicPLStatus.className = "status error";
        }
      }

      function testVoice(active) {
        console.log("üé§ Testing Voice Visualizer:", active);

        if (window.VOICE_DEBUG) {
          window.VOICE_DEBUG.testVoice(active);
          voiceStatus.textContent = `üé§ Voice test: ${
            active ? "AKTYWNY" : "ZATRZYMANY"
          }`;
          voiceStatus.className = active ? "status success" : "status info";
        } else {
          voiceStatus.textContent = "‚ùå VOICE_DEBUG niedostƒôpne";
          voiceStatus.className = "status error";
        }
      }

      function testMusic() {
        console.log("üéµ Testing Music Visualizer");

        if (window.CYBER_MUSIC) {
          window.CYBER_MUSIC.toggle();
          const state = window.CYBER_MUSIC.getState();
          musicStatus.textContent = `üéµ Music: ${
            state.isPlaying ? "GRAJ" : "PAUZA"
          } - ${state.trackName}`;
          musicStatus.className = state.isPlaying
            ? "status success"
            : "status info";
        } else {
          musicStatus.textContent = "‚ùå CYBER_MUSIC niedostƒôpne";
          musicStatus.className = "status error";
        }
      }

      function testMusicAPI() {
        if (window.CYBER_MUSIC) {
          const analyser = window.CYBER_MUSIC.getAnalyser();
          musicStatus.textContent = `üìä Analyser: ${
            analyser ? "DOSTƒòPNY" : "BRAK"
          }`;
          musicStatus.className = analyser ? "status success" : "status error";
        }
      }

      function testMusicPL() {
        console.log("üéµ Testing Polish Music Visualizer");

        if (window.CYBER_MUSIC_PL) {
          window.CYBER_MUSIC_PL.przelacz();
          const state = window.CYBER_MUSIC_PL.stan();
          musicPLStatus.textContent = `üéµ Muzyka PL: ${
            state.isPlaying ? "GRAJ" : "PAUZA"
          } - ${state.trackName}`;
          musicPLStatus.className = state.isPlaying
            ? "status success"
            : "status info";
        } else {
          musicPLStatus.textContent = "‚ùå CYBER_MUSIC_PL niedostƒôpne";
          musicPLStatus.className = "status error";
        }
      }

      function testMusicPLAPI() {
        if (window.CYBER_MUSIC_PL) {
          const analyser = window.CYBER_MUSIC_PL.analizator();
          musicPLStatus.textContent = `üìä Analizator PL: ${
            analyser ? "DOSTƒòPNY" : "BRAK"
          }`;
          musicPLStatus.className = analyser
            ? "status success"
            : "status error";
        }
      }

      function testAll() {
        comprehensiveStatus.textContent =
          "üöÄ Rozpoczynanie testu wszystkich 3 wizualizator√≥w...";
        comprehensiveStatus.className = "status info";

        let results = [];

        // Test 1: Voice
        setTimeout(() => {
          testVoice(true);
          results.push("Voice: START");
          comprehensiveStatus.textContent = "Voice ‚úì | Music... | Music PL...";
        }, 500);

        // Test 2: Music EN
        setTimeout(() => {
          testMusic();
          results.push("Music EN: TOGGLE");
          comprehensiveStatus.textContent = "Voice ‚úì | Music ‚úì | Music PL...";
        }, 1500);

        // Test 3: Music PL
        setTimeout(() => {
          testMusicPL();
          results.push("Music PL: TOGGLE");
          comprehensiveStatus.textContent = "Voice ‚úì | Music ‚úì | Music PL ‚úì";
        }, 2500);

        // Final status
        setTimeout(() => {
          testVoice(false); // Stop voice
          comprehensiveStatus.textContent = `üéâ Test zako≈Ñczony! Rezultaty: ${results.join(
            " | "
          )}`;
          comprehensiveStatus.className = "status success";
        }, 4000);
      }

      // Debug info
      console.log("APIs available:", {
        VOICE_DEBUG: typeof window.VOICE_DEBUG,
        CYBER_MUSIC: typeof window.CYBER_MUSIC,
        CYBER_MUSIC_PL: typeof window.CYBER_MUSIC_PL,
        voiceController: typeof window.voiceController,
      });
    </script>
  </body>
</html>
