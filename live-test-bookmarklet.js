// Bezpo≈õredni test floating buttons na live stronie - wykonaj w console przeglƒÖdarki
javascript: (function() {
    console.clear();
    console.log('üß™ LIVE TEST FLOATING BUTTONS');
    console.log('==============================');
    
    // Test 1: Sprawd≈∫ czy buttons istniejƒÖ
    console.log('\nüîç SPRAWDZANIE PRZYCISK√ìW:');
    const buttonTests = [
        { id: 'geminiProBtn', name: 'Gemini Pro', toggleFunc: 'toggleGeminiPro', sendFunc: 'sendToGeminiPro' },
        { id: 'codeBisonBtn', name: 'Code Bison', toggleFunc: 'toggleCodeBison', sendFunc: 'sendToCodeBison' },
        { id: 'textBisonBtn', name: 'Text Bison', toggleFunc: 'toggleTextBison', sendFunc: 'sendToTextBison' },
        { id: 'googleBardBtn', name: 'Google Bard', toggleFunc: 'toggleGoogleBard', sendFunc: 'sendToGoogleBard' }
    ];
    
    buttonTests.forEach(test => {
        const btn = document.getElementById(test.id);
        console.log(`\nüìã ${test.name}:`);
        
        if (btn) {
            console.log(`‚úÖ Button znaleziony: "${btn.textContent.trim()}"`);
            console.log(`   Visible: ${btn.offsetParent !== null}`);
            console.log(`   Onclick: ${btn.onclick ? 'OK' : 'BRAK'}`);
            
            // Test toggle function
            if (typeof window[test.toggleFunc] === 'function') {
                console.log(`‚úÖ ${test.toggleFunc}(): dostƒôpna`);
            } else {
                console.log(`‚ùå ${test.toggleFunc}(): BRAK!`);
            }
            
            // Test send function
            if (typeof window[test.sendFunc] === 'function') {
                console.log(`‚úÖ ${test.sendFunc}(): dostƒôpna`);
            } else {
                console.log(`‚ùå ${test.sendFunc}(): BRAK!`);
            }
        } else {
            console.log(`‚ùå Button NIE ZNALEZIONY!`);
        }
    });
    
    // Test 2: Spr√≥buj kliknƒÖƒá pierwszy button
    console.log('\nüñ±Ô∏è  TEST KLIKNIƒòCIA:');
    const geminiBtn = document.getElementById('geminiProBtn');
    if (geminiBtn) {
        console.log('Klikam Gemini Pro button...');
        geminiBtn.click();
        
        setTimeout(() => {
            const widget = document.getElementById('geminiProWidget');
            if (widget) {
                const isVisible = !widget.classList.contains('hidden');
                console.log(`üì± Gemini Pro Widget: ${isVisible ? 'WIDOCZNY' : 'UKRYTY'}`);
                if (isVisible) {
                    console.log('‚úÖ SUKCES - Widget siƒô otworzy≈Ç!');
                } else {
                    console.log('‚ùå PROBLEM - Widget pozostaje ukryty');
                }
            } else {
                console.log('‚ùå Widget element nie istnieje');
            }
        }, 500);
    }
    
    // Test 3: Manual API call test  
    console.log('\nüì° TEST BEZPO≈öREDNIEGO API:');
    console.log('Testujƒô /api/gemini-pro...');
    
    fetch('/api/gemini-pro', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            message: 'Test z konsoli - czy dzia≈Çasz?',
            language: 'pl'
        })
    })
    .then(response => response.json())
    .then(data => {
        console.log('‚úÖ API Response otrzymany:');
        console.log(data);
    })
    .catch(error => {
        console.log('‚ùå API Error:');
        console.log(error);
    });
    
    // Test 4: Sprawdzenie stanu przycisk√≥w po resize
    console.log('\nüîÑ TEST STANU PRZYCISK√ìW PO RESIZE:');
    async function testButtonStateAfterResize() {
        const buttonTests = [
            { id: 'geminiProBtn', name: 'Gemini Pro', toggleFunc: 'toggleGeminiPro', sendFunc: 'sendToGeminiPro' },
            { id: 'codeBisonBtn', name: 'Code Bison', toggleFunc: 'toggleCodeBison', sendFunc: 'sendToCodeBison' },
            { id: 'textBisonBtn', name: 'Text Bison', toggleFunc: 'toggleTextBison', sendFunc: 'sendToTextBison' },
            { id: 'googleBardBtn', name: 'Google Bard', toggleFunc: 'toggleGoogleBard', sendFunc: 'sendToGoogleBard' }
        ];
        
        // Store initial button states
        const initialStates = {};
        buttonTests.forEach(test => {
            const btn = document.getElementById(test.id);
            if (btn) {
                initialStates[test.id] = {
                    visible: btn.offsetParent !== null,
                    hasOnclick: btn.onclick !== null,
                    hasToggleFunc: typeof window[test.toggleFunc] === 'function',
                    hasSendFunc: typeof window[test.sendFunc] === 'function',
                    textContent: btn.textContent.trim()
                };
            }
        });
        
        // Simulate window resize
        const originalWidth = window.innerWidth;
        const originalHeight = window.innerHeight;
        Object.defineProperty(window, 'innerWidth', { value: 800, configurable: true });
        Object.defineProperty(window, 'innerHeight', { value: 600, configurable: true });
        window.dispatchEvent(new Event('resize'));
        
        // Wait for potential DOM updates
        await new Promise(resolve => setTimeout(resolve, 200));
        
        // Verify states remain consistent
        buttonTests.forEach(test => {
            const btn = document.getElementById(test.id);
            const initial = initialStates[test.id];
            
            if (btn && initial) {
                console.log(`‚úÖ ${test.name} - Stan zachowany po resize:`);
                console.log(`   Widoczno≈õƒá: ${btn.offsetParent !== null === initial.visible ? 'OK' : 'B≈ÅƒÑD'}`);
                console.log(`   Onclick handler: ${(btn.onclick !== null) === initial.hasOnclick ? 'OK' : 'B≈ÅƒÑD'}`);
                console.log(`   Funkcja toggle: ${(typeof window[test.toggleFunc] === 'function') === initial.hasToggleFunc ? 'OK' : 'B≈ÅƒÑD'}`);
                console.log(`   Funkcja send: ${(typeof window[test.sendFunc] === 'function') === initial.hasSendFunc ? 'OK' : 'B≈ÅƒÑD'}`);
                console.log(`   Tekst: ${btn.textContent.trim() === initial.textContent ? 'OK' : 'B≈ÅƒÑD'}`);
            }
        });
        
        // Restore original dimensions
        Object.defineProperty(window, 'innerWidth', { value: originalWidth, configurable: true });
        Object.defineProperty(window, 'innerHeight', { value: originalHeight, configurable: true });
        window.dispatchEvent(new Event('resize'));
    }
    
    // Run the resize test
    testButtonStateAfterResize().then(() => {
        console.log('\n‚úÖ Test stanu przycisk√≥w po resize zako≈Ñczony');
    }).catch(err => {
        console.error('‚ùå B≈ÇƒÖd podczas testu resize:', err);
    });
    
    // Test 5: Testowanie jednoczesnego toggle wielu przycisk√≥w
    async function testMultipleButtonsToggleSimultaneously() {
        const buttonTests = [
            { id: 'geminiProBtn', name: 'Gemini Pro', toggleFunc: 'toggleGeminiPro', sendFunc: 'sendToGeminiPro' },
            { id: 'codeBisonBtn', name: 'Code Bison', toggleFunc: 'toggleCodeBison', sendFunc: 'sendToCodeBison' },
            { id: 'textBisonBtn', name: 'Text Bison', toggleFunc: 'toggleTextBison', sendFunc: 'sendToTextBison' },
            { id: 'googleBardBtn', name: 'Google Bard', toggleFunc: 'toggleGoogleBard', sendFunc: 'sendToGoogleBard' }
        ];
        
        console.log('\nüîÑ TEST JEDNOCZESNEGO TOGGLE WIELU PRZYCISK√ìW:');
        
        // Store initial states
        const initialStates = buttonTests.map(test => {
            const btn = document.getElementById(test.id);
            const widget = document.getElementById(test.id.replace('Btn', 'Widget'));
            return {
                id: test.id,
                name: test.name,
                button: btn,
                widget: widget,
                initiallyVisible: widget && !widget.classList.contains('hidden')
            };
        });
        
        // Toggle all buttons simultaneously
        console.log('Klikam wszystkie przyciski jednocze≈õnie...');
        initialStates.forEach(state => {
            if (state.button) {
                state.button.click();
            }
        });
        
        // Wait for DOM updates
        await new Promise(resolve => setTimeout(resolve, 600));
        
        // Verify each widget state changed appropriately
        let successCount = 0;
        initialStates.forEach(state => {
            if (state.widget) {
                const nowVisible = !state.widget.classList.contains('hidden');
                const stateChanged = nowVisible !== state.initiallyVisible;
                
                console.log(`üìã ${state.name}:`);
                console.log(`   PoczƒÖtkowy stan: ${state.initiallyVisible ? 'WIDOCZNY' : 'UKRYTY'}`);
                console.log(`   Obecny stan: ${nowVisible ? 'WIDOCZNY' : 'UKRYTY'}`);
                console.log(`   Stan siƒô zmieni≈Ç: ${stateChanged ? 'TAK' : 'NIE'}`);
                
                if (stateChanged) {
                    successCount++;
                    console.log(`‚úÖ ${state.name} - Toggle zako≈Ñczony sukcesem`);
                } else {
                    console.log(`‚ùå ${state.name} - Toggle nie zadzia≈Ça≈Ç`);
                }
            } else {
                console.log(`‚ùå ${state.name} - Widget nie istnieje`);
            }
        });
        
        const allButtonsWorking = successCount === buttonTests.length;
        console.log(`\nüìä Wynik: ${successCount}/${buttonTests.length} przycisk√≥w dzia≈Ça poprawnie`);
        
        if (allButtonsWorking) {
            console.log('‚úÖ SUKCES - Wszystkie przyciski reagujƒÖ na jednoczesny toggle');
        } else {
            console.log('‚ùå PROBLEM - Niekt√≥re przyciski nie reagujƒÖ poprawnie');
        }
        
        return { successCount, totalButtons: buttonTests.length, allWorking: allButtonsWorking };
    }
    
    // Run the multiple buttons toggle test
    testMultipleButtonsToggleSimultaneously().then(result => {
        console.log('\n‚úÖ Test jednoczesnego toggle wielu przycisk√≥w zako≈Ñczony');
    }).catch(err => {
        console.error('‚ùå B≈ÇƒÖd podczas testu jednoczesnego toggle:', err);
    });
    
    // Test 5: Sprawd≈∫ czy widgety istniejƒÖ
    console.log('\nüì± TEST WIDGET√ìW:');
    const widgets = [
        'geminiProWidget',
        'geminiVisionWidget', 
        'codeBisonWidget',
        'textBisonWidget',
        'googleBardWidget'
    ];
    
    widgets.forEach(widgetId => {
        const widget = document.getElementById(widgetId);
        if (widget) {
            console.log(`‚úÖ ${widgetId}: znaleziony`);
            console.log(`   Klasy: ${widget.className}`);
            console.log(`   Ukryty: ${widget.classList.contains('hidden') ? 'TAK' : 'NIE'}`);
            console.log(`   Display: ${window.getComputedStyle(widget).display}`);
        } else {
            console.log(`‚ùå ${widgetId}: BRAK!`);
        }
    });
    
    console.log('\nüéØ INSTRUKCJE:');
    console.log('1. Sprawd≈∫ wyniki powy≈ºej');
    console.log('2. Kliknij rƒôcznie przyciski po prawej stronie');
    console.log('3. Obserwuj czy floating widgets siƒô otwierajƒÖ');
    console.log('4. Je≈õli widget siƒô otworzy, wpisz wiadomo≈õƒá i kliknij Wy≈õlij');
    
})();