---
import Head from "../components/Head.astro";
import Header from "../components/Header.astro";
import FooterAssistant from "../components/layout/FooterAssistant.astro";
import AiHelpAssistant from '../components/AiHelpAssistant.svelte';

interface Props {
  siteTitle?: string;
  siteDescription?: string;
}

const { siteTitle = "", siteDescription = "" } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <Head pageTitle={siteTitle} pageDescription={siteDescription} />
    <!-- Import Backroom visual styles -->
    <link rel="stylesheet" href="/src/styles/backroom-tailwind.css" />
  </head>
  <body class="bg-cyber-dark text-cyber-text font-sans">
    <Header cosmeticText="Backroom Interface" />
    <main class="min-h-svh pt-24">
      <slot />
    </main>
    <FooterAssistant />

    <!-- POLACZEK_T Floating Assistant -->
    <div class="fixed bottom-3 right-3 z-[60] max-w-xs">
        <button id="polaczekBtn" class="action-btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-lg font-medium">ðŸ¤– POLACZEK_T</button>
        <div id="polaczekWidget" class="hidden absolute bottom-12 right-0 w-96 max-h-[16vh] min-h-[200px] overflow-y-auto bg-gray-800 border border-gray-600 rounded-lg shadow-2xl">
            <AiHelpAssistant client:load pageTitle={siteTitle} />
        </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const polaczekBtn = document.getElementById('polaczekBtn');
        const polaczekWidget = document.getElementById('polaczekWidget');
  
        if (polaczekBtn && polaczekWidget) {
          polaczekBtn.addEventListener('click', () => {
            polaczekWidget.classList.toggle('hidden');
          });
        }
      });
    </script>
  </body>
</html>
