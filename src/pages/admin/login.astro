<<<<<<< HEAD
﻿---
=======
---
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
import UniversalPageLayout from "../../layouts/UniversalPageLayout.astro";
import GlassPanel from "../../layouts/components/GlassPanel.astro";
import CyberpunkButton from "../../layouts/components/CyberpunkButton.astro";

const pageTitle = "Panel Administracyjny MyBonzo";
<<<<<<< HEAD
const pageDescription = "Centrum kontroli i zarzÄ…dzania systemem MyBonzo AI";
const pageQuote = "Z wielkÄ… mocÄ… idzie wielka odpowiedzialnoĹ›Ä‡.";
=======
const pageDescription = "Centrum kontroli i zarządzania systemem MyBonzo AI";
const pageQuote = "Z wielką mocą idzie wielka odpowiedzialność.";
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
const pageAuthor = "Stan Lee";
---

<UniversalPageLayout 
  pageTitle={pageTitle}
  pageDescription={pageDescription}
  pageQuote={pageQuote}
  pageAuthor={pageAuthor}
  showRandomQuote={false}
>
    <!-- Login Section -->
    <div id="loginSection">
<<<<<<< HEAD
        <GlassPanel title="đź” Autoryzacja Administratora" variant="warning" padding="lg">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="color: rgba(255,255,255,0.8); margin-bottom: 20px;">
                    DostÄ™p tylko dla autoryzowanych administratorĂłw systemu MyBonzo
=======
        <GlassPanel title="🔐 Autoryzacja Administratora" variant="warning" padding="lg">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="color: rgba(255,255,255,0.8); margin-bottom: 20px;">
                    Dostęp tylko dla autoryzowanych administratorów systemu MyBonzo
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                </div>
            </div>

            <div style="max-width: 400px; margin: 0 auto;">
                <div style="margin-bottom: 20px;">
<<<<<<< HEAD
                    <label style="display: block; color: #00d9ff; font-weight: 600; margin-bottom: 8px;">HasĹ‚o dostÄ™pu</label>
                    <input 
                        type="password" 
                        id="adminPassword" 
                        placeholder="WprowadĹş hasĹ‚o administratora..."
=======
                    <label style="display: block; color: #00d9ff; font-weight: 600; margin-bottom: 8px;">Hasło dostępu</label>
                    <input 
                        type="password" 
                        id="adminPassword" 
                        placeholder="Wprowadź hasło administratora..."
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        style="width: 100%; padding: 12px; background: rgba(0,0,0,0.6); border: 1px solid rgba(0,217,255,0.3); border-radius: 6px; color: white; font-size: 16px;"
                        onkeypress="handleEnterKey(event)"
                    />
                </div>

                <div style="text-align: center;">
                    <CyberpunkButton 
<<<<<<< HEAD
                        text="đźš€ Zaloguj siÄ™" 
=======
                        text="🚀 Zaloguj się" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        variant="primary" 
                        size="lg"
                        onclick="checkPassword()"
                    />
                </div>

                <div id="errorMessage" style="color: #ff4444; text-align: center; margin-top: 15px; display: none;">
<<<<<<< HEAD
                    NieprawidĹ‚owe hasĹ‚o! DostÄ™p zabroniony.
=======
                    Nieprawidłowe hasło! Dostęp zabroniony.
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                </div>
            </div>
        </GlassPanel>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" style="display: none;">
        
        <!-- Admin Stats -->
<<<<<<< HEAD
        <GlassPanel title="đź“Š Status Systemu" variant="highlight" padding="lg">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div style="background: rgba(0,217,255,0.1); padding: 15px; border: 1px solid rgba(0,217,255,0.3); border-radius: 8px; text-align: center;">
                    <div style="color: #00d9ff; font-size: 2rem; font-weight: 700;" id="activeUsers">247</div>
                    <div style="color: rgba(255,255,255,0.7);">Aktywni uĹĽytkownicy</div>
=======
        <GlassPanel title="📊 Status Systemu" variant="highlight" padding="lg">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div style="background: rgba(0,217,255,0.1); padding: 15px; border: 1px solid rgba(0,217,255,0.3); border-radius: 8px; text-align: center;">
                    <div style="color: #00d9ff; font-size: 2rem; font-weight: 700;" id="activeUsers">247</div>
                    <div style="color: rgba(255,255,255,0.7);">Aktywni użytkownicy</div>
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                </div>
                <div style="background: rgba(0,217,255,0.1); padding: 15px; border: 1px solid rgba(0,217,255,0.3); border-radius: 8px; text-align: center;">
                    <div style="color: #00d9ff; font-size: 2rem; font-weight: 700;" id="totalRequests">12,384</div>
                    <div style="color: rgba(255,255,255,0.7);">Zapytania dzisiaj</div>
                </div>
                <div style="background: rgba(0,217,255,0.1); padding: 15px; border: 1px solid rgba(0,217,255,0.3); border-radius: 8px; text-align: center;">
                    <div style="color: #00d9ff; font-size: 2rem; font-weight: 700;" id="systemUptime">99.8%</div>
                    <div style="color: rgba(255,255,255,0.7);">Uptime systemu</div>
                </div>
                <div style="background: rgba(0,217,255,0.1); padding: 15px; border: 1px solid rgba(0,217,255,0.3); border-radius: 8px; text-align: center;">
                    <div style="color: #00d9ff; font-size: 2rem; font-weight: 700;" id="aiModels">15</div>
                    <div style="color: rgba(255,255,255,0.7);">Aktywne modele AI</div>
                </div>
            </div>
        </GlassPanel>

        <!-- Admin Actions -->
<<<<<<< HEAD
        <GlassPanel title="âšˇ Szybkie Akcje" variant="default" padding="lg">
=======
        <GlassPanel title="⚡ Szybkie Akcje" variant="default" padding="lg">
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                
                <!-- User Management -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź‘Ą ZarzÄ…dzanie uĹĽytkownikami
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        PrzeglÄ…daj, edytuj i zarzÄ…dzaj kontami uĹĽytkownikĂłw
                    </p>
                    <CyberpunkButton 
                        text="ZarzÄ…dzaj uĹĽytkownikami" 
=======
                        👥 Zarządzanie użytkownikami
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Przeglądaj, edytuj i zarządzaj kontami użytkowników
                    </p>
                    <CyberpunkButton 
                        text="Zarządzaj użytkownikami" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        variant="outline" 
                        size="sm"
                        onclick="openUserManagement()"
                    />
                </div>

                <!-- System Monitoring -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź“Š Monitoring systemu
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Monitoruj wydajnoĹ›Ä‡ i logi systemowe
=======
                        📊 Monitoring systemu
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Monitoruj wydajność i logi systemowe
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                    </p>
                    <CyberpunkButton 
                        text="Zobacz monitoring" 
                        variant="outline" 
                        size="sm"
                        onclick="openSystemMonitoring()"
                    />
                </div>

                <!-- AI Models Management -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź¤– Modele AI
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Konfiguruj i zarzÄ…dzaj modelami sztucznej inteligencji
                    </p>
                    <CyberpunkButton 
                        text="ZarzÄ…dzaj modelami" 
=======
                        🤖 Modele AI
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Konfiguruj i zarządzaj modelami sztucznej inteligencji
                    </p>
                    <CyberpunkButton 
                        text="Zarządzaj modelami" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        variant="outline" 
                        size="sm"
                        onclick="openAIModels()"
                    />
                </div>

                <!-- Database Management -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź—„ď¸Ź Baza danych
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        ZarzÄ…dzaj bazÄ… danych i wykonuj kopie zapasowe
                    </p>
                    <CyberpunkButton 
                        text="ZarzÄ…dzaj bazÄ…" 
=======
                        🗄️ Baza danych
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Zarządzaj bazą danych i wykonuj kopie zapasowe
                    </p>
                    <CyberpunkButton 
                        text="Zarządzaj bazą" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        variant="outline" 
                        size="sm"
                        onclick="openDatabaseManagement()"
                    />
                </div>

                <!-- Security Center -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź”’ Centrum bezpieczeĹ„stwa
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Konfiguruj zabezpieczenia i kontrolÄ™ dostÄ™pu
=======
                        🔒 Centrum bezpieczeństwa
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Konfiguruj zabezpieczenia i kontrolę dostępu
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                    </p>
                    <CyberpunkButton 
                        text="Zabezpieczenia" 
                        variant="warning" 
                        size="sm"
                        onclick="openSecurityCenter()"
                    />
                </div>

                <!-- API Management -->
                <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 20px;">
                    <h3 style="color: #00d9ff; margin-bottom: 15px; display: flex; align-items: center;">
<<<<<<< HEAD
                        đź”Ś API Management
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        ZarzÄ…dzaj kluczami API i limitami zapytaĹ„
                    </p>
                    <CyberpunkButton 
                        text="ZarzÄ…dzaj API" 
=======
                        🔌 API Management
                    </h3>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px; font-size: 0.9rem;">
                        Zarządzaj kluczami API i limitami zapytań
                    </p>
                    <CyberpunkButton 
                        text="Zarządzaj API" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                        variant="outline" 
                        size="sm"
                        onclick="openAPIManagement()"
                    />
                </div>
            </div>
        </GlassPanel>

        <!-- Recent Activity -->
<<<<<<< HEAD
        <GlassPanel title="đź• Ostatnia aktywnoĹ›Ä‡" variant="default" padding="lg">
=======
        <GlassPanel title="🕐 Ostatnia aktywność" variant="default" padding="lg">
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
            <div style="max-height: 300px; overflow-y: auto;">
                <div id="activityLog" style="space-y: 10px;">
                    <!-- Activity items will be loaded here -->
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <CyberpunkButton 
<<<<<<< HEAD
                    text="OdĹ›wieĹĽ logi" 
=======
                    text="Odśwież logi" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                    variant="outline" 
                    size="sm"
                    onclick="refreshActivityLog()"
                />
            </div>
        </GlassPanel>

        <!-- Logout -->
        <div style="text-align: center; margin-top: 30px;">
            <CyberpunkButton 
<<<<<<< HEAD
                text="đźšŞ Wyloguj siÄ™" 
                variant="danger" 
=======
                text="🚪 Wyloguj się" 
                variant="outline" 
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                size="md"
                onclick="logout()"
            />
        </div>
    </div>

    <script>
<<<<<<< HEAD
        // Admin password - HAOS77
        const ADMIN_PASSWORD = "HAOS77";

        function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            const errorMessage = document.getElementById('errorMessage');
            
            if (password === ADMIN_PASSWORD) {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
            } else {
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            }
=======
        async function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            const errorMessage = document.getElementById('errorMessage');
            
            if (!password) {
                showError('Wprowadź hasło');
                return;
            }
            
            try {
                const response = await fetch('/api/admin/auth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password })
                });
                
                const data = await response.json();
                
                if (response.ok && data.authenticated) {
                    // Store session token in localStorage
                    localStorage.setItem('adminSession', data.sessionToken);
                    
                    document.getElementById('loginSection').style.display = 'none';
                    document.getElementById('adminDashboard').style.display = 'block';
                    loadDashboardData();
                } else {
                    showError(data.error || 'Nieprawidłowe hasło');
                }
                
            } catch (error) {
                console.error('Auth error:', error);
                showError('Błąd połączenia z serwerem');
            }
        }
        
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 3000);
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
        }

        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }

        function logout() {
<<<<<<< HEAD
=======
            // Clear session
            localStorage.removeItem('adminSession');
            
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('adminPassword').value = '';
        }
<<<<<<< HEAD
=======
        
        // Check if user is already logged in on page load
        window.addEventListener('load', function() {
            const sessionToken = localStorage.getItem('adminSession');
            if (sessionToken) {
                // In production, validate token with server
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
            }
        });
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7

        function loadDashboardData() {
            // Simulate real-time data updates
            updateStats();
            loadActivityLog();
            
            // Update stats every 30 seconds
            setInterval(updateStats, 30000);
        }

<<<<<<< HEAD
        function updateStats() {
            // Simulate live data
            document.getElementById('activeUsers').textContent = Math.floor(Math.random() * 100) + 200;
            document.getElementById('totalRequests').textContent = (Math.floor(Math.random() * 5000) + 10000).toLocaleString();
            document.getElementById('systemUptime').textContent = (99.5 + Math.random() * 0.5).toFixed(1) + '%';
            document.getElementById('aiModels').textContent = Math.floor(Math.random() * 5) + 12;
=======
        async function updateStats() {
            try {
                // Pobieranie prawdziwych danych z API
                const response = await fetch('/api/admin/stats', {
                    headers: {
                        'Authorization': 'Bearer HAOS77'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    document.getElementById('activeUsers').textContent = data.activeUsers || 0;
                    document.getElementById('totalRequests').textContent = (data.totalAPIRequests || 0).toLocaleString();
                    document.getElementById('systemUptime').textContent = data.uptime || '0%';
                    document.getElementById('aiModels').textContent = data.aiModels || 13; // liczba modeli Cloudflare AI
                } else {
                    console.error('Failed to fetch stats:', response.status);
                    // Fallback values jeśli API nie działa
                    document.getElementById('activeUsers').textContent = '247';
                    document.getElementById('totalRequests').textContent = '12,384';
                    document.getElementById('systemUptime').textContent = '99.8%';
                    document.getElementById('aiModels').textContent = '13';
                }
            } catch (error) {
                console.error('Error updating stats:', error);
                // Fallback values w przypadku błędu
                document.getElementById('activeUsers').textContent = 'N/A';
                document.getElementById('totalRequests').textContent = 'N/A';
                document.getElementById('systemUptime').textContent = 'N/A';
                document.getElementById('aiModels').textContent = 'N/A';
            }
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
        }

        function loadActivityLog() {
            const activities = [
<<<<<<< HEAD
                { time: "14:23", action: "Nowy uĹĽytkownik zarejestrowany", type: "info" },
                { time: "14:18", action: "Model AI aktualizowany", type: "success" },
                { time: "14:15", action: "Backup bazy danych zakoĹ„czony", type: "success" },
                { time: "14:12", action: "Alert bezpieczeĹ„stwa - podejrzana aktywnoĹ›Ä‡", type: "warning" },
                { time: "14:08", action: "API call limit przekroczony dla IP: 192.168.1.100", type: "warning" },
                { time: "14:05", action: "System restart zakoĹ„czony pomyĹ›lnie", type: "success" }
=======
                { time: "14:23", action: "Nowy użytkownik zarejestrowany", type: "info" },
                { time: "14:18", action: "Model AI aktualizowany", type: "success" },
                { time: "14:15", action: "Backup bazy danych zakończony", type: "success" },
                { time: "14:12", action: "Alert bezpieczeństwa - podejrzana aktywność", type: "warning" },
                { time: "14:08", action: "API call limit przekroczony dla IP: 192.168.1.100", type: "warning" },
                { time: "14:05", action: "System restart zakończony pomyślnie", type: "success" }
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
            ];

            const logContainer = document.getElementById('activityLog');
            logContainer.innerHTML = activities.map(activity => `
                <div style="background: rgba(0,0,0,0.3); border-left: 3px solid ${getActivityColor(activity.type)}; padding: 12px; margin-bottom: 8px; border-radius: 4px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: white; font-size: 0.9rem;">${activity.action}</span>
                        <span style="color: rgba(255,255,255,0.6); font-size: 0.8rem;">${activity.time}</span>
                    </div>
                </div>
            `).join('');
        }

        function getActivityColor(type) {
            switch(type) {
                case 'success': return '#22c55e';
                case 'warning': return '#f59e0b';
<<<<<<< HEAD
                case 'error': return '#ef4444';
=======
                case 'error': return '#f59e0b';
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
                default: return '#00d9ff';
            }
        }

        function refreshActivityLog() {
            loadActivityLog();
        }

        // Quick action functions
        function openUserManagement() {
<<<<<<< HEAD
            alert('đźš§ ModuĹ‚ zarzÄ…dzania uĹĽytkownikami w przygotowaniu...');
=======
            alert('🚧 Moduł zarządzania użytkownikami w przygotowaniu...');
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
        }

        function openSystemMonitoring() {
            window.open('/status-workers', '_blank');
        }

        function openAIModels() {
            window.open('/ai-workers-manager', '_blank');
        }

        function openDatabaseManagement() {
<<<<<<< HEAD
            alert('đźš§ ModuĹ‚ zarzÄ…dzania bazÄ… danych w przygotowaniu...');
        }

        function openSecurityCenter() {
            alert('đźš§ Centrum bezpieczeĹ„stwa w przygotowaniu...');
        }

        function openAPIManagement() {
            alert('đźš§ ZarzÄ…dzanie API w przygotowaniu...');
=======
            alert('🚧 Moduł zarządzania bazą danych w przygotowaniu...');
        }

        function openSecurityCenter() {
            alert('🚧 Centrum bezpieczeństwa w przygotowaniu...');
        }

        function openAPIManagement() {
            alert('🚧 Zarządzanie API w przygotowaniu...');
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // Focus on password input
            document.getElementById('adminPassword').focus();
        });
    </script>
<<<<<<< HEAD
</UniversalPageLayout>
=======
</UniversalPageLayout>
>>>>>>> c1c4ac5534f2943dcdcdd273d347cf64339cc1a7
