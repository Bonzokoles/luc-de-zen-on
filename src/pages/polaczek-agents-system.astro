---
import MyBonzoLayout from "../layouts/MyBonzoLayout.astro";
import AgentBuilderWrapper from "../components/AgentBuilderWrapper.svelte";
import AgentsLogin from "../components/AgentsLogin.astro";
---

<MyBonzoLayout siteTitle="Kreator Agent√≥w POLACZEK | AI Workers">
  <main class="min-h-svh">
    <!-- Header Section -->
    <section class="border border-edge">
      <div class="max-w-6xl mx-auto border-x border-edge">
        <div class="flex justify-between max-h-72 min-h-64">
          <div class="mt-auto">
            <span
              style="writing-mode: vertical-lr;"
              class="text-edge block px-2 text-xl font-semibold tracking-[0.3em]"
            >
              POLACZEK_SYS
            </span>
          </div>
          <span class="mt-auto">
            <span
              style=""
              class="text-edge block px-2 text-xl font-semibold tracking-[0.3em]"
            >
              AGENT_BUILDER
            </span>
          </span>
        </div>
      </div>
    </section>

    <!-- Navigation Section -->
    <section class="border border-edge">
      <div class="max-w-6xl mx-auto border-x border-edge">
        <div class="flex flex-row p-2">
          <a class="hover:brightness-125" href="/">
            <h1 class="text-4xl sm:text-5xl">POLACZEK AGENTS</h1>
            <h2 class="text-2xl sm:text-3xl">AI Agent Builder System</h2>
          </a>

          <div class="hidden ml-auto gap-4 md:gap-0 md:flex md:flex-col">
            <a class="ml-auto hover:brightness-125 duration-200" href="/">
              ‚Üê Powr√≥t do strony g≈Ç√≥wnej
              <svg
                style="--rotation: -45deg"
                class="stroke-primary-foreground inline aspect-square w-3 h-auto fill-transparent rotate-[var(--rotation)]"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M3 12L21 12M21 12L12.5 3.5M21 12L12.5 20.5"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content Section -->
    <section
      class="ai-workers-section flex items-center justify-center py-16"
      style="background: rgba(0, 0, 0, 0.5);"
      id="polaczek-agents"
    >
      <div class="section-container max-w-4xl mx-auto">
        <h2 class="section-title">POLACZEK AGENTS SYSTEM</h2>
        <p class="section-description">
          Zaawansowany system budowania i zarzƒÖdzania agentami AI z wizualnym
          interfejsem drag-and-drop
        </p>

        <!-- Agent Builder Interface -->
        <div
          class="agent-container border border-edge rounded-lg overflow-hidden mt-8"
          style="background: rgba(0, 0, 0, 0.5);"
        >
          <!-- Agent Builder Header -->
          <div
            class="agent-header border-b border-edge p-4 flex items-center justify-between"
            style="background: rgba(0, 0, 0, 0.5);"
          >
            <div class="flex items-center gap-3">
              <div class="w-3 h-3 bg-cyan-400 rounded-full animate-pulse"></div>
              <span class="text-primary-foreground font-semibold"
                >Agent Builder Online</span
              >
            </div>
            <div class="flex gap-2">
              <button
                onclick="resetBuilder()"
                class="px-3 py-1 bg-red-500/20 border border-red-500/40 rounded text-red-400 hover:bg-red-500/30 transition-all text-sm"
              >
                Reset
              </button>
              <button
                onclick="saveAgent()"
                class="px-3 py-1 bg-green-500/20 border border-green-500/40 rounded text-green-400 hover:bg-green-500/30 transition-all text-sm"
              >
                Save Agent
              </button>
            </div>
          </div>
          <div class="agent-content p-8">
            <!-- Agent Builder z wbudowanƒÖ autoryzacjƒÖ -->
            <AgentBuilderWrapper client:load />
          </div>
        </div>

        <!-- Quick Actions Section -->
        <div class="quick-actions mt-12">
          <h3
            class="text-xl font-semibold mb-6 text-primary-foreground text-center"
          >
            AKCJE SYSTEMOWE
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div
              class="worker-card"
              style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 217, 255, 0.4);"
            >
              <h3 class="worker-title">ü§ñ ZarzƒÖdzaj Agentami</h3>
              <p class="worker-description">
                Zobacz listƒô wszystkich agent√≥w systemowych i stworzonych przez
                u≈ºytkownik√≥w
              </p>
              <div class="worker-features">
                <span class="feature-tag">Active Agents</span>
                <span class="feature-tag">Management</span>
                <span class="feature-tag">Monitoring</span>
              </div>
              <div class="worker-actions">
                <button
                  class="action-btn primary"
                  onclick="window.open('/agents', '_blank')"
                >
                  Otw√≥rz Panel
                </button>
                <button
                  class="action-btn secondary"
                  onclick="listActiveAgents()"
                >
                  Lista Aktywnych
                </button>
              </div>
            </div>

            <div
              class="worker-card"
              style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 217, 255, 0.4);"
            >
              <h3 class="worker-title">üìñ Dokumentacja</h3>
              <p class="worker-description">
                Przewodnik tworzenia efektywnych prompt√≥w i konfiguracji agent√≥w
                AI
              </p>
              <div class="worker-features">
                <span class="feature-tag">Tutorials</span>
                <span class="feature-tag">Examples</span>
                <span class="feature-tag">Best Practices</span>
              </div>
              <div class="worker-actions">
                <button
                  class="action-btn primary"
                  onclick="window.open('/docs/agent-building-guide', '_blank')"
                >
                  Otw√≥rz Docs
                </button>
                <button class="action-btn secondary" onclick="showQuickGuide()">
                  Quick Guide
                </button>
              </div>
            </div>

            <div
              class="worker-card"
              style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 217, 255, 0.4);"
            >
              <h3 class="worker-title">üíé Premium Features</h3>
              <p class="worker-description">
                Odblokuj zaawansowane funkcje systemu z subskrypcjƒÖ Pro lub
                Enterprise
              </p>
              <div class="worker-features">
                <span class="feature-tag">Pro Tools</span>
                <span class="feature-tag">Enterprise</span>
                <span class="feature-tag">Advanced AI</span>
              </div>
              <div class="worker-actions">
                <button
                  class="action-btn primary"
                  onclick="window.open('/zenon-mcp-server', '_blank')"
                >
                  Zobacz Plany
                </button>
                <button
                  class="action-btn secondary"
                  onclick="checkSubscription()"
                >
                  Status
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</MyBonzoLayout>

<style>
  .ai-workers-section {
    background: linear-gradient(
      135deg,
      rgba(15, 23, 42, 0.75) 0%,
      rgba(30, 41, 59, 0.75) 100%
    );
    min-height: 100vh;
  }

  .section-container {
    padding: 2rem;
    width: 100%;
  }

  .section-title {
    font-size: 2.5rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 1rem;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 0.2em;
  }

  .section-description {
    text-align: center;
    font-size: 1.1rem;
    color: #d1d5db;
    margin-bottom: 2rem;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
  }

  .worker-card {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0.75rem;
    padding: 1.5rem;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .worker-card:hover {
    border-color: rgba(0, 217, 255, 0.6);
    background: rgba(0, 0, 0, 0.4);
    transform: translateY(-2px);
  }

  .worker-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #ffffff;
    margin-bottom: 0.5rem;
  }

  .worker-description {
    color: #d1d5db;
    font-size: 0.9rem;
    line-height: 1.5;
    flex-grow: 1;
  }

  .worker-features {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin: 0.5rem 0;
  }

  .feature-tag {
    background: rgba(0, 217, 255, 0.1);
    border: 1px solid rgba(0, 217, 255, 0.3);
    color: #00d9ff;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .worker-actions {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .action-btn {
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
    flex: 1;
    min-width: 0;
  }

  .action-btn.primary {
    background: rgba(0, 217, 255, 0.1);
    border-color: rgba(0, 217, 255, 0.4);
    color: #00d9ff;
  }

  .action-btn.primary:hover {
    background: rgba(0, 217, 255, 0.2);
    border-color: rgba(0, 217, 255, 0.6);
  }

  .action-btn.secondary {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.2);
    color: #d1d5db;
  }

  .action-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .tool-window {
    width: 100%;
    max-width: none;
  }

  .tool-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .tool-content {
    min-height: 400px;
  }

  .agent-container {
    width: 100%;
    max-width: none;
  }

  .agent-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .agent-content {
    min-height: 400px;
  }
</style>

<script>
  // Agent Builder Functions - Authentication handled by AgentBuilderWrapper
  function resetBuilder() {
    console.log("üîÑ Resetowanie Agent Builder...");
    if (
      confirm(
        "Czy na pewno chcesz zresetowaƒá builder? Wszystkie niezapisane zmiany zostanƒÖ utracone."
      )
    ) {
      // Reset logic here
      location.reload();
    }
  }

  function saveAgent() {
    console.log("üíæ Zapisywanie agenta...");
    // Save logic here
    alert("Agent zosta≈Ç zapisany pomy≈õlnie!");
  }

  function listActiveAgents() {
    console.log("üìã Pobieranie listy aktywnych agent√≥w...");
    // Implementation for listing active agents
    window.open("/agents", "_blank");
  }

  function showQuickGuide() {
    console.log("üìñ Wy≈õwietlanie przewodnika...");
    alert(`
ü§ñ QUICK GUIDE - POLACZEK AGENTS

1. Stw√≥rz nowego agenta u≈ºywajƒÖc builder'a
2. Skonfiguruj prompt i parametry
3. Przetestuj dzia≈Çanie agenta
4. Zapisz i wdr√≥≈º do systemu

Wiƒôcej informacji w pe≈Çnej dokumentacji!
    `);
  }

  function checkSubscription() {
    console.log("üíé Sprawdzanie statusu subskrypcji...");
    // Implementation for checking subscription
    alert("Status: Free Plan\nUpgrade dla dostƒôpu do premium features!");
  }
</script>
