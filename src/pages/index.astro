---
import Head from '../components/Head.astro';
import Footer from '../components/Footer.astro';
import Header from "../components/Header.astro";
import Section from "../components/Section.astro";
import Tag from '../components/Tag.astro';
import Date from '../components/Date.astro';
import XMark from "../components/XMark.astro";
import Arrow from '../components/Arrow.astro';

import { USER_PROFESSIONAL_DESCRIPTION } from "../data/user-professional";
import { USER_NAME } from '../data/user-personal';
import { getCollection } from 'astro:content';


const posts = (await getCollection('posts')).sort(
	(a: any, b: any) => b.data.date.valueOf() - a.data.date.valueOf(),
);

const heroTags: string[] = ["Tag A", "Tag B", "Tag C"];

const postFilters: string[] = ["Tag A", "Tag B"];
---

<!doctype html>
<html lang="en" class="bg-primary-desaturated">
	<head><Head pageTitle=`${ USER_NAME }'s Portfolio` pageDescription=`Home page of ${USER_NAME}'s portfolio.`  /></head>
	<body>
		<main class="min-h-svh bg-linear-to-b from-primary-desaturated to-primary">
			<!-- HEADER -->
			<Header />

			<!-- HERO -->
			<Section class="flex flex-row min-h-96 text-center">
				<!-- SKILLS -->
				<label class="bg-primary-border has-checked:bg-transparent has-checked:w-full">
					<input name="hero-accordion" type="radio" class="peer hidden" checked />
					<div class="group flex flex-col justify-between w-14 mr-[1px] min-h-full rounded-lg bg-primary hover:bg-accent hover:cursor-pointer peer-checked:hidden duration-200">
						<Arrow class="w-8 mx-auto my-6 stroke-accent group-hover:stroke-primary-foreground" />
						<h1 style="writing-mode: vertical-lr;" class="my-auto text-2xl font-light group-hover:font-medium">Skills</h1>
						<Arrow class="w-8 mx-auto my-6 stroke-accent group-hover:stroke-primary-foreground" />
					</div>
					<div class="hidden h-full peer-checked:flex">
						<div class="min-w-14"></div>
						<div class="m-auto">
							{ USER_PROFESSIONAL_DESCRIPTION }

							<div class="flex flex-row flex-wrap justify-center gap-2 mt-4">
								{
									heroTags.map((tag) => (
										<Tag>{ tag }</Tag>
									))
								}
							</div>
						</div>
					</div>
				</label>

				<!-- ABOUT -->
				<label class="bg-primary-border has-checked:bg-transparent has-checked:w-full">
					<input name="hero-accordion" type="radio" class="peer hidden" />
					<div class="group flex flex-col justify-between w-14 ml-[1px] min-h-full rounded-lg bg-primary hover:bg-accent hover:cursor-pointer peer-checked:hidden duration-200">
						<Arrow class="w-8 mx-auto my-6 stroke-accent rotate-180 group-hover:stroke-primary-foreground" />
						<h1 style="writing-mode: vertical-lr;" class="my-auto text-2xl font-light group-hover:font-medium">About</h1>
						<Arrow class="w-8 mx-auto my-6 stroke-accent rotate-180 group-hover:stroke-primary-foreground" />
					</div>
					<div class="h-full hidden peer-checked:flex">
						<div class="m-auto">About content</div>
						<div class="min-w-14"></div>
					</div>
				</label>
			</Section>

			<!-- POST FILTERS --> 
			{
				postFilters.length > 0 &&
				(
					<Section>
						<div class="flex gap-2 p-2">
							{
								postFilters.map((postFilter) => (
									<Tag>{ postFilter } <span class="ml-2 opacity-90"><XMark /></span></Tag>
								))
							}
						</div>
					</Section>
				)
			}

			<!-- POSTS -->
			<Section class='bg-primary-foreground/10'>
				<div class="group grid grid-cols-2 gap-4 p-8 border rounded-lg border-accent bg-linear-to-b from-primary to-primary-desaturated pointer-events-none hover:border-gray-700/50 duration-200">					
					{
						posts.map((post: any) => (
							<a href="" class="min-h-32 h-min border rounded-xl border-gray-700/30 bg-primary pointer-events-auto hover:border-accent duration-200">
								<div class="p-2">
									<h3 class="text-primary-foreground/50"><Date date={post.data.date} /></h3>
									<h2 class="text-lg font-semibold">{ post.data.title }</h2>
									<p>{ post.data.description }</p>
								</div>
							</a>
						))
					}
				</div>
			</Section>

			<!-- FOOTER -->
			<Footer />
		</main>
	</body>
</html>
