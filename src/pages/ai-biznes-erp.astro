---
import MainLayout from '../layouts/MainLayout.astro';
import Magazyn from '../components/Magazyn';
import Projekty from '../components/Projekty';
import FinansePro from '../components/FinansePro';
import Wizualizacje from '../components/Wizualizacje';
import IconWrapper from '../components/IconWrapper';

/**
 * AI Biznes ERP - Kompleksowy System ZarzÄ…dzania
 * 
 * Zaawansowany system ERP Å‚Ä…czÄ…cy wszystkie moduÅ‚y biznesowe:
 * - Magazyn: ZarzÄ…dzanie stanem magazynowym, alerty niskiego poziomu
 * - Projekty: Åšledzenie projektÃ³w z kalkulacjÄ… ROI
 * - Finanse Pro: Przychody, koszty, analiza finansowa
 * - Wizualizacje: Wykresy i dashboardy
 * 
 * Wszystkie dane przechowywane lokalnie w localStorage
 */
---

<MainLayout
  title="AI Biznes ERP - Zaawansowany System ZarzÄ…dzania"
  description="Kompleksowy system ERP: Magazyn, Projekty z ROI, Finanse Pro, Wizualizacje danych"
>
  <div class="container mx-auto px-4 py-8 space-y-8">
    
    <!-- Header -->
    <div class="text-center mb-12">
      <div class="inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600/20 to-teal-600/20 border border-emerald-500/50 px-6 py-3 mb-6">
        <IconWrapper client:load name="building" size={32} className="text-emerald-400" />
        <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-emerald-400 to-teal-400 text-transparent bg-clip-text">
          AI Biznes ERP
        </h1>
      </div>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto">
        Kompleksowy system zarzÄ…dzania: Magazyn, Projekty, Finanse i Wizualizacje w jednym miejscu
      </p>
    </div>

    <!-- Navigation Tabs -->
    <div class="flex flex-wrap gap-4 justify-center mb-8">
      <button
        id="tab-magazyn"
        class="tab-button active px-6 py-3 bg-gradient-to-br from-blue-600/30 to-indigo-600/30 border border-blue-500/50 hover:border-blue-400 transition-all flex items-center gap-2"
      >
        <IconWrapper client:load name="package" size={20} className="text-blue-400" />
        <span class="font-semibold">ðŸ“¦ Magazyn</span>
      </button>
      <button
        id="tab-projekty"
        class="tab-button px-6 py-3 bg-gradient-to-br from-purple-600/30 to-pink-600/30 border border-purple-500/50 hover:border-purple-400 transition-all flex items-center gap-2"
      >
        <IconWrapper client:load name="briefcase" size={20} className="text-purple-400" />
        <span class="font-semibold">ðŸ’¼ Projekty</span>
      </button>
      <button
        id="tab-finanse"
        class="tab-button px-6 py-3 bg-gradient-to-br from-green-600/30 to-emerald-600/30 border border-green-500/50 hover:border-green-400 transition-all flex items-center gap-2"
      >
        <IconWrapper client:load name="dollar-sign" size={20} className="text-green-400" />
        <span class="font-semibold">ðŸ’° Finanse Pro</span>
      </button>
      <button
        id="tab-wizualizacje"
        class="tab-button px-6 py-3 bg-gradient-to-br from-orange-600/30 to-red-600/30 border border-orange-500/50 hover:border-orange-400 transition-all flex items-center gap-2"
      >
        <IconWrapper client:load name="bar-chart-2" size={20} className="text-orange-400" />
        <span class="font-semibold">ðŸ“Š Wizualizacje</span>
      </button>
    </div>

    <!-- Module Containers -->
    <div id="module-magazyn" class="module-content">
      <Magazyn client:load />
    </div>

    <div id="module-projekty" class="module-content hidden">
      <Projekty client:load />
    </div>

    <div id="module-finanse" class="module-content hidden">
      <FinansePro client:load />
    </div>

    <div id="module-wizualizacje" class="module-content hidden">
      <Wizualizacje client:load />
    </div>

  </div>

  <style>
    .tab-button {
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .tab-button.active {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
      transform: scale(1.05);
    }

    .module-content {
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <script>
    // Tab Switching Logic
    const tabs = document.querySelectorAll('.tab-button');
    const modules = document.querySelectorAll('.module-content');

    const tabModuleMap: { [key: string]: string } = {
      'tab-magazyn': 'module-magazyn',
      'tab-projekty': 'module-projekty',
      'tab-finanse': 'module-finanse',
      'tab-wizualizacje': 'module-wizualizacje'
    };

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs
        tabs.forEach(t => t.classList.remove('active'));
        
        // Add active class to clicked tab
        tab.classList.add('active');

        // Hide all modules
        modules.forEach(m => m.classList.add('hidden'));

        // Show corresponding module
        const moduleId = tabModuleMap[tab.id];
        const moduleToShow = document.getElementById(moduleId);
        if (moduleToShow) {
          moduleToShow.classList.remove('hidden');
        }
      });
    });
  </script>
</MainLayout>
