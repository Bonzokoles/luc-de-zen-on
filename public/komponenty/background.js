var background=function(){"use strict";var KT=Object.defineProperty;var ZT=(jt,tt,Ft)=>tt in jt?KT(jt,tt,{enumerable:!0,configurable:!0,writable:!0,value:Ft}):jt[tt]=Ft;var et=(jt,tt,Ft)=>ZT(jt,typeof tt!="symbol"?tt+"":tt,Ft);var rf,sf;function jt(t){return t==null||typeof t=="function"?{main:t}:t}class tt extends Error{constructor(n,r,s){const i=n.status||n.status===0?n.status:"",a=n.statusText||"",c=`${i} ${a}`.trim(),u=c?`status code ${c}`:"an unknown error";super(`Request failed with ${u}: ${r.method} ${r.url}`);et(this,"response");et(this,"request");et(this,"options");this.name="HTTPError",this.response=n,this.request=r,this.options=s}}class Ft extends Error{constructor(n){super(`Request timed out: ${n.method} ${n.url}`);et(this,"request");this.name="TimeoutError",this.request=n}}const Jn=t=>t!==null&&typeof t=="object",Hr=(...t)=>{for(const e of t)if((!Jn(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return fi({},...t)},Lo=(t={},e={})=>{const n=new globalThis.Headers(t),r=e instanceof globalThis.Headers,s=new globalThis.Headers(e);for(const[i,a]of s.entries())r&&a==="undefined"||a===void 0?n.delete(i):n.set(i,a);return n};function zr(t,e,n){return Object.hasOwn(e,n)&&e[n]===void 0?[]:fi(t[n]??[],e[n]??[])}const jo=(t={},e={})=>({beforeRequest:zr(t,e,"beforeRequest"),beforeRetry:zr(t,e,"beforeRetry"),afterResponse:zr(t,e,"afterResponse"),beforeError:zr(t,e,"beforeError")}),fi=(...t)=>{let e={},n={},r={};for(const s of t)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if(Jn(s)){for(let[i,a]of Object.entries(s))Jn(a)&&i in e&&(a=fi(e[i],a)),e={...e,[i]:a};Jn(s.hooks)&&(r=jo(r,s.hooks),e.hooks=r),Jn(s.headers)&&(n=Lo(n,s.headers),e.headers=n)}return e},bh=(()=>{let t=!1,e=!1;const n=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";if(n&&r)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")}catch(s){if(s instanceof Error&&s.message==="unsupported BodyInit type")return!1;throw s}return t&&!e})(),wh=typeof globalThis.AbortController=="function",Ah=typeof globalThis.ReadableStream=="function",vh=typeof globalThis.FormData=="function",Fo=["get","post","put","patch","head","delete"],Sh={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},hi=2147483647,Uo=Symbol("stop"),Eh={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},Th={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},kh=t=>Fo.includes(t)?t.toUpperCase():t,Bo={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},xh=(t={})=>{if(typeof t=="number")return{...Bo,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Bo,...t}};async function Ih(t,e,n,r){return new Promise((s,i)=>{const a=setTimeout(()=>{n&&n.abort(),i(new Ft(t))},r.timeout);r.fetch(t,e).then(s).catch(i).then(()=>{clearTimeout(a)})})}async function Oh(t,{signal:e}){return new Promise((n,r)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",s,{once:!0}));function s(){clearTimeout(i),r(e.reason)}const i=setTimeout(()=>{e==null||e.removeEventListener("abort",s),n()},t)})}const Ch=(t,e)=>{const n={};for(const r in e)!(r in Th)&&!(r in Eh)&&!(r in t)&&(n[r]=e[r]);return n};class Gr{constructor(e,n={}){et(this,"request");et(this,"abortController");et(this,"_retryCount",0);et(this,"_input");et(this,"_options");var r,s;if(this._input=e,this._options={...n,headers:Lo(this._input.headers,n.headers),hooks:jo({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},n.hooks),method:kh(n.method??this._input.method??"GET"),prefixUrl:String(n.prefixUrl||""),retry:xh(n.retry),throwHttpErrors:n.throwHttpErrors!==!1,timeout:n.timeout??1e4,fetch:n.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(wh){this.abortController=new globalThis.AbortController;const i=this._options.signal??this._input.signal;i!=null&&i.aborted&&this.abortController.abort(i==null?void 0:i.reason),i==null||i.addEventListener("abort",()=>{this.abortController.abort(i.reason)}),this._options.signal=this.abortController.signal}if(bh&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=((s=(r=this._options).stringifyJson)==null?void 0:s.call(r,this._options.json))??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const a="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),c=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,a);(vh&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(c,{...this.request}),this._options)}}static create(e,n){const r=new Gr(e,n),s=async()=>{if(typeof r._options.timeout=="number"&&r._options.timeout>hi)throw new RangeError(`The \`timeout\` option cannot be greater than ${hi}`);await Promise.resolve();let c=await r._fetch();for(const u of r._options.hooks.afterResponse){const d=await u(r.request,r._options,r._decorateResponse(c.clone()));d instanceof globalThis.Response&&(c=d)}if(r._decorateResponse(c),!c.ok&&r._options.throwHttpErrors){let u=new tt(c,r.request,r._options);for(const d of r._options.hooks.beforeError)u=await d(u);throw u}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Ah)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(c.clone(),r._options.onDownloadProgress)}return c},a=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(s):s();for(const[c,u]of Object.entries(Sh))a[c]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||u);const d=await a;if(c==="json"){if(d.status===204||(await d.clone().arrayBuffer()).byteLength===0)return"";if(n.parseJson)return n.parseJson(await d.text())}return d[c]()};return a}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof Ft)throw e;if(e instanceof tt){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const r=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(r&&this._options.retry.afterStatusCodes.includes(e.response.status)){let s=Number(r)*1e3;Number.isNaN(s)?s=Date.parse(r)-Date.now():s>=Date.parse("2024-01-01")&&(s-=Date.now());const i=this._options.retry.maxRetryAfter??s;return s<i?s:i}if(e.response.status===413)throw e}const n=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,n)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(n){const r=Math.min(this._calculateRetryDelay(n),hi);if(this._retryCount<1)throw n;await Oh(r,{signal:this._options.signal});for(const s of this._options.hooks.beforeRetry)if(await s({request:this.request,options:this._options,error:n,retryCount:this._retryCount})===Uo)return;return this._retry(e)}}async _fetch(){for(const r of this._options.hooks.beforeRequest){const s=await r(this.request,this._options);if(s instanceof Request){this.request=s;break}if(s instanceof Response)return s}const e=Ch(this.request,this._options),n=this.request;return this.request=n.clone(),this._options.timeout===!1?this._options.fetch(n,e):Ih(n,e,this.abortController,this._options)}_stream(e,n){const r=Number(e.headers.get("content-length"))||0;let s=0;return e.status===204?(n&&n({percent:1,totalBytes:r,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){const a=e.body.getReader();n&&n({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function c(){const{done:u,value:d}=await a.read();if(u){i.close();return}if(n){s+=d.byteLength;const h=r===0?0:s/r;n({percent:h,transferredBytes:s,totalBytes:r},d)}i.enqueue(d),await c()}await c()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}/*! MIT License © Sindre Sorhus */const mi=t=>{const e=(n,r)=>Gr.create(n,Hr(t,r));for(const n of Fo)e[n]=(r,s)=>Gr.create(r,Hr(t,s,{method:n}));return e.create=n=>mi(Hr(n)),e.extend=n=>(typeof n=="function"&&(n=n(t??{})),mi(Hr(t,n))),e.stop=Uo,e},Rh=mi(),gi="https://klu.so",Jr=`${gi}/recordings`,Ph=`${gi}/auth/extension`;var me=(t=>(t.startTime="session:startTime",t.recordingStatus="session:recordingStatus",t.videoId="session:videoId",t.meetSpeakersData="session:meetSpeakersData",t.recordingTabId="session:recordingTabId",t.transcriptStatusChecking="session:transcript-status-checking",t.isPopupInvoked="session:isPopupInvoked",t.session="local:session",t.user="session:user",t.selectedLanguage="session:selectedLanguage",t.selectedTemplate="session:selectedTemplate",t.recordingMode="session:recordingMode",t.meetingTabs="session:meetingTabs",t.activeTab="session:activeTab",t.loginTabId="session:loginTabId",t.isDialogOpen="session:isDialogOpen",t.failedApiCalls="local:failedApiCalls",t.failedUploadVideos="local:failedUploadVideos",t.failedUploadAudios="local:failedUploadAudios",t.retryingFailedRecordings="session:retryingFailedRecordings",t.isEntitled="session:isEntitled",t))(me||{}),Vo=Object.prototype.hasOwnProperty;function pi(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&pi(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Vo.call(t,n)&&++r&&!Vo.call(e,n)||!(n in e)||!pi(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Mh=new Error("request for lock canceled");var $h=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class Nh{constructor(e,n=Mh){this._value=e,this._cancelError=n,this._queue=[],this._weightedWaiters=[]}acquire(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,s)=>{const i={resolve:r,reject:s,weight:e,priority:n},a=qo(this._queue,c=>n<=c.priority);a===-1&&e<=this._value?this._dispatchItem(i):this._queue.splice(a+1,0,i)})}runExclusive(e){return $h(this,arguments,void 0,function*(n,r=1,s=0){const[i,a]=yield this.acquire(r,s);try{return yield n(i)}finally{a()}})}waitForUnlock(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,n)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Dh(this._weightedWaiters[e-1],{resolve:r,priority:n})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const n=this._value;this._value-=e.weight,e.resolve([n,this._newReleaser(e.weight)])}_newReleaser(e){let n=!1;return()=>{n||(n=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const n=this._weightedWaiters[e-1];n&&(n.forEach(r=>r.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let n=this._value;n>0;n--){const r=this._weightedWaiters[n-1];if(!r)continue;const s=r.findIndex(i=>i.priority<=e);(s===-1?r:r.splice(0,s)).forEach(i=>i.resolve())}}}_couldLockImmediately(e,n){return(this._queue.length===0||this._queue[0].priority<n)&&e<=this._value}}function Dh(t,e){const n=qo(t,r=>e.priority<=r.priority);t.splice(n+1,0,e)}function qo(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n]))return n;return-1}var Lh=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class jh{constructor(e){this._semaphore=new Nh(1,e)}acquire(){return Lh(this,arguments,void 0,function*(e=0){const[,n]=yield this._semaphore.acquire(1,e);return n})}runExclusive(e,n=0){return this._semaphore.runExclusive(()=>e(),1,n)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const Kr=((sf=(rf=globalThis.browser)==null?void 0:rf.runtime)==null?void 0:sf.id)==null?globalThis.chrome:globalThis.browser,pe=Fh();function Fh(){const t={local:Zr("local"),session:Zr("session"),sync:Zr("sync"),managed:Zr("managed")},e=v=>{const A=t[v];if(A==null){const T=Object.keys(t).join(", ");throw Error(`Invalid area "${v}". Options: ${T}`)}return A},n=v=>{const A=v.indexOf(":"),T=v.substring(0,A),P=v.substring(A+1);if(P==null)throw Error(`Storage key should be in the form of "area:key", but received "${v}"`);return{driverArea:T,driverKey:P,driver:e(T)}},r=v=>v+"$",s=(v,A)=>{const T={...v};return Object.entries(A).forEach(([P,$])=>{$==null?delete T[P]:T[P]=$}),T},i=(v,A)=>v??A??null,a=v=>typeof v=="object"&&!Array.isArray(v)?v:{},c=async(v,A,T)=>{const P=await v.getItem(A);return i(P,(T==null?void 0:T.fallback)??(T==null?void 0:T.defaultValue))},u=async(v,A)=>{const T=r(A),P=await v.getItem(T);return a(P)},d=async(v,A,T)=>{await v.setItem(A,T??null)},h=async(v,A,T)=>{const P=r(A),$=a(await v.getItem(P));await v.setItem(P,s($,T))},g=async(v,A,T)=>{if(await v.removeItem(A),T!=null&&T.removeMeta){const P=r(A);await v.removeItem(P)}},y=async(v,A,T)=>{const P=r(A);if(T==null)await v.removeItem(P);else{const $=a(await v.getItem(P));[T].flat().forEach(U=>delete $[U]),await v.setItem(P,$)}},b=(v,A,T)=>v.watch(A,T);return{getItem:async(v,A)=>{const{driver:T,driverKey:P}=n(v);return await c(T,P,A)},getItems:async v=>{const A=new Map,T=new Map,P=[];v.forEach(U=>{let F,R;typeof U=="string"?F=U:"getValue"in U?(F=U.key,R={fallback:U.fallback}):(F=U.key,R=U.options),P.push(F);const{driverArea:N,driverKey:_}=n(F),S=A.get(N)??[];A.set(N,S.concat(_)),T.set(F,R)});const $=new Map;return await Promise.all(Array.from(A.entries()).map(async([U,F])=>{(await t[U].getItems(F)).forEach(N=>{const _=`${U}:${N.key}`,S=T.get(_),I=i(N.value,(S==null?void 0:S.fallback)??(S==null?void 0:S.defaultValue));$.set(_,I)})})),P.map(U=>({key:U,value:$.get(U)}))},getMeta:async v=>{const{driver:A,driverKey:T}=n(v);return await u(A,T)},getMetas:async v=>{const A=v.map($=>{const U=typeof $=="string"?$:$.key,{driverArea:F,driverKey:R}=n(U);return{key:U,driverArea:F,driverKey:R,driverMetaKey:r(R)}}),T=A.reduce(($,U)=>{var F;return $[F=U.driverArea]??($[F]=[]),$[U.driverArea].push(U),$},{}),P={};return await Promise.all(Object.entries(T).map(async([$,U])=>{const F=await Kr.storage[$].get(U.map(R=>R.driverMetaKey));U.forEach(R=>{P[R.key]=F[R.driverMetaKey]??{}})})),A.map($=>({key:$.key,meta:P[$.key]}))},setItem:async(v,A)=>{const{driver:T,driverKey:P}=n(v);await d(T,P,A)},setItems:async v=>{const A={};v.forEach(T=>{const{driverArea:P,driverKey:$}=n("key"in T?T.key:T.item.key);A[P]??(A[P]=[]),A[P].push({key:$,value:T.value})}),await Promise.all(Object.entries(A).map(async([T,P])=>{await e(T).setItems(P)}))},setMeta:async(v,A)=>{const{driver:T,driverKey:P}=n(v);await h(T,P,A)},setMetas:async v=>{const A={};v.forEach(T=>{const{driverArea:P,driverKey:$}=n("key"in T?T.key:T.item.key);A[P]??(A[P]=[]),A[P].push({key:$,properties:T.meta})}),await Promise.all(Object.entries(A).map(async([T,P])=>{const $=e(T),U=P.map(({key:_})=>r(_));console.log(T,U);const F=await $.getItems(U),R=Object.fromEntries(F.map(({key:_,value:S})=>[_,a(S)])),N=P.map(({key:_,properties:S})=>{const I=r(_);return{key:I,value:s(R[I]??{},S)}});await $.setItems(N)}))},removeItem:async(v,A)=>{const{driver:T,driverKey:P}=n(v);await g(T,P,A)},removeItems:async v=>{const A={};v.forEach(T=>{let P,$;typeof T=="string"?P=T:"getValue"in T?P=T.key:"item"in T?(P=T.item.key,$=T.options):(P=T.key,$=T.options);const{driverArea:U,driverKey:F}=n(P);A[U]??(A[U]=[]),A[U].push(F),$!=null&&$.removeMeta&&A[U].push(r(F))}),await Promise.all(Object.entries(A).map(async([T,P])=>{await e(T).removeItems(P)}))},clear:async v=>{await e(v).clear()},removeMeta:async(v,A)=>{const{driver:T,driverKey:P}=n(v);await y(T,P,A)},snapshot:async(v,A)=>{var $;const P=await e(v).snapshot();return($=A==null?void 0:A.excludeKeys)==null||$.forEach(U=>{delete P[U],delete P[r(U)]}),P},restoreSnapshot:async(v,A)=>{await e(v).restoreSnapshot(A)},watch:(v,A)=>{const{driver:T,driverKey:P}=n(v);return b(T,P,A)},unwatch(){Object.values(t).forEach(v=>{v.unwatch()})},defineItem:(v,A)=>{const{driver:T,driverKey:P}=n(v),{version:$=1,migrations:U={}}=A??{};if($<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const F=async()=>{var W;const I=r(P),[{value:C},{value:D}]=await T.getItems([P,I]);if(C==null)return;const L=(D==null?void 0:D.v)??1;if(L>$)throw Error(`Version downgrade detected (v${L} -> v${$}) for "${v}"`);console.debug(`[@wxt-dev/storage] Running storage migration for ${v}: v${L} -> v${$}`);const q=Array.from({length:$-L},(B,H)=>L+H+1);let O=C;for(const B of q)try{O=await((W=U==null?void 0:U[B])==null?void 0:W.call(U,O))??O}catch(H){throw Error(`v${B} migration failed for "${v}"`,{cause:H})}await T.setItems([{key:P,value:O},{key:I,value:{...D,v:$}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${v} v${$}`,{migratedValue:O})},R=(A==null?void 0:A.migrations)==null?Promise.resolve():F().catch(I=>{console.error(`[@wxt-dev/storage] Migration failed for ${v}`,I)}),N=new jh,_=()=>(A==null?void 0:A.fallback)??(A==null?void 0:A.defaultValue)??null,S=()=>N.runExclusive(async()=>{const I=await T.getItem(P);if(I!=null||(A==null?void 0:A.init)==null)return I;const C=await A.init();return await T.setItem(P,C),C});return R.then(S),{key:v,get defaultValue(){return _()},get fallback(){return _()},getValue:async()=>(await R,A!=null&&A.init?await S():await c(T,P,A)),getMeta:async()=>(await R,await u(T,P)),setValue:async I=>(await R,await d(T,P,I)),setMeta:async I=>(await R,await h(T,P,I)),removeValue:async I=>(await R,await g(T,P,I)),removeMeta:async I=>(await R,await y(T,P,I)),watch:I=>b(T,P,(C,D)=>I(C??_(),D??_())),migrate:F}}}}function Zr(t){const e=()=>{if(Kr.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(Kr.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const r=Kr.storage[t];if(r==null)throw Error(`"browser.storage.${t}" is undefined`);return r},n=new Set;return{getItem:async r=>(await e().get(r))[r],getItems:async r=>{const s=await e().get(r);return r.map(i=>({key:i,value:s[i]??null}))},setItem:async(r,s)=>{s==null?await e().remove(r):await e().set({[r]:s})},setItems:async r=>{const s=r.reduce((i,{key:a,value:c})=>(i[a]=c,i),{});await e().set(s)},removeItem:async r=>{await e().remove(r)},removeItems:async r=>{await e().remove(r)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async r=>{await e().set(r)},watch(r,s){const i=a=>{const c=a[r];c!=null&&(pi(c.newValue,c.oldValue)||s(c.newValue??null,c.oldValue??null))};return e().onChanged.addListener(i),n.add(i),()=>{e().onChanged.removeListener(i),n.delete(i)}},unwatch(){n.forEach(r=>{e().onChanged.removeListener(r)}),n.clear()}}}const yi=pe.defineItem(me.startTime,{fallback:null,version:1}),_i=pe.defineItem(me.recordingStatus,{fallback:"idle",version:1}),Wo=pe.defineItem(me.videoId,{fallback:null,version:1}),Uh=pe.defineItem(me.meetSpeakersData,{fallback:[],version:1}),Yr=pe.defineItem(me.recordingTabId,{fallback:null,version:1});pe.defineItem(me.transcriptStatusChecking,{fallback:!1,version:1});const Bh=pe.defineItem(me.isPopupInvoked,{fallback:!1,version:1}),Xr=pe.defineItem(me.session,{fallback:null,version:1}),Ut=pe.defineItem(me.user,{fallback:null,version:1}),Vh=pe.defineItem(me.selectedLanguage,{fallback:"auto",version:2}),qh=pe.defineItem(me.selectedTemplate,{fallback:"auto",version:2}),Wh=pe.defineItem(me.meetingTabs,{fallback:[],version:1}),bi=pe.defineItem(me.activeTab,{fallback:null,version:1}),wi=pe.defineItem(me.loginTabId,{fallback:null,version:1}),Hh=pe.defineItem(me.recordingMode,{fallback:"TRANSCRIPT_ONLY",version:1});pe.defineItem(me.isDialogOpen,{fallback:!1,version:1});const hn=pe.defineItem(me.failedApiCalls,{fallback:{},version:1}),Ai=pe.defineItem(me.retryingFailedRecordings,{fallback:!1,version:1}),Qr=pe.defineItem(me.failedUploadVideos,{fallback:{},version:1}),es=pe.defineItem(me.failedUploadAudios,{fallback:{},version:1});pe.defineItem(me.isEntitled,{fallback:!1,version:1});const zh=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),Gh=new Map(zh);class vi extends Error{constructor(n){super(vi._prepareSuperMessage(n));et(this,"name","NonError")}static _prepareSuperMessage(n){try{return JSON.stringify(n)}catch{return String(n)}}}const Jh=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Si=new WeakSet,Kh=t=>{Si.add(t);const e=t.toJSON();return Si.delete(t),e},Ho=t=>Gh.get(t)??Error,Ei=({from:t,seen:e,to:n,forceEnumerable:r,maxDepth:s,depth:i,useToJSON:a,serialize:c})=>{if(!n)if(Array.isArray(t))n=[];else if(!c&&zo(t)){const d=Ho(t.name);n=new d}else n={};if(e.push(t),i>=s)return n;if(a&&typeof t.toJSON=="function"&&!Si.has(t))return Kh(t);const u=d=>Ei({from:d,seen:[...e],forceEnumerable:r,maxDepth:s,depth:i,useToJSON:a,serialize:c});for(const[d,h]of Object.entries(t)){if(h&&h instanceof Uint8Array&&h.constructor.name==="Buffer"){n[d]="[object Buffer]";continue}if(h!==null&&typeof h=="object"&&typeof h.pipe=="function"){n[d]="[object Stream]";continue}if(typeof h!="function"){if(!h||typeof h!="object"){try{n[d]=h}catch{}continue}if(!e.includes(t[d])){i++,n[d]=u(t[d]);continue}n[d]="[Circular]"}}for(const{property:d,enumerable:h}of Jh)typeof t[d]<"u"&&t[d]!==null&&Object.defineProperty(n,d,{value:zo(t[d])?u(t[d]):t[d],enumerable:r?!0:h,configurable:!0,writable:!0});return n};function Zh(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:r=!0}=e;return typeof t=="object"&&t!==null?Ei({from:t,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:r,serialize:!0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t}function Yh(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(Xh(t)){const r=Ho(t.name);return Ei({from:t,seen:[],to:new r,maxDepth:n,depth:0,serialize:!1})}return new vi(t)}function zo(t){return!!t&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}function Xh(t){return!!t&&typeof t=="object"&&"message"in t&&!Array.isArray(t)}var Qh=Object.defineProperty,em=Object.defineProperties,tm=Object.getOwnPropertyDescriptors,Go=Object.getOwnPropertySymbols,nm=Object.prototype.hasOwnProperty,rm=Object.prototype.propertyIsEnumerable,Jo=(t,e,n)=>e in t?Qh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ko=(t,e)=>{for(var n in e||(e={}))nm.call(e,n)&&Jo(t,n,e[n]);if(Go)for(var n of Go(e))rm.call(e,n)&&Jo(t,n,e[n]);return t},Zo=(t,e)=>em(t,tm(e)),sm=(t,e,n)=>new Promise((r,s)=>{var i=u=>{try{c(n.next(u))}catch(d){s(d)}},a=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,a);c((n=n.apply(t,e)).next())});function im(t){let e,n={};function r(){Object.entries(n).length===0&&(e==null||e(),e=void 0)}let s=Math.floor(Math.random()*1e4);function i(){return s++}return{sendMessage(a,c,...u){return sm(this,null,function*(){var d,h,g,y;const b={id:i(),type:a,data:c,timestamp:Date.now()},k=(h=yield(d=t.verifyMessageData)==null?void 0:d.call(t,b))!=null?h:b;(g=t.logger)==null||g.debug(`[messaging] sendMessage {id=${k.id}} ─ᐅ`,k,...u);const v=yield t.sendMessage(k,...u),{res:A,err:T}=v??{err:new Error("No response")};if((y=t.logger)==null||y.debug(`[messaging] sendMessage {id=${k.id}} ᐊ─`,{res:A,err:T}),T!=null)throw Yh(T);return A})},onMessage(a,c){var u,d,h;if(e==null&&((u=t.logger)==null||u.debug(`[messaging] "${a}" initialized the message listener for this context`),e=t.addRootListener(g=>{var y,b;if(typeof g.type!="string"||typeof g.timestamp!="number"){if(t.breakError)return;const A=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(g)}`);throw(y=t.logger)==null||y.error(A),A}(b=t==null?void 0:t.logger)==null||b.debug("[messaging] Received message",g);const k=n[g.type];if(k==null)return;const v=k(g);return Promise.resolve(v).then(A=>{var T,P;return(P=(T=t.verifyMessageData)==null?void 0:T.call(t,A))!=null?P:A}).then(A=>{var T;return(T=t==null?void 0:t.logger)==null||T.debug(`[messaging] onMessage {id=${g.id}} ─ᐅ`,{res:A}),{res:A}}).catch(A=>{var T;return(T=t==null?void 0:t.logger)==null||T.debug(`[messaging] onMessage {id=${g.id}} ─ᐅ`,{err:A}),{err:Zh(A)}})})),n[a]!=null){const g=Error(`[messaging] In this JS context, only one listener can be setup for ${a}`);throw(d=t.logger)==null||d.error(g),g}return n[a]=c,(h=t.logger)==null||h.log(`[messaging] Added listener for ${a}`),()=>{delete n[a],r()}},removeAllListeners(){Object.keys(n).forEach(a=>{delete n[a]}),r()}}}function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ts={exports:{}},am=ts.exports,Xo;function om(){return Xo||(Xo=1,function(t,e){(function(n,r){r(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:am,function(n){var r,s;if(!((s=(r=globalThis.chrome)==null?void 0:r.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",a=c=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(S,I=void 0){super(I),this.createItem=S}get(S){return this.has(S)||this.set(S,this.createItem(S)),super.get(S)}}const h=_=>_&&typeof _=="object"&&typeof _.then=="function",g=(_,S)=>(...I)=>{c.runtime.lastError?_.reject(new Error(c.runtime.lastError.message)):S.singleCallbackArg||I.length<=1&&S.singleCallbackArg!==!1?_.resolve(I[0]):_.resolve(I)},y=_=>_==1?"argument":"arguments",b=(_,S)=>function(C,...D){if(D.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${D.length}`);if(D.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${D.length}`);return new Promise((L,q)=>{if(S.fallbackToNoCallback)try{C[_](...D,g({resolve:L,reject:q},S))}catch(O){console.warn(`${_} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,O),C[_](...D),S.fallbackToNoCallback=!1,S.noCallback=!0,L()}else S.noCallback?(C[_](...D),L()):C[_](...D,g({resolve:L,reject:q},S))})},k=(_,S,I)=>new Proxy(S,{apply(C,D,L){return I.call(D,_,...L)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const A=(_,S={},I={})=>{let C=Object.create(null),D={has(q,O){return O in _||O in C},get(q,O,W){if(O in C)return C[O];if(!(O in _))return;let B=_[O];if(typeof B=="function")if(typeof S[O]=="function")B=k(_,_[O],S[O]);else if(v(I,O)){let H=b(O,I[O]);B=k(_,_[O],H)}else B=B.bind(_);else if(typeof B=="object"&&B!==null&&(v(S,O)||v(I,O)))B=A(B,S[O],I[O]);else if(v(I,"*"))B=A(B,S[O],I["*"]);else return Object.defineProperty(C,O,{configurable:!0,enumerable:!0,get(){return _[O]},set(H){_[O]=H}}),B;return C[O]=B,B},set(q,O,W,B){return O in C?C[O]=W:_[O]=W,!0},defineProperty(q,O,W){return Reflect.defineProperty(C,O,W)},deleteProperty(q,O){return Reflect.deleteProperty(C,O)}},L=Object.create(_);return new Proxy(L,D)},T=_=>({addListener(S,I,...C){S.addListener(_.get(I),...C)},hasListener(S,I){return S.hasListener(_.get(I))},removeListener(S,I){S.removeListener(_.get(I))}}),P=new d(_=>typeof _!="function"?_:function(I){const C=A(I,{},{getContent:{minArgs:0,maxArgs:0}});_(C)}),$=new d(_=>typeof _!="function"?_:function(I,C,D){let L=!1,q,O=new Promise(oe=>{q=function(ee){L=!0,oe(ee)}}),W;try{W=_(I,C,q)}catch(oe){W=Promise.reject(oe)}const B=W!==!0&&h(W);if(W!==!0&&!B&&!L)return!1;const H=oe=>{oe.then(ee=>{D(ee)},ee=>{let Be;ee&&(ee instanceof Error||typeof ee.message=="string")?Be=ee.message:Be="An unexpected error occurred",D({__mozWebExtensionPolyfillReject__:!0,message:Be})}).catch(ee=>{console.error("Failed to send onMessage rejected reply",ee)})};return H(B?W:O),!0}),U=({reject:_,resolve:S},I)=>{c.runtime.lastError?c.runtime.lastError.message===i?S():_(new Error(c.runtime.lastError.message)):I&&I.__mozWebExtensionPolyfillReject__?_(new Error(I.message)):S(I)},F=(_,S,I,...C)=>{if(C.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${C.length}`);if(C.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${C.length}`);return new Promise((D,L)=>{const q=U.bind(null,{resolve:D,reject:L});C.push(q),I.sendMessage(...C)})},R={devtools:{network:{onRequestFinished:T(P)}},runtime:{onMessage:T($),onMessageExternal:T($),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},N={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":N},services:{"*":N},websites:{"*":N}},A(c,R,u)};n.exports=a(chrome)}else n.exports=globalThis.browser})}(ts)),ts.exports}var cm=om();const ns=bt(cm);function rs(t){return im(Zo(Ko({},t),{sendMessage(e,n){if(n==null)return ns.runtime.sendMessage(e);const r=typeof n=="number"?{tabId:n}:n;return ns.tabs.sendMessage(r.tabId,e,r.frameId!=null?{frameId:r.frameId}:void 0)},addRootListener(e){const n=(r,s)=>e(typeof r=="object"?Zo(Ko({},r),{sender:s}):r);return ns.runtime.onMessage.addListener(n),()=>ns.runtime.onMessage.removeListener(n)}}))}const ss=rs(),we=rs(),Ke=rs();let Qo;function um(){Qo=!0}function lm(){return Qo===!0}const dm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>gn).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ti extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class fm extends Ti{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hm extends Ti{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mm extends Ti{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ki;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ki||(ki={}));var gm=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class pm{constructor(e,{headers:n={},customFetch:r,region:s=ki.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=dm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return gm(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let c={},{region:u}=n;u||(u=this.region),u&&u!=="any"&&(c["x-region"]=u);let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(c["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(c["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:d}).catch(k=>{throw new fm(k)}),g=h.headers.get("x-relay-error");if(g&&g==="true")throw new hm(h);if(!h.ok)throw new mm(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return y==="application/json"?b=yield h.json():y==="application/octet-stream"?b=yield h.blob():y==="text/event-stream"?b=h:y==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var Te={},Kn={},Zn={},Yn={},Xn={},Qn={},ym=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mn=ym();const _m=mn.fetch,ec=mn.fetch.bind(mn),tc=mn.Headers,bm=mn.Request,wm=mn.Response,gn=Object.freeze(Object.defineProperty({__proto__:null,Headers:tc,Request:bm,Response:wm,default:ec,fetch:_m},Symbol.toStringTag,{value:"Module"})),Am=Yo(gn);var is={},nc;function rc(){if(nc)return is;nc=1,Object.defineProperty(is,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return is.default=t,is}var sc;function ic(){if(sc)return Qn;sc=1;var t=Qn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Qn,"__esModule",{value:!0});const e=t(Am),n=t(rc());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,g,y;let b=null,k=null,v=null,A=d.status,T=d.statusText;if(d.ok){if(this.method!=="HEAD"){const F=await d.text();F===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=F:k=JSON.parse(F))}const $=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),U=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");$&&U&&U.length>1&&(v=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,v=null,A=406,T="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await d.text();try{b=JSON.parse($),Array.isArray(b)&&d.status===404&&(k=[],b=null,A=200,T="OK")}catch{d.status===404&&$===""?(A=204,T="No Content"):b={message:$}}if(b&&this.isMaybeSingle&&(!((y=b==null?void 0:b.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,A=200,T="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:v,status:A,statusText:T}});return this.shouldThrowOnError||(u=u.catch(d=>{var h,g,y;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(g=d==null?void 0:d.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=d==null?void 0:d.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,a)}}return Qn.default=r,Qn}var ac;function oc(){if(ac)return Xn;ac=1;var t=Xn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xn,"__esModule",{value:!0});const e=t(ic());class n extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:c,referencedTable:u=c}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:c=a}={}){const u=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(d,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:c=!1,wal:u=!1,format:d="text"}={}){var h;const g=[s?"analyze":null,i?"verbose":null,a?"settings":null,c?"buffers":null,u?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${y}"; options=${g};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Xn.default=n,Xn}var cc;function xi(){if(cc)return Yn;cc=1;var t=Yn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yn,"__esModule",{value:!0});const e=t(oc());class n extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${d}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Yn.default=n,Yn}var uc;function lc(){if(uc)return Zn;uc=1;var t=Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});const e=t(xi());class n{constructor(s,{headers:i={},schema:a,fetch:c}){this.url=s,this.headers=i,this.schema=a,this.fetch=c}select(s,{head:i=!1,count:a}={}){const c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const c="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),a||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const d=s.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(d.length>0){const h=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:c,defaultToNull:u=!0}={}){const d="POST",h=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),u||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(s)){const g=s.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(g.length>0){const y=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Zn.default=n,Zn}var er={},tr={},dc;function vm(){return dc||(dc=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.version=void 0,tr.version="0.0.0-automated"),tr}var fc;function Sm(){if(fc)return er;fc=1,Object.defineProperty(er,"__esModule",{value:!0}),er.DEFAULT_HEADERS=void 0;const t=vm();return er.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},er}var hc;function Em(){if(hc)return Kn;hc=1;var t=Kn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kn,"__esModule",{value:!0});const e=t(lc()),n=t(xi()),r=Sm();class s{constructor(a,{headers:c={},schema:u,fetch:d}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=u,this.fetch=d}from(a){const c=new URL(`${this.url}/${a}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,c={},{head:u=!1,get:d=!1,count:h}={}){let g;const y=new URL(`${this.url}/rpc/${a}`);let b;u||d?(g=u?"HEAD":"GET",Object.entries(c).filter(([v,A])=>A!==void 0).map(([v,A])=>[v,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([v,A])=>{y.searchParams.append(v,A)})):(g="POST",b=c);const k=Object.assign({},this.headers);return h&&(k.Prefer=`count=${h}`),new n.default({method:g,url:y,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Kn.default=s,Kn}var mc;function Tm(){if(mc)return Te;mc=1;var t=Te.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Te,"__esModule",{value:!0}),Te.PostgrestError=Te.PostgrestBuilder=Te.PostgrestTransformBuilder=Te.PostgrestFilterBuilder=Te.PostgrestQueryBuilder=Te.PostgrestClient=void 0;const e=t(Em());Te.PostgrestClient=e.default;const n=t(lc());Te.PostgrestQueryBuilder=n.default;const r=t(xi());Te.PostgrestFilterBuilder=r.default;const s=t(oc());Te.PostgrestTransformBuilder=s.default;const i=t(ic());Te.PostgrestBuilder=i.default;const a=t(rc());return Te.PostgrestError=a.default,Te.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},Te}var km=Tm();const xm=bt(km),{PostgrestClient:Im,PostgrestQueryBuilder:e0,PostgrestFilterBuilder:t0,PostgrestTransformBuilder:n0,PostgrestBuilder:r0,PostgrestError:s0}=xm,Om={"X-Client-Info":"realtime-js/2.11.2"},Cm="1.0.0",gc=1e4,Rm=1e3;var pn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pn||(pn={}));var De;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(De||(De={}));var Ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ze||(Ze={}));var Ii;(function(t){t.websocket="websocket"})(Ii||(Ii={}));var Bt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Bt||(Bt={}));class Pm{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const c=r.decode(e.slice(a,a+s));a=a+s;const u=r.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:u,payload:d}}}class pc{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(de||(de={}));const yc=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=Mm(a,t,e,s),i),{})},Mm=(t,e,n,r)=>{const s=e.find(c=>c.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?_c(i,a):Oi(a)},_c=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Lm(e,n)}switch(t){case de.bool:return $m(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return Nm(e);case de.json:case de.jsonb:return Dm(e);case de.timestamp:return jm(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return Oi(e);default:return Oi(e)}},Oi=t=>t,$m=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Nm=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Dm=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Lm=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(c=>_c(e,c))}return t},jm=t=>typeof t=="string"?t.replace(" ","T"):t,bc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ci{constructor(e,n,r={},s=gc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wc||(wc={}));class nr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nr.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=nr.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=nr.syncDiff(this.state,s,i,a),c())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),c={},u={};return this.map(i,(d,h)=>{a[d]||(u[d]=h)}),this.map(a,(d,h)=>{const g=i[d];if(g){const y=h.map(A=>A.presence_ref),b=g.map(A=>A.presence_ref),k=h.filter(A=>b.indexOf(A.presence_ref)<0),v=g.filter(A=>y.indexOf(A.presence_ref)<0);k.length>0&&(c[d]=k),v.length>0&&(u[d]=v)}else c[d]=h}),this.syncDiff(i,{joins:c,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,u)=>{var d;const h=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(u),h.length>0){const g=e[c].map(b=>b.presence_ref),y=h.filter(b=>g.indexOf(b.presence_ref)<0);e[c].unshift(...y)}r(c,h,u)}),this.map(a,(c,u)=>{let d=e[c];if(!d)return;const h=u.map(g=>g.presence_ref);d=d.filter(g=>h.indexOf(g.presence_ref)<0),e[c]=d,s(c,d,u),d.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ac;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ac||(Ac={}));var vc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(vc||(vc={}));var ct;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ct||(ct={}));class Ri{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=De.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ci(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new pc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=De.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=De.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new nr(this),this.broadcastEndpointURL=bc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:c}}=this.params;this._onError(h=>e==null?void 0:e(ct.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(ct.CLOSED));const u={},d={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var g;if(this.socket.setAuth(),h===void 0){e==null||e(ct.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,k=[];for(let v=0;v<b;v++){const A=y[v],{filter:{event:T,schema:P,table:$,filter:U}}=A,F=h&&h[v];if(F&&F.event===T&&F.schema===P&&F.table===$&&F.filter===U)k.push(Object.assign(Object.assign({},A),{id:F.id}));else{this.unsubscribe(),e==null||e(ct.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(ct.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(ct.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ct.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,c,u;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=De.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Ci(this,Ze.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ci(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:c,error:u,leave:d,join:h}=Ze;if(r&&[c,u,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,v,A;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((A=(v=b.filter)===null||v===void 0?void 0:v.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===a}).map(b=>b.callback(y,r)):(i=this.bindings[a])===null||i===void 0||i.filter(b=>{var k,v,A,T,P,$;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in b){const U=b.id,F=(k=b.filter)===null||k===void 0?void 0:k.event;return U&&((v=n.ids)===null||v===void 0?void 0:v.includes(U))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const U=(P=(T=b==null?void 0:b.filter)===null||T===void 0?void 0:T.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return U==="*"||U===(($=n==null?void 0:n.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===a}).map(b=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:v,table:A,commit_timestamp:T,type:P,errors:$}=k;y=Object.assign(Object.assign({},{schema:v,table:A,commit_timestamp:T,eventType:P,new:{},old:{},errors:$}),this._getPayloadRecords(k))}b.callback(y,r)})}_isClosed(){return this.state===De.closed}_isJoined(){return this.state===De.joined}_isJoining(){return this.state===De.joining}_isLeaving(){return this.state===De.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ri.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=De.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yc(e.columns,e.old_record)),n}}const Fm=()=>{},Um=typeof WebSocket<"u",Bm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vm{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Om,this.params={},this.timeout=gc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Fm,this.conn=null,this.sendBuffer=[],this.serializer=new Pm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...c)=>Promise.resolve().then(()=>gn).then(({default:u})=>u(...c)):a=fetch,(...c)=>a(...c)},this.endPoint=`${e}/${Ii.websocket}`,this.httpEndpoint=bc(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Um){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new qm(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(()=>KS).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cm}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pn.connecting:return Bt.Connecting;case pn.open:return Bt.Open;case pn.closing:return Bt.Closing;default:return Bt.Closed}}isConnected(){return this.connectionState()===Bt.Open}channel(e,n={config:{}}){const r=new Ri(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Ze.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rm,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Bm],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class qm{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=pn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Pi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ae(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Wm extends Pi{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Mi extends Pi{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Hm=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const Sc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>gn).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},zm=()=>Hm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>gn)).Response:Response}),$i=t=>{if(Array.isArray(t))return t.map(n=>$i(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=$i(r)}),e};var Vt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const Ni=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gm=(t,e,n)=>Vt(void 0,void 0,void 0,function*(){const r=yield zm();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Wm(Ni(s),t.status||500))}).catch(s=>{e(new Mi(Ni(s),s))}):e(new Mi(Ni(t),t))}),Jm=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function rr(t,e,n,r,s,i){return Vt(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(n,Jm(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>Gm(u,c,r))})})}function as(t,e,n,r){return Vt(this,void 0,void 0,function*(){return rr(t,"GET",e,n,r)})}function wt(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return rr(t,"POST",e,r,s,n)})}function Km(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return rr(t,"PUT",e,r,s,n)})}function Zm(t,e,n,r){return Vt(this,void 0,void 0,function*(){return rr(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ec(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return rr(t,"DELETE",e,r,s,n)})}var Me=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const Ym={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xm{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Sc(s)}uploadOrUpdate(e,n,r,s){return Me(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Tc),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),g=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{})),y=yield g.json();return g.ok?{data:{path:d,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Me(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:Tc.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const g=yield this.fetch(c.toString(),{method:"PUT",body:u,headers:h}),y=yield g.json();return g.ok?{data:{path:i,fullPath:y.Key},error:null}:{data:null,error:y}}catch(u){if(Ae(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield wt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),c=a.searchParams.get("token");if(!c)throw new Pi("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}update(e,n,r){return Me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Me(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Me(this,void 0,void 0,function*(){try{return{data:{path:(yield wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Me(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield wt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Me(this,void 0,void 0,function*(){try{const s=yield wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}download(e,n){return Me(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield as(this.fetch,`${this.url}/${s}/${c}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Ae(c))return{data:null,error:c};throw c}})}info(e){return Me(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield as(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:$i(r),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}exists(e){return Me(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Zm(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ae(r)&&r instanceof Mi){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}list(e,n,r){return Me(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ym),n),{prefix:e||""});return{data:yield wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Qm={"X-Client-Info":"storage-js/2.7.1"};var yn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class eg{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Qm),n),this.fetch=Sc(r)}listBuckets(){return yn(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ae(e))return{data:null,error:e};throw e}})}getBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return yn(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return yn(this,void 0,void 0,function*(){try{return{data:yield Km(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}emptyBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}deleteBucket(e){return yn(this,void 0,void 0,function*(){try{return{data:yield Ec(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}}class tg extends eg{constructor(e,n={},r){super(e,n,r)}from(e){return new Xm(this.url,this.headers,e,this.fetch)}}const ng="2.48.1";let sr="";typeof Deno<"u"?sr="deno":typeof document<"u"?sr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sr="react-native":sr="node";const rg={headers:{"X-Client-Info":`supabase-js-${sr}/${ng}`}},sg={schema:"public"},ig={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ag={};var og=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};const cg=t=>{let e;return t?e=t:typeof fetch>"u"?e=ec:e=fetch,(...n)=>e(...n)},ug=()=>typeof Headers>"u"?tc:Headers,lg=(t,e,n)=>{const r=cg(n),s=ug();return(i,a)=>og(void 0,void 0,void 0,function*(){var c;const u=(c=yield e())!==null&&c!==void 0?c:t;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var dg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};function fg(t){return t.replace(/\/$/,"")}function hg(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:a,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign({},d),i),accessToken:()=>dg(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const kc="2.67.3",mg="http://localhost:9999",gg="supabase.auth.token",pg={"X-Client-Info":`gotrue-js/${kc}`},xc=10,Di="X-Supabase-Api-Version",Ic={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function yg(t){return Math.round(Date.now()/1e3)+t}function _g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nt=()=>typeof window<"u"&&typeof document<"u",qt={tested:!1,writable:!1},ir=()=>{if(!nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qt.tested)return qt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qt.tested=!0,qt.writable=!0}catch{qt.tested=!0,qt.writable=!1}return qt.writable};function bg(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Oc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>gn).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},wg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Cc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},os=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},cs=async(t,e)=>{await t.removeItem(e)};function Ag(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,a,c,u,d,h=0;for(t=t.replace("-","+").replace("_","/");h<t.length;)a=e.indexOf(t.charAt(h++)),c=e.indexOf(t.charAt(h++)),u=e.indexOf(t.charAt(h++)),d=e.indexOf(t.charAt(h++)),r=a<<2|c>>4,s=(c&15)<<4|u>>2,i=(u&3)<<6|d,n=n+String.fromCharCode(r),u!=64&&s!=0&&(n=n+String.fromCharCode(s)),d!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class us{constructor(){this.promise=new us.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}us.promiseConstructor=Promise;function Rc(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Ag(r))}async function vg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Sg(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function Eg(t){return("0"+t.toString(16)).substr(-2)}function Tg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Eg).join("")}async function kg(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function xg(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ig(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await kg(t);return xg(n)}async function _n(t,e,n=!1){const r=Tg();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Cc(t,`${e}-code-verifier`,s);const i=await Ig(r);return[i,r===i?"plain":"s256"]}const Og=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cg(t){const e=t.headers.get(Di);if(!e||!e.match(Og))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Li extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function X(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Rg extends Li{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Pg(t){return X(t)&&t.name==="AuthApiError"}class Pc extends Li{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wt extends Li{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class At extends Wt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mg(t){return X(t)&&t.name==="AuthSessionMissingError"}class ji extends Wt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ls extends Wt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ds extends Wt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $g(t){return X(t)&&t.name==="AuthImplicitGrantRedirectError"}class Mc extends Wt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fi extends Wt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ui(t){return X(t)&&t.name==="AuthRetryableFetchError"}class $c extends Wt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var Ng=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ht=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dg=[502,503,504];async function Nc(t){var e;if(!wg(t))throw new Fi(Ht(t),0);if(Dg.includes(t.status))throw new Fi(Ht(t),t.status);let n;try{n=await t.json()}catch(i){throw new Pc(Ht(i),i)}let r;const s=Cg(t);if(s&&s.getTime()>=Ic["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $c(Ht(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new At}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new $c(Ht(n),t.status,n.weak_password.reasons);throw new Rg(Ht(n),t.status||500,r)}const Lg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function te(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Di]||(i[Di]=Ic["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await jg(t,e,n+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function jg(t,e,n,r,s,i){const a=Lg(e,r,s,i);let c;try{c=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new Fi(Ht(u),0)}if(c.ok||await Nc(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await Nc(u)}}function vt(t){var e;let n=null;Vg(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=yg(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Dc(t){const e=vt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function St(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Fg(t){return{data:t,error:null}}function Ug(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=Ng(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:c,user:u},error:null}}function Bg(t){return t}function Vg(t){return t.access_token&&t.refresh_token&&t.expires_in}var qg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Wg{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Oc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:St})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=qg(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ug,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(X(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:St})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,c,u;try{const d={nextPage:null,lastPage:0,total:0},h=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bg});if(h.error)throw h.error;const g=await h.json(),y=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,b=(u=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return b.length>0&&(b.forEach(k=>{const v=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(k.split(";")[1].split("=")[1]);d[`${A}Page`]=v}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(X(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:St})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:St})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:St})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}}const Hg={getItem:t=>ir()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ir()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ir()&&globalThis.localStorage.removeItem(t)}};function Lc(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function zg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bn={debug:!!(globalThis&&ir()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gg extends jc{}async function Jg(t,e,n){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Gg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}zg();const Kg={url:mg,storageKey:gg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ar=30*1e3,Fc=3;async function Uc(t,e,n){return await n()}class or{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=or.nextInstanceID,or.nextInstanceID+=1,this.instanceID>0&&nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Kg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Wg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Oc(s.fetch),this.lock=s.lock||Uc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Jg:this.lock=Uc,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ir()?this.storage=Hg:(this.memoryStorage={},this.storage=Lc(this.memoryStorage)):(this.memoryStorage={},this.storage=Lc(this.memoryStorage)),nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=bg(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),nt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$g(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return X(n)?{error:n}:{error:new Pc("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:vt}),{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:h,password:g,options:y}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await _n(this.storage,this.storageKey)),i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:b,code_challenge_method:k},xform:vt})}else if("phone"in e){const{phone:h,password:g,options:y}=e;i=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:vt})}else throw new ls("You must provide either an email or phone number and a password");const{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:c}=e;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Dc})}else if("phone"in e){const{phone:i,password:a,options:c}=e;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Dc})}else throw new ls("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ji}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(X(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await os(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:vt});if(await cs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ji}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(X(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,c=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vt}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new ji}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(n){if(X(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await _n(this.storage,this.storageKey));const{error:g}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new ls("You must provide either an email or phone number.")}catch(c){if(X(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:vt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await _n(this.storage,this.storageKey)),await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Fg})}catch(i){if(X(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new At;const{error:s}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(X(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await te(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:c}=await te(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new ls("You must provide either an email or phone number and a type")}catch(n){if(X(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:St}):await this._useSession(async n=>{var r,s,i;const{data:a,error:c}=n;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new At}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:St})})}catch(n){if(X(n))return Mg(n)&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new At;const a=s.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await _n(this.storage,this.storageKey));const{data:d,error:h}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:a.access_token,xform:St});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Rc(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new At;const n=Date.now()/1e3;let r=n,s=!0,i=null;const a=Rc(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(X(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:c}=n;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(X(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!nt())throw new ds("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ds(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ds("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mc("No code detected.");const{data:P,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:c,expires_at:u,token_type:d}=e;if(!i||!c||!a||!d)throw new ds("No session defined in URL");const h=Math.round(Date.now()/1e3),g=parseInt(c);let y=h+g;u&&(y=parseInt(u));const b=y-h;b*1e3<=ar&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const k=y-g;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,h);const{data:v,error:A}=await this._getUser(i);if(A)throw A;const T={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:y,refresh_token:a,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(X(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await os(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(Pg(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=_g(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await _n(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(X(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,c,u,d,h;const{data:g,error:y}=i;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",b,{headers:this.headers,jwt:(h=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return nt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(X(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Sg(async s=>(s>0&&await vg(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Ui(i)&&Date.now()+a-r<ar})}catch(r){if(this._debug(n,"error",r),X(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),nt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await os(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+xc;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${xc}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Ui(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new At;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new us;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new At;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),X(i)){const a={session:null,error:i};return Ui(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Cc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await cs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ar);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ar);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ar}ms, refresh threshold is ${Fc} ticks`),s<=Fc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await _n(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:d}=await te(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:c}=await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})})}catch(n){if(X(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(X(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let c=null;a.aal&&(c=a.aal);let u=c;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=a.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}}or.nextInstanceID=0;const Zg=or;class Yg extends Zg{constructor(e){super(e)}}var Xg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(h){try{d(r.next(h))}catch(g){a(g)}}function u(h){try{d(r.throw(h))}catch(g){a(g)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})};class Qg{constructor(e,n,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=fg(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const u=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:sg,realtime:ag,auth:Object.assign(Object.assign({},ig),{storageKey:u}),global:rg},h=hg(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=lg(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Im(`${c}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new pm(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tg(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Xg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:c,debug:u},d,h){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yg({url:this.authUrl,headers:Object.assign(Object.assign({},g),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Vm(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ep=(t,e,n)=>new Qg(t,e,n),Bc={url:"https://cznirnumwtebadwsruvj.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6bmlybnVtd3RlYmFkd3NydXZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzMzODU4NzIsImV4cCI6MjA0ODk2MTg3Mn0.AK3QGh4wHWyzT1r5FShMkvobIMUEL0IHztCDcedkONo"},Ce=ep(Bc.url,Bc.anonKey);async function Vc(){var t;try{if(!(Ce!=null&&Ce.auth))return console.warn("Supabase not initialized during getSession call"),null;const e=await Ce.auth.getUser();if(e.error||!((t=e.data)!=null&&t.user))return null;const{data:n,error:r}=await Ce.auth.getSession();return r||!n.session?null:n.session}catch(e){return console.error("Error in getSession:",e),null}}const qc={getSession:()=>lm()?Vc():we.sendMessage("getSession",void 0),getRecordingStatus:()=>we.sendMessage("getRecordingStatus",void 0),setRecordingStatus:(t,e)=>we.sendMessage("setRecordingStatus",{status:t,pathLog:e}),setVideoId:t=>we.sendMessage("saveVideoId",t)};async function Wc(t,e,n,r){const s=await hn.getValue(),i=Object.keys(s).find(a=>s[a].endpoint===t&&s[a].videoId===r);if(i)s[i]={endpoint:t,params:e,timestamp:Date.now(),videoId:r,error:n};else{const a=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;s[a]={endpoint:t,params:e,timestamp:Date.now(),videoId:r,error:n}}await hn.setValue(s)}async function tp(t){const n=(await hn.getValue())[t];if(!n)return!1;try{const r=await qc.getSession();n.params.authToken=r==null?void 0:r.access_token}catch{return!1}try{n.endpoint==="transcribe"?await xr.transcribe(n.params):n.endpoint==="speakers-stats"&&await xr.saveSpeakersStats(n.params);const r=await hn.getValue();return delete r[t],await hn.setValue(r),!0}catch(r){return console.error("Failed to retry API call:",r),!1}}async function Hc(t,e){const n=await hn.getValue(),r=Object.keys(n);if(r.length===0)return!0;let s=!0;for(const i of r)n[i],await tp(i)||(s=!1);return s}async function np(){const t=await Qr.getValue(),e=await es.getValue(),n=new Map;return Object.keys(t).forEach(r=>{if(!n.has(r))n.set(r,{videoId:r,hasFailedVideo:!0,hasFailedAudio:!1});else{const s=n.get(r);s.hasFailedVideo=!0,n.set(r,s)}}),Object.keys(e).forEach(r=>{if(!n.has(r))n.set(r,{videoId:r,hasFailedVideo:!1,hasFailedAudio:!0});else{const s=n.get(r);s.hasFailedAudio=!0,n.set(r,s)}}),Array.from(n.values())}async function zc(t,e){const n=e==="video"?Qr:es,r=await n.getValue();delete r[t],await n.setValue(r)}const K=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ue=globalThis,Et=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,zt="9.12.0";function Gt(){return fs(ue),ue}function fs(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||zt,e[zt]=e[zt]||{}}function hs(t,e,n=ue){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[zt]=r[zt]||{};return s[t]||(s[t]=e())}const rp="Sentry Logger ",Bi=["debug","info","warn","error","log","assert","trace"],ms={};function wn(t){if(!("console"in ue))return t();const e=ue.console,n={},r=Object.keys(ms);r.forEach(s=>{const i=ms[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function sp(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Et?Bi.forEach(n=>{e[n]=(...r)=>{t&&wn(()=>{ue.console[n](`${rp}[${n}]:`,...r)})}}):Bi.forEach(n=>{e[n]=()=>{}}),e}const V=hs("logger",sp),Gc=50,Jt="?",Jc=/\(error: (.*)\)/,Kc=/captureMessage|captureException/;function Zc(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],a=n.split(`
`);for(let c=r;c<a.length;c++){const u=a[c];if(u.length>1024)continue;const d=Jc.test(u)?u.replace(Jc,"$1"):u;if(!d.match(/\S*Error: /)){for(const h of e){const g=h(d);if(g){i.push(g);break}}if(i.length>=Gc+s)break}}return ap(i.slice(s))}}function ip(t){return Array.isArray(t)?Zc(...t):t}function ap(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(gs(e).function||"")&&e.pop(),e.reverse(),Kc.test(gs(e).function||"")&&(e.pop(),Kc.test(gs(e).function||"")&&e.pop()),e.slice(0,Gc).map(n=>({...n,filename:n.filename||gs(e).filename,function:n.function||Jt}))}function gs(t){return t[t.length-1]||{}}const Vi="<anonymous>";function ut(t){try{return!t||typeof t!="function"?Vi:t.name||Vi}catch{return Vi}}function Yc(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const ps={},Xc={};function Tt(t,e){ps[t]=ps[t]||[],ps[t].push(e)}function kt(t,e){if(!Xc[t]){Xc[t]=!0;try{e()}catch(n){Et&&V.error(`Error while instrumenting ${t}`,n)}}}function Ve(t,e){const n=t&&ps[t];if(n)for(const r of n)try{r(e)}catch(s){Et&&V.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ut(r)}
Error:`,s)}}let qi=null;function Qc(t){const e="error";Tt(e,t),kt(e,op)}function op(){qi=ue.onerror,ue.onerror=function(t,e,n,r,s){return Ve("error",{column:r,error:s,line:n,msg:t,url:e}),qi?qi.apply(this,arguments):!1},ue.onerror.__SENTRY_INSTRUMENTED__=!0}let Wi=null;function eu(t){const e="unhandledrejection";Tt(e,t),kt(e,cp)}function cp(){Wi=ue.onunhandledrejection,ue.onunhandledrejection=function(t){return Ve("unhandledrejection",t),Wi?Wi.apply(this,arguments):!0},ue.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const tu=1e3;function cr(){return Date.now()/tu}function up(){const{performance:t}=ue;if(!(t!=null&&t.now))return cr;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/tu}const Re=up();let Hi;function lp(){var h;const{performance:t}=ue;if(!(t!=null&&t.now))return[void 0,"none"];const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,a=(h=t.timing)==null?void 0:h.navigationStart,u=typeof a=="number"?Math.abs(a+n-r):e,d=u<e;return i||d?s<=u?[t.timeOrigin,"timeOrigin"]:[a,"navigationStart"]:[r,"dateNow"]}function qe(){return Hi||(Hi=lp()),Hi[0]}const nu=Object.prototype.toString;function zi(t){switch(nu.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return dt(t,Error)}}function An(t,e){return nu.call(t)===`[object ${e}]`}function ru(t){return An(t,"ErrorEvent")}function su(t){return An(t,"DOMError")}function dp(t){return An(t,"DOMException")}function lt(t){return An(t,"String")}function Gi(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Ji(t){return t===null||Gi(t)||typeof t!="object"&&typeof t!="function"}function ur(t){return An(t,"Object")}function ys(t){return typeof Event<"u"&&dt(t,Event)}function fp(t){return typeof Element<"u"&&dt(t,Element)}function hp(t){return An(t,"RegExp")}function _s(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function mp(t){return ur(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function dt(t,e){try{return t instanceof e}catch{return!1}}function iu(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function au(t){return typeof Request<"u"&&dt(t,Request)}const Ki=ue,gp=80;function Kt(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,a=0;const c=" > ",u=c.length;let d;const h=Array.isArray(e)?e:e.keyAttrs,g=!Array.isArray(e)&&e.maxStringLength||gp;for(;n&&i++<r&&(d=pp(n,h),!(d==="html"||i>1&&a+s.length*u+d.length>=g));)s.push(d),a+=d.length,n=n.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function pp(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(Ki.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(s!=null&&s.length)s.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&lt(a)){const c=a.split(/\s+/);for(const u of c)r.push(`.${u}`)}}const i=["aria-label","type","name","title","alt"];for(const a of i){const c=n.getAttribute(a);c&&r.push(`[${a}="${c}"]`)}return r.join("")}function lr(){try{return Ki.document.location.href}catch{return""}}function ou(t){if(!Ki.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function bs(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function cu(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{iu(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function yp(t,e,n=!1){return lt(t)?hp(e)?e.test(t):lt(e)?n?t===e:t.includes(e):!1:!1}function Zt(t,e=[],n=!1){return e.some(r=>yp(t,r,n))}function Le(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&uu(s,r);try{t[e]=s}catch{Et&&V.log(`Failed to replace method "${e}" in object`,t)}}function je(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Et&&V.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function uu(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,je(t,"__sentry_original__",e)}catch{}}function Zi(t){return t.__sentry_original__}function lu(t){if(zi(t))return{message:t.message,name:t.name,stack:t.stack,...fu(t)};if(ys(t)){const e={type:t.type,target:du(t.target),currentTarget:du(t.currentTarget),...fu(t)};return typeof CustomEvent<"u"&&dt(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function du(t){try{return fp(t)?Kt(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function fu(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function _p(t,e=40){const n=Object.keys(lu(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return bs(r,e);for(let s=n.length;s>0;s--){const i=n.slice(0,s).join(", ");if(!(i.length>e))return s===n.length?i:bs(i,e)}return""}function bp(){const t=ue;return t.crypto||t.msCrypto}function We(t=bp()){let e=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}function hu(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function Yt(t){const{message:e,event_id:n}=t;if(e)return e;const r=hu(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Yi(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function vn(t,e){const n=hu(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};n.mechanism.data=i}}function mu(t){if(wp(t))return!0;try{je(t,"__sentry_captured__",!0)}catch{}return!1}function wp(t){try{return t.__sentry_captured__}catch{}}var ft;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(ft||(ft={}));function Xt(t){return new xt(e=>{e(t)})}function ws(t){return new xt((e,n)=>{n(t)})}class xt{constructor(e){this._state=ft.PENDING,this._handlers=[],this._runExecutor(e)}then(e,n){return new xt((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(a){s(a)}},i=>{if(!n)s(i);else try{r(n(i))}catch(a){s(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new xt((n,r)=>{let s,i;return this.then(a=>{i=!1,s=a,e&&e()},a=>{i=!0,s=a,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ft.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===ft.RESOLVED&&n[1](this._value),this._state===ft.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(i,a)=>{if(this._state===ft.PENDING){if(_s(a)){a.then(r,s);return}this._state=i,this._value=a,this._executeHandlers()}},r=i=>{n(ft.RESOLVED,i)},s=i=>{n(ft.REJECTED,i)};try{e(r,s)}catch(i){s(i)}}}function Ap(t){const e=Re(),n={sid:We(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Sp(n)};return Sn(n,t),n}function Sn(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Re(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:We()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function vp(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Sn(t,n)}function Sp(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function It(){return We()}function dr(){return We().substring(16)}function fr(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=fr(r[s],e[s],n-1));return r}const Xi="_sentrySpan";function hr(t,e){e?je(t,Xi,e):delete t[Xi]}function As(t){return t[Xi]}const Ep=100;class rt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:It(),sampleRand:Math.random()}}clone(){const e=new rt;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,hr(e,As(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Sn(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof rt?n.getScopeData():ur(n)?e:void 0,{tags:s,extra:i,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:h}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),h&&(this._propagationContext=h),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,hr(this,void 0),this._attachments=[],this.setPropagationContext({traceId:It(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var i;const r=typeof n=="number"?n:Ep;if(r<=0)return this;const s={timestamp:cr(),...e,message:e.message?bs(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:As(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=fr(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||We();if(!this._client)return V.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=(r==null?void 0:r.event_id)||We();if(!this._client)return V.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||We();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(V.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Tp(){return hs("defaultCurrentScope",()=>new rt)}function kp(){return hs("defaultIsolationScope",()=>new rt)}class xp{constructor(e,n){let r;e?r=e:r=new rt;let s;n?s=n:s=new rt,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return _s(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function En(){const t=Gt(),e=fs(t);return e.stack=e.stack||new xp(Tp(),kp())}function Ip(t){return En().withScope(t)}function Op(t,e){const n=En();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function gu(t){return En().withScope(()=>t(En().getIsolationScope()))}function Cp(){return{withIsolationScope:gu,withScope:Ip,withSetScope:Op,withSetIsolationScope:(t,e)=>gu(e),getCurrentScope:()=>En().getScope(),getIsolationScope:()=>En().getIsolationScope()}}function Tn(t){const e=fs(t);return e.acs?e.acs:Cp()}function ge(){const t=Gt();return Tn(t).getCurrentScope()}function ht(){const t=Gt();return Tn(t).getIsolationScope()}function Rp(){return hs("globalScope",()=>new rt)}function Qi(...t){const e=Gt(),n=Tn(e);if(t.length===2){const[r,s]=t;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(t[0])}function ae(){return ge().getClient()}function Pp(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||dr()};return r&&(i.parent_span_id=r),i}const mt="sentry.source",pu="sentry.sample_rate",Qt="sentry.op",ve="sentry.origin",ea="sentry.idle_span_finish_reason",vs="sentry.measurement_unit",Ss="sentry.measurement_value",yu="sentry.custom_span_name",ta="sentry.profile_id",mr="sentry.exclusive_time",Mp="sentry.link.type",$p=0,_u=1,Se=2;function Np(t){if(t<400&&t>=100)return{code:_u};if(t>=400&&t<500)switch(t){case 401:return{code:Se,message:"unauthenticated"};case 403:return{code:Se,message:"permission_denied"};case 404:return{code:Se,message:"not_found"};case 409:return{code:Se,message:"already_exists"};case 413:return{code:Se,message:"failed_precondition"};case 429:return{code:Se,message:"resource_exhausted"};case 499:return{code:Se,message:"cancelled"};default:return{code:Se,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Se,message:"unimplemented"};case 503:return{code:Se,message:"unavailable"};case 504:return{code:Se,message:"deadline_exceeded"};default:return{code:Se,message:"internal_error"}}return{code:Se,message:"unknown_error"}}function bu(t,e){t.setAttribute("http.response.status_code",e);const n=Np(e);n.message!=="unknown_error"&&t.setStatus(n)}const wu="_sentryScope",Au="_sentryIsolationScope";function Dp(t,e,n){t&&(je(t,Au,n),je(t,wu,e))}function Es(t){return{scope:t[wu],isolationScope:t[Au]}}function gr(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const na="sentry-",Lp=/^sentry-/,jp=8192;function vu(t){const e=Up(t);if(!e)return;const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(Lp)){const a=s.slice(na.length);r[a]=i}return r},{});if(Object.keys(n).length>0)return n}function Fp(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${na}${r}`]=s),n),{});return Bp(e)}function Up(t){if(!(!t||!lt(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Su(n);return Object.entries(r).forEach(([s,i])=>{e[s]=i}),e},{}):Su(t)}function Su(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function Bp(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,a=s===0?i:`${e},${i}`;return a.length>jp?(Et&&V.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):a},"")}const Eu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Vp(t){if(!t)return;const e=t.match(Eu);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function qp(t,e){const n=Vp(t),r=vu(e);if(!(n!=null&&n.traceId))return{traceId:It(),sampleRand:Math.random()};const s=Wp(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:a,parentSampled:c}=n;return{traceId:i,parentSpanId:a,sampled:c,dsc:r||{},sampleRand:s}}function Tu(t=It(),e=dr(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function Wp(t,e){const n=gr(e==null?void 0:e.sample_rand);if(n!==void 0)return n;const r=gr(e==null?void 0:e.sample_rate);return r&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}const ku=0,ra=1;let xu=!1;function Hp(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:a,origin:c,links:u}=le(t);return{parent_span_id:i,span_id:e,trace_id:n,data:r,op:s,status:a,origin:c,links:u}}function zp(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:le(t).parent_span_id,i=Es(t).scope,a=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||dr():e;return{parent_span_id:s,span_id:a,trace_id:n}}function Gp(t){const{traceId:e,spanId:n}=t.spanContext(),r=tn(t);return Tu(e,n,r)}function Iu(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:e,trace_id:n,sampled:r===ra,attributes:i,...s}))}function en(t){return typeof t=="number"?Ou(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Ou(t.getTime()):Re()}function Ou(t){return t>9999999999?t/1e3:t}function le(t){if(Kp(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(Jp(t)){const{attributes:r,startTime:s,name:i,endTime:a,parentSpanId:c,status:u,links:d}=t;return{span_id:e,trace_id:n,data:r,description:i,parent_span_id:c,start_timestamp:en(s),timestamp:en(a)||void 0,status:Cu(u),op:r[Qt],origin:r[ve],links:Iu(d)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Jp(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Kp(t){return typeof t.getSpanJSON=="function"}function tn(t){const{traceFlags:e}=t.spanContext();return e===ra}function Cu(t){if(!(!t||t.code===$p))return t.code===_u?"ok":t.message||"unknown_error"}const nn="_sentryChildSpans",sa="_sentryRootSpan";function Ru(t,e){const n=t[sa]||t;je(e,sa,n),t[nn]?t[nn].add(e):je(t,nn,new Set([e]))}function Zp(t,e){t[nn]&&t[nn].delete(e)}function Ts(t){const e=new Set;function n(r){if(!e.has(r)&&tn(r)){e.add(r);const s=r[nn]?Array.from(r[nn]):[];for(const i of s)n(i)}}return n(t),Array.from(e)}function Pe(t){return t[sa]||t}function Fe(){const t=Gt(),e=Tn(t);return e.getActiveSpan?e.getActiveSpan():As(ge())}function ia(){xu||(wn(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),xu=!0)}let Pu=!1;function Yp(){Pu||(Pu=!0,Qc(aa),eu(aa))}function aa(){const t=Fe(),e=t&&Pe(t);if(e){const n="internal_error";K&&V.log(`[Tracing] Root span: ${n} -> Global error occurred`),e.setStatus({code:Se,message:n})}}aa.tag="sentry_tracingErrorCallback";function Ot(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=ae())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const oa="production",Mu="_frozenDsc";function ks(t,e){je(t,Mu,e)}function $u(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||oa,release:n.release,public_key:r,trace_id:t};return e.emit("createDsc",s),s}function Nu(t,e){const n=e.getPropagationContext();return n.dsc||$u(n.traceId,t)}function Ct(t){var k;const e=ae();if(!e)return{};const n=Pe(t),r=le(n),s=r.data,i=n.spanContext().traceState,a=(i==null?void 0:i.get("sentry.sample_rate"))??s[pu];function c(v){return(typeof a=="number"||typeof a=="string")&&(v.sample_rate=`${a}`),v}const u=n[Mu];if(u)return c(u);const d=i==null?void 0:i.get("sentry.dsc"),h=d&&vu(d);if(h)return c(h);const g=$u(t.spanContext().traceId,e),y=s[mt],b=r.description;return y!=="url"&&b&&(g.transaction=b),Ot()&&(g.sampled=String(tn(n)),g.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((k=Es(n).scope)==null?void 0:k.getPropagationContext().sampleRand.toString())),c(g),e.emit("createDsc",g,n),g}class rn{constructor(e={}){this._traceId=e.traceId||It(),this._spanId=e.spanId||dr()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:ku}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function Xp(t){if(!K)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=le(t),{spanId:s}=t.spanContext(),i=tn(t),a=Pe(t),c=a===t,u=`[Tracing] Starting ${i?"sampled":"unsampled"} ${c?"root ":""}span`,d=[`op: ${n}`,`name: ${e}`,`ID: ${s}`];if(r&&d.push(`parent ID: ${r}`),!c){const{op:h,description:g}=le(a);d.push(`root ID: ${a.spanContext().spanId}`),h&&d.push(`root op: ${h}`),g&&d.push(`root description: ${g}`)}V.log(`${u}
  ${d.join(`
  `)}`)}function Qp(t){if(!K)return;const{description:e="< unknown name >",op:n="< unknown op >"}=le(t),{spanId:r}=t.spanContext(),i=Pe(t)===t,a=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${e}" with ID ${r}`;V.log(a)}function ey(t,e,n){if(!Ot(t))return[!1];let r,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:c=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):c}),r=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,r=!0);const i=gr(s);if(i===void 0)return K&&V.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return K&&V.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const a=n<i;return a||K&&V.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[a,i,r]}const ty=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ny(t){return t==="http"||t==="https"}function pr(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:a,protocol:c,publicKey:u}=t;return`${c}://${u}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${a}`}function ry(t){const e=ty.exec(t);if(!e){wn(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i="",a="",c=""]=e.slice(1);let u="",d=c;const h=d.split("/");if(h.length>1&&(u=h.slice(0,-1).join("/"),d=h.pop()),d){const g=d.match(/^\d+/);g&&(d=g[0])}return Du({host:i,pass:s,path:u,projectId:d,port:a,protocol:n,publicKey:r})}function Du(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function sy(t){if(!Et)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(V.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?ny(r)?e&&isNaN(parseInt(e,10))?(V.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(V.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(V.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function iy(t){const e=typeof t=="string"?ry(t):Du(t);if(!(!e||!sy(e)))return e}function gt(t,e=100,n=1/0){try{return ca("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Lu(t,e=3,n=102400){const r=gt(t,e);return uy(r)>n?Lu(t,e-1,n):r}function ca(t,e,n=1/0,r=1/0,s=ly()){const[i,a]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const c=ay(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(u===0)return c.replace("object ","");if(i(e))return"[Circular ~]";const d=e;if(d&&typeof d.toJSON=="function")try{const b=d.toJSON();return ca("",b,u-1,r,s)}catch{}const h=Array.isArray(e)?[]:{};let g=0;const y=lu(e);for(const b in y){if(!Object.prototype.hasOwnProperty.call(y,b))continue;if(g>=r){h[b]="[MaxProperties ~]";break}const k=y[b];h[b]=ca(b,k,u-1,r,s),g++}return a(e),h}function ay(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(iu(e))return"[VueViewModel]";if(mp(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${ut(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=oy(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function oy(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function cy(t){return~-encodeURI(t).split(/%..|./).length}function uy(t){return cy(JSON.stringify(t))}function ly(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function kn(t,e=[]){return[t,e]}function dy(t,e){const[n,r]=t;return[n,[...r,e]]}function ju(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function ua(t){const e=fs(ue);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function fy(t){const[e,n]=t;let r=JSON.stringify(e);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[ua(r),i]:r.push(typeof i=="string"?ua(i):i)}for(const i of n){const[a,c]=i;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(gt(c))}s(u)}}return typeof r=="string"?r:hy(r)}function hy(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function my(t){return[{type:"span"},t]}function gy(t){const e=typeof t.data=="string"?ua(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const py={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",otel_log:"log_item"};function Fu(t){return py[t]}function Uu(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function yy(t,e,n,r){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:pr(r)},...s&&{trace:s}}}function _y(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function by(t,e,n,r){const s=Uu(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:pr(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return kn(i,[a])}function wy(t,e,n,r){const s=Uu(n),i=t.type&&t.type!=="replay_event"?t.type:"event";_y(t,n==null?void 0:n.sdk);const a=yy(t,s,r,e);return delete t.sdkProcessingMetadata,kn(a,[[{type:i},t]])}function Ay(t,e){function n(h){return!!h.trace_id&&!!h.public_key}const r=Ct(t[0]),s=e==null?void 0:e.getDsn(),i=e==null?void 0:e.getOptions().tunnel,a={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:pr(s)}},c=e==null?void 0:e.getOptions().beforeSendSpan,u=c?h=>{const g=le(h),y=c(g);return y||(ia(),g)}:le,d=[];for(const h of t){const g=u(h);g&&d.push(my(g))}return kn(a,d)}function vy(t,e,n,r=Fe()){const s=r&&Pe(r);s&&(K&&V.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),s.addEvent(t,{[Ss]:e,[vs]:n}))}function Bu(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},s=r[vs],i=r[Ss];typeof s=="string"&&typeof i=="number"&&(e[n.name]={value:i,unit:s})}),e}const Vu=1e3;class la{constructor(e={}){this._traceId=e.traceId||It(),this._spanId=e.spanId||dr(),this._startTime=e.startTimestamp||Re(),this._links=e.links,this._attributes={},this.setAttributes({[ve]:"manual",[Qt]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?ra:ku}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=en(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(mt,"custom"),this}end(e){this._endTime||(this._endTime=en(e),Qp(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Qt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Cu(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ve],profile_id:this._attributes[ta],exclusive_time:this._attributes[mr],measurements:Bu(this._events),is_segment:this._isStandaloneSpan&&Pe(this)===this||void 0,segment_id:this._isStandaloneSpan?Pe(this).spanContext().spanId:void 0,links:Iu(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){K&&V.log("[Tracing] Adding an event to span:",e);const s=qu(n)?n:r||Re(),i=qu(n)?{}:n||{},a={name:e,time:en(s),attributes:i};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=ae();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Pe(this)))return;if(this._isStandaloneSpan){this._sampled?Ey(Ay([this],e)):(K&&V.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Es(this).scope||ge()).captureEvent(r)}_convertSpanToTransaction(){if(!Wu(le(this)))return;this._name||(K&&V.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=Es(this);if(this._sampled!==!0)return;const s=Ts(this).filter(d=>d!==this&&!Sy(d)).map(d=>le(d)).filter(Wu),i=this._attributes[mt];delete this._attributes[yu],s.forEach(d=>{delete d.data[yu]});const a={contexts:{trace:Hp(this)},spans:s.length>Vu?s.sort((d,h)=>d.start_timestamp-h.start_timestamp).slice(0,Vu):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:Ct(this)},...i&&{transaction_info:{source:i}}},c=Bu(this._events);return c&&Object.keys(c).length&&(K&&V.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function qu(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Wu(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Sy(t){return t instanceof la&&t.isStandaloneSpan()}function Ey(t){const e=ae();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}const Hu="__SENTRY_SUPPRESS_TRACING__";function yr(t){const e=Gu();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=ky(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?a=>Qi(t.scope,a):s!==void 0?a=>zu(s,a):a=>a())(()=>{const a=ge(),c=Iy(a);return t.onlyIfParent&&!c?new rn:Ty({parentSpan:c,spanArguments:n,forceTransaction:r,scope:a})})}function zu(t,e){const n=Gu();return n.withActiveSpan?n.withActiveSpan(t,e):Qi(r=>(hr(r,t||void 0),e(r)))}function Ty({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!Ot()){const a=new rn;if(n||!t){const c={sampled:"false",sample_rate:"0",transaction:e.name,...Ct(a)};ks(a,c)}return a}const s=ht();let i;if(t&&!n)i=xy(t,r,e),Ru(t,i);else if(t){const a=Ct(t),{traceId:c,spanId:u}=t.spanContext(),d=tn(t);i=Ju({traceId:c,parentSpanId:u,...e},r,d),ks(i,a)}else{const{traceId:a,dsc:c,parentSpanId:u,sampled:d}={...s.getPropagationContext(),...r.getPropagationContext()};i=Ju({traceId:a,parentSpanId:u,...e},r,d),c&&ks(i,c)}return Xp(i),Dp(i,r,s),i}function ky(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=en(t.startTime),delete r.startTime,r}return n}function Gu(){const t=Gt();return Tn(t)}function Ju(t,e,n){var y;const r=ae(),s=(r==null?void 0:r.getOptions())||{},{name:i="",attributes:a}=t,c=e.getPropagationContext(),[u,d,h]=e.getScopeData().sdkProcessingMetadata[Hu]?[!1]:ey(s,{name:i,parentSampled:n,attributes:a,parentSampleRate:gr((y=c.dsc)==null?void 0:y.sample_rate)},c.sampleRand),g=new la({...t,attributes:{[mt]:"custom",[pu]:d!==void 0&&h?d:void 0,...t.attributes},sampled:u});return!u&&r&&(K&&V.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",g),g}function xy(t,e,n){const{spanId:r,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[Hu]?!1:tn(t),a=i?new la({...n,parentSpanId:r,traceId:s,sampled:i}):new rn({traceId:s});Ru(t,a);const c=ae();return c&&(c.emit("spanStart",a),n.endTimestamp&&c.emit("spanEnd",a)),a}function Iy(t){const e=As(t);if(!e)return;const n=ae();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Pe(e):e}const xs={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Oy="heartbeatFailed",Cy="idleTimeout",Ry="finalTimeout",Py="externalFinish";function Ku(t,e={}){const n=new Map;let r=!1,s,i=Py,a=!e.disableAutoFinish;const c=[],{idleTimeout:u=xs.idleTimeout,finalTimeout:d=xs.finalTimeout,childSpanTimeout:h=xs.childSpanTimeout,beforeSpanEnd:g}=e,y=ae();if(!y||!Ot()){const R=new rn,N={sample_rate:"0",sampled:"false",...Ct(R)};return ks(R,N),R}const b=ge(),k=Fe(),v=My(t);v.end=new Proxy(v.end,{apply(R,N,_){if(g&&g(v),N instanceof rn)return;const[S,...I]=_,C=S||Re(),D=en(C),L=Ts(v).filter(H=>H!==v);if(!L.length)return F(D),Reflect.apply(R,N,[D,...I]);const q=L.map(H=>le(H).timestamp).filter(H=>!!H),O=q.length?Math.max(...q):void 0,W=le(v).start_timestamp,B=Math.min(W?W+d/1e3:1/0,Math.max(W||-1/0,Math.min(D,O||1/0)));return F(B),Reflect.apply(R,N,[B,...I])}});function A(){s&&(clearTimeout(s),s=void 0)}function T(R){A(),s=setTimeout(()=>{!r&&n.size===0&&a&&(i=Cy,v.end(R))},u)}function P(R){s=setTimeout(()=>{!r&&a&&(i=Oy,v.end(R))},h)}function $(R){A(),n.set(R,!0);const N=Re();P(N+h/1e3)}function U(R){if(n.has(R)&&n.delete(R),n.size===0){const N=Re();T(N+u/1e3)}}function F(R){r=!0,n.clear(),c.forEach(D=>D()),hr(b,k);const N=le(v),{start_timestamp:_}=N;if(!_)return;N.data[ea]||v.setAttribute(ea,i),V.log(`[Tracing] Idle span "${N.op}" finished`);const I=Ts(v).filter(D=>D!==v);let C=0;I.forEach(D=>{D.isRecording()&&(D.setStatus({code:Se,message:"cancelled"}),D.end(R),K&&V.log("[Tracing] Cancelling span since span ended early",JSON.stringify(D,void 0,2)));const L=le(D),{timestamp:q=0,start_timestamp:O=0}=L,W=O<=R,B=(d+u)/1e3,H=q-O<=B;if(K){const oe=JSON.stringify(D,void 0,2);W?H||V.log("[Tracing] Discarding span since it finished after idle span final timeout",oe):V.log("[Tracing] Discarding span since it happened after idle span was finished",oe)}(!H||!W)&&(Zp(v,D),C++)}),C>0&&v.setAttribute("sentry.idle_span_discarded_spans",C)}return c.push(y.on("spanStart",R=>{if(r||R===v||le(R).timestamp)return;Ts(v).includes(R)&&$(R.spanContext().spanId)})),c.push(y.on("spanEnd",R=>{r||U(R.spanContext().spanId)})),c.push(y.on("idleSpanEnableAutoFinish",R=>{R===v&&(a=!0,T(),n.size&&P())})),e.disableAutoFinish||T(),setTimeout(()=>{r||(v.setStatus({code:Se,message:"deadline_exceeded"}),i=Ry,v.end())},d),v}function My(t){const e=yr(t);return hr(ge(),e),K&&V.log("[Tracing] Started span is an idle span"),e}function da(t,e,n,r=0){return new xt((s,i)=>{const a=t[r];if(e===null||typeof a!="function")s(e);else{const c=a({...e},n);K&&a.id&&c===null&&V.log(`Event processor "${a.id}" dropped event`),_s(c)?c.then(u=>da(t,u,n,r+1).then(s)).then(null,i):da(t,c,n,r+1).then(s).then(null,i)}})}let Is,Zu,Os;function $y(t){const e=ue._sentryDebugIds;if(!e)return{};const n=Object.keys(e);return Os&&n.length===Zu||(Zu=n.length,Os=n.reduce((r,s)=>{Is||(Is={});const i=Is[s];if(i)r[i[0]]=i[1];else{const a=t(s);for(let c=a.length-1;c>=0;c--){const u=a[c],d=u==null?void 0:u.filename,h=e[s];if(d&&h){r[d]=h,Is[s]=[d,h];break}}}return r},{})),Os}function Ny(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;Dy(t,e),r&&Fy(t,r),Uy(t,n),Ly(t,s),jy(t,i)}function Yu(t,e){const{extra:n,tags:r,user:s,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:h,attachments:g,propagationContext:y,transactionName:b,span:k}=e;Cs(t,"extra",n),Cs(t,"tags",r),Cs(t,"user",s),Cs(t,"contexts",i),t.sdkProcessingMetadata=fr(t.sdkProcessingMetadata,c,2),a&&(t.level=a),b&&(t.transactionName=b),k&&(t.span=k),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),d.length&&(t.fingerprint=[...t.fingerprint,...d]),h.length&&(t.eventProcessors=[...t.eventProcessors,...h]),g.length&&(t.attachments=[...t.attachments,...g]),t.propagationContext={...t.propagationContext,...y}}function Cs(t,e,n){t[e]=fr(t[e],n,1)}function Dy(t,e){const{extra:n,tags:r,user:s,contexts:i,level:a,transactionName:c}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),a&&(t.level=a),c&&t.type!=="transaction"&&(t.transaction=c)}function Ly(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function jy(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Fy(t,e){t.contexts={trace:zp(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Ct(e),...t.sdkProcessingMetadata};const n=Pe(e),r=le(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function Uy(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function By(t,e,n,r,s,i){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=t,u={...e,event_id:e.event_id||n.event_id||We(),timestamp:e.timestamp||cr()},d=n.integrations||t.integrations.map(A=>A.name);Vy(u,t),Hy(u,d),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&qy(u,t.stackParser);const h=Gy(r,n.captureContext);n.mechanism&&vn(u,n.mechanism);const g=s?s.getEventProcessors():[],y=Rp().getScopeData();if(i){const A=i.getScopeData();Yu(y,A)}if(h){const A=h.getScopeData();Yu(y,A)}const b=[...n.attachments||[],...y.attachments];b.length&&(n.attachments=b),Ny(u,y);const k=[...g,...y.eventProcessors];return da(k,u,n).then(A=>(A&&Wy(A),typeof a=="number"&&a>0?zy(A,a,c):A))}function Vy(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;t.environment=t.environment||n||oa,!t.release&&r&&(t.release=r),!t.dist&&s&&(t.dist=s);const a=t.request;a!=null&&a.url&&(a.url=bs(a.url,i))}function qy(t,e){var r,s;const n=$y(e);(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var a,c;(c=(a=i.stacktrace)==null?void 0:a.frames)==null||c.forEach(u=>{u.filename&&(u.debug_id=n[u.filename])})})}function Wy(t){var r,s;const e={};if((s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var a,c;(c=(a=i.stacktrace)==null?void 0:a.frames)==null||c.forEach(u=>{u.debug_id&&(u.abs_path?e[u.abs_path]=u.debug_id:u.filename&&(e[u.filename]=u.debug_id),delete u.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([i,a])=>{n.push({type:"sourcemap",code_file:i,debug_id:a})})}function Hy(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function zy(t,e,n){var s,i;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(a=>({...a,...a.data&&{data:gt(a.data,e,n)}}))},...t.user&&{user:gt(t.user,e,n)},...t.contexts&&{contexts:gt(t.contexts,e,n)},...t.extra&&{extra:gt(t.extra,e,n)}};return(s=t.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=gt(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(a=>({...a,...a.data&&{data:gt(a.data,e,n)}}))),(i=t.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=gt(t.contexts.flags,3,n)),r}function Gy(t,e){if(!e)return t;const n=t?t.clone():new rt;return n.update(e),n}function Jy(t){if(t)return Ky(t)?{captureContext:t}:Yy(t)?{captureContext:t}:t}function Ky(t){return t instanceof rt||typeof t=="function"}const Zy=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Yy(t){return Object.keys(t).some(e=>Zy.includes(e))}function Xu(t,e){return ge().captureException(t,Jy(e))}function Qu(t,e){return ge().captureEvent(t,e)}function sn(t,e){ht().setTag(t,e)}function el(t){ht().setUser(t)}async function Xy(t){const e=ae();return e?e.flush(t):(K&&V.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}function Qy(){const t=ae();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function tl(t){const e=ht(),n=ge(),{userAgent:r}=ue.navigator||{},s=Ap({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&Sn(i,{status:"exited"}),nl(),e.setSession(s),s}function nl(){const t=ht(),n=ge().getSession()||t.getSession();n&&vp(n),rl(),t.setSession()}function rl(){const t=ht(),e=ae(),n=t.getSession();n&&e&&e.captureSession(n)}function sl(t=!1){if(t){nl();return}rl()}const e_="7";function t_(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function n_(t){return`${t_(t)}${t.projectId}/envelope/`}function r_(t,e){const n={sentry_version:e_};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function s_(t,e,n){return e||`${n_(t)}?${r_(t,n)}`}const il=[];function i_(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function a_(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const s=n(e);r=Array.isArray(s)?s:[s]}else r=e;return i_(r)}function o_(t,e){const n={};return e.forEach(r=>{r&&ol(t,r,n)}),n}function al(t,e){for(const n of e)n!=null&&n.afterAllSetup&&n.afterAllSetup(t)}function ol(t,e,n){if(n[e.name]){K&&V.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,il.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),il.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,a)=>r(i,a,t),{id:e.name});t.addEventProcessor(s)}K&&V.log(`Integration installed: ${e.name}`)}function c0(t){return t}function c_(t,e,n){const r=[{type:"client_report"},{timestamp:cr(),discarded_events:t}];return kn(e?{dsn:e}:{},[r])}function cl(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n!=null&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function u_(t){var u;const{trace_id:e,parent_span_id:n,span_id:r,status:s,origin:i,data:a,op:c}=((u=t.contexts)==null?void 0:u.trace)??{};return{data:a??{},description:t.transaction,op:c,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:a==null?void 0:a[ta],exclusive_time:a==null?void 0:a[mr],measurements:t.measurements,is_segment:!0}}function l_(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[ta]:t.profile_id},...t.exclusive_time&&{[mr]:t.exclusive_time}}}},measurements:t.measurements}}const ul="Not capturing exception because it's already been captured.",ll="Discarded session because of missing or non-string release",dl=Symbol.for("SentryInternalError"),fl=Symbol.for("SentryDoNotSendEventError");function Rs(t){return{message:t,[dl]:!0}}function fa(t){return{message:t,[fl]:!0}}function hl(t){return!!t&&typeof t=="object"&&dl in t}function ml(t){return!!t&&typeof t=="object"&&fl in t}class d_{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=iy(e.dsn):K&&V.warn("No DSN provided, client will not send events."),this._dsn){const n=s_(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){const s=We();if(mu(e))return K&&V.log(ul),s;const i={event_id:s,...n};return this._process(this.eventFromException(e,i).then(a=>this._captureEvent(a,i,r))),i.event_id}captureMessage(e,n,r,s){const i={event_id:We(),...r},a=Gi(e)?e:String(e),c=Ji(e)?this.eventFromMessage(a,n,i):this.eventFromException(e,i);return this._process(c.then(u=>this._captureEvent(u,i,s))),i.event_id}captureEvent(e,n,r){const s=We();if(n!=null&&n.originalException&&mu(n.originalException))return K&&V.log(ul),s;const i={event_id:s,...n},a=e.sdkProcessingMetadata||{},c=a.capturedSpanScope,u=a.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,c||r,u)),i.event_id}captureSession(e){this.sendSession(e),Sn(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s))):Xt(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];ol(this,e,this._integrations),n||al(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=wy(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=dy(r,gy(i));const s=this.sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const{release:n,environment:r=oa}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!n){K&&V.warn(ll);return}i.release=i.release||n,i.environment=i.environment||r,e.attrs=i}else{if(!e.release&&!n){K&&V.warn(ll);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=by(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s=`${e}:${n}`;K&&V.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(s=>s(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(K&&V.error("Error while sending envelope:",n),n)):(K&&V.error("Transport disabled"),Xt({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=o_(this,e),al(this,e)}_updateSessionFromEvent(e,n){var u;let r=n.level==="fatal",s=!1;const i=(u=n.exception)==null?void 0:u.values;if(i){s=!0;for(const d of i){const h=d.mechanism;if((h==null?void 0:h.handled)===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(Sn(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new xt(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,e&&r>=e&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s){const i=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&(a!=null&&a.length)&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||s.setLastEventId(e.event_id||n.event_id),By(i,e,n,r,this,s).then(c=>{if(c===null)return c;this.emit("postprocessEvent",c,n),c.contexts={trace:Pp(r),...c.contexts};const u=Nu(this,r);return c.sdkProcessingMetadata={dynamicSamplingContext:u,...c.sdkProcessingMetadata},c})}_captureEvent(e,n={},r=ge(),s=ht()){return K&&ha(e)&&V.log(`Captured error event \`${cl(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,s).then(i=>i.event_id,i=>{K&&(ml(i)?V.log(i.message):hl(i)?V.warn(i.message):V.warn(i))})}_processEvent(e,n,r,s){const i=this.getOptions(),{sampleRate:a}=i,c=gl(e),u=ha(e),d=e.type||"error",h=`before send for type \`${d}\``,g=typeof a>"u"?void 0:gr(a);if(u&&typeof g=="number"&&Math.random()>g)return this.recordDroppedEvent("sample_rate","error"),ws(fa(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));const y=d==="replay_event"?"replay":d;return this._prepareEvent(e,n,r,s).then(b=>{if(b===null)throw this.recordDroppedEvent("event_processor",y),fa("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return b;const v=h_(this,i,b,n);return f_(v,h)}).then(b=>{var A;if(b===null){if(this.recordDroppedEvent("before_send",y),c){const P=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",P)}throw fa(`${h} returned \`null\`, will not send event.`)}const k=r.getSession()||s.getSession();if(u&&k&&this._updateSessionFromEvent(k,b),c){const T=((A=b.sdkProcessingMetadata)==null?void 0:A.spanCountBeforeProcessing)||0,P=b.spans?b.spans.length:0,$=T-P;$>0&&this.recordDroppedEvent("before_send","span",$)}const v=b.transaction_info;if(c&&v&&b.transaction!==e.transaction){const T="custom";b.transaction_info={...v,source:T}}return this.sendEvent(b,n),b}).then(null,b=>{throw ml(b)||hl(b)?b:(this.captureException(b,{data:{__sentry__:!0},originalException:b}),Rs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${b}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){K&&V.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){K&&V.log("No outcomes to send");return}if(!this._dsn){K&&V.log("No dsn provided, will not send outcomes");return}K&&V.log("Sending outcomes:",e);const n=c_(e,this._options.tunnel&&pr(this._dsn));this.sendEnvelope(n)}}function f_(t,e){const n=`${e} must return \`null\` or a valid event.`;if(_s(t))return t.then(r=>{if(!ur(r)&&r!==null)throw Rs(n);return r},r=>{throw Rs(`${e} rejected with ${r}`)});if(!ur(t)&&t!==null)throw Rs(n);return t}function h_(t,e,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:a}=e;let c=n;if(ha(c)&&s)return s(c,r);if(gl(c)){if(a){const u=a(u_(c));if(u?c=fr(n,l_(u)):ia(),c.spans){const d=[];for(const h of c.spans){const g=a(h);g?d.push(g):(ia(),d.push(h))}c.spans=d}}if(i){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function ha(t){return t.type===void 0}function gl(t){return t.type==="transaction"}function m_(t){return[{type:"otel_log"},t]}function g_(t,e,n,r){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=pr(r)),kn(s,t.map(m_))}const p_=new WeakMap;function ma(t,e){const n=p_.get(t)??[];if(n.length===0)return;const r=t.getOptions(),s=g_(n,r._metadata,r.tunnel,t.getDsn());n.length=0,t.emit("flushLogs"),t.sendEnvelope(s)}function y_(t,e){e.debug===!0&&(K?V.enable():wn(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ge().update(e.initialScope);const r=new t(e);return __(r),r.init(),r}function __(t){ge().setClient(t)}const pl=Symbol.for("SentryBufferFullError");function b_(t){const e=[];function n(){return t===void 0||e.length<t}function r(a){return e.splice(e.indexOf(a),1)[0]||Promise.resolve(void 0)}function s(a){if(!n())return ws(pl);const c=a();return e.indexOf(c)===-1&&e.push(c),c.then(()=>r(c)).then(null,()=>r(c).then(null,()=>{})),c}function i(a){return new xt((c,u)=>{let d=e.length;if(!d)return c(!0);const h=setTimeout(()=>{a&&a>0&&c(!1)},a);e.forEach(g=>{Xt(g).then(()=>{--d||(clearTimeout(h),c(!0))},u)})})}return{$:e,add:s,drain:i}}const w_=60*1e3;function A_(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?w_:r-e}function v_(t,e){return t[e]||t.all||0}function S_(t,e,n=Date.now()){return v_(t,e)>n}function E_(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n==null?void 0:n["x-sentry-rate-limits"],a=n==null?void 0:n["retry-after"];if(i)for(const c of i.trim().split(",")){const[u,d,,,h]=c.split(":",5),g=parseInt(u,10),y=(isNaN(g)?60:g)*1e3;if(!d)s.all=r+y;else for(const b of d.split(";"))b==="metric_bucket"?(!h||h.split(";").includes("custom"))&&(s[b]=r+y):s[b]=r+y}else a?s.all=r+A_(a,r):e===429&&(s.all=r+6e4);return s}const T_=64;function k_(t,e,n=b_(t.bufferSize||T_)){let r={};const s=a=>n.drain(a);function i(a){const c=[];if(ju(a,(g,y)=>{const b=Fu(y);S_(r,b)?t.recordDroppedEvent("ratelimit_backoff",b):c.push(g)}),c.length===0)return Xt({});const u=kn(a[0],c),d=g=>{ju(u,(y,b)=>{t.recordDroppedEvent(g,Fu(b))})},h=()=>e({body:fy(u)}).then(g=>(g.statusCode!==void 0&&(g.statusCode<200||g.statusCode>=300)&&K&&V.warn(`Sentry responded with status code ${g.statusCode} to sent event.`),r=E_(r,g),g),g=>{throw d("network_error"),K&&V.error("Encountered error running transport request:",g),g});return n.add(h).then(g=>g,g=>{if(g===pl)return K&&V.error("Skipped sending event because buffer is full."),d("queue_overflow"),Xt({});throw g})}return{send:i,flush:s}}function x_(t){var e;((e=t.user)==null?void 0:e.ip_address)===void 0&&(t.user={...t.user,ip_address:"{{auto}}"})}function I_(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function O_(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:zt})),version:zt}),t._metadata=s}function yl(t={}){const e=ae();if(!Qy()||!e)return{};const n=Gt(),r=Tn(n);if(r.getTraceData)return r.getTraceData(t);const s=ge(),i=t.span||Fe(),a=i?Gp(i):C_(s),c=i?Ct(i):Nu(e,s),u=Fp(c);return Eu.test(a)?{"sentry-trace":a,baggage:u}:(V.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function C_(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Tu(e,r,n)}const R_=100;function Rt(t,e){const n=ae(),r=ht();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=R_}=n.getOptions();if(i<=0)return;const c={timestamp:cr(),...t},u=s?wn(()=>s(c,e)):c;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),r.addBreadcrumb(u,i))}let _l;const P_="FunctionToString",bl=new WeakMap,M_=()=>({name:P_,setupOnce(){_l=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Zi(this),n=bl.has(ae())&&e!==void 0?e:this;return _l.apply(n,t)}}catch{}},setup(t){bl.set(t,!0)}}),$_=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],N_="EventFilters",D_=(t={})=>{let e;return{name:N_,setup(n){const r=n.getOptions();e=wl(t,r)},processEvent(n,r,s){if(!e){const i=s.getOptions();e=wl(t,i)}return j_(n,e)?null:n}}},L_=(t={})=>({...D_(t),name:"InboundFilters"});function wl(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:$_],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function j_(t,e){if(t.type){if(t.type==="transaction"&&U_(t,e.ignoreTransactions))return K&&V.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Yt(t)}`),!0}else{if(F_(t,e.ignoreErrors))return K&&V.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Yt(t)}`),!0;if(W_(t))return K&&V.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Yt(t)}`),!0;if(B_(t,e.denyUrls))return K&&V.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Yt(t)}.
Url: ${Ps(t)}`),!0;if(!V_(t,e.allowUrls))return K&&V.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Yt(t)}.
Url: ${Ps(t)}`),!0}return!1}function F_(t,e){return e!=null&&e.length?cl(t).some(n=>Zt(n,e)):!1}function U_(t,e){if(!(e!=null&&e.length))return!1;const n=t.transaction;return n?Zt(n,e):!1}function B_(t,e){if(!(e!=null&&e.length))return!1;const n=Ps(t);return n?Zt(n,e):!1}function V_(t,e){if(!(e!=null&&e.length))return!0;const n=Ps(t);return n?Zt(n,e):!0}function q_(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ps(t){var e,n;try{const r=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(i=>{var a,c,u;return((a=i.mechanism)==null?void 0:a.parent_id)===void 0&&((u=(c=i.stacktrace)==null?void 0:c.frames)==null?void 0:u.length)}),s=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return s?q_(s):null}catch{return K&&V.error(`Cannot extract url for event ${Yt(t)}`),null}}function W_(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)!=null&&n.length?!t.message&&!t.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function H_(t,e,n,r,s,i){var c;if(!((c=s.exception)!=null&&c.values)||!i||!dt(i.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=ga(t,e,r,i.originalException,n,s.exception.values,a,0))}function ga(t,e,n,r,s,i,a,c){if(i.length>=n+1)return i;let u=[...i];if(dt(r[s],Error)){Al(a,c);const d=t(e,r[s]),h=u.length;vl(d,s,h,c),u=ga(t,e,n,r[s],s,[d,...u],d,h)}return Array.isArray(r.errors)&&r.errors.forEach((d,h)=>{if(dt(d,Error)){Al(a,c);const g=t(e,d),y=u.length;vl(g,`errors[${h}]`,y,c),u=ga(t,e,n,d,s,[g,...u],g,y)}}),u}function Al(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function vl(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function z_(t){const e="console";Tt(e,t),kt(e,G_)}function G_(){"console"in ue&&Bi.forEach(function(t){t in ue.console&&Le(ue.console,t,function(e){return ms[t]=e,function(...n){Ve("console",{args:n,level:t});const s=ms[t];s==null||s.apply(ue.console,n)}})})}function J_(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const K_="Dedupe",Z_=()=>{let t;return{name:K_,processEvent(e){if(e.type)return e;try{if(Y_(e,t))return K&&V.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Y_(t,e){return e?!!(X_(t,e)||Q_(t,e)):!1}function X_(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!El(t,e)||!Sl(t,e))}function Q_(t,e){const n=Tl(e),r=Tl(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!El(t,e)||!Sl(t,e))}function Sl(t,e){let n=Yc(t),r=Yc(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],a=n[s];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function El(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Tl(t){var e;return((e=t.exception)==null?void 0:e.values)&&t.exception.values[0]}const eb="thismessage:/";function kl(t){return"isRelative"in t}function tb(t,e){const n=t.startsWith("/"),r=n?eb:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const s=new URL(t,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function nb(t){if(kl(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function an(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function rb(t){return t.split(/[?#]/,1)[0]}function sb(t,e,n,r,s="auto.http.browser"){if(!t.fetchData)return;const{method:i,url:a}=t.fetchData,c=Ot()&&e(a);if(t.endTimestamp&&c){const g=t.fetchData.__span;if(!g)return;const y=r[g];y&&(ab(y,t),delete r[g]);return}const u=!!Fe(),d=c&&u?yr(cb(a,i,s)):new rn;if(t.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(t.fetchData.url)){const g=t.args[0],y=t.args[1]||{},b=ib(g,y,Ot()&&u?d:void 0);b&&(t.args[1]=y,y.headers=b)}const h=ae();if(h){const g={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};h.emit("beforeOutgoingRequestSpan",d,g)}return d}function ib(t,e,n){const r=yl({span:n}),s=r["sentry-trace"],i=r.baggage;if(!s)return;const a=e.headers||(au(t)?t.headers:void 0);if(a)if(ob(a)){const c=new Headers(a);if(c.set("sentry-trace",s),i){const u=c.get("baggage");if(u){const d=Ms(u);c.set("baggage",d?`${d},${i}`:i)}else c.set("baggage",i)}return c}else if(Array.isArray(a)){const c=[...a.filter(u=>!(Array.isArray(u)&&u[0]==="sentry-trace")).map(u=>{if(Array.isArray(u)&&u[0]==="baggage"&&typeof u[1]=="string"){const[d,h,...g]=u;return[d,Ms(h),...g]}else return u}),["sentry-trace",s]];return i&&c.push(["baggage",i]),c}else{const c="baggage"in a?a.baggage:void 0;let u=[];return Array.isArray(c)?u=c.map(d=>typeof d=="string"?Ms(d):d).filter(d=>d===""):c&&u.push(Ms(c)),i&&u.push(i),{...a,"sentry-trace":s,baggage:u.length>0?u.join(","):void 0}}else return{...r}}function ab(t,e){var n;if(e.response){bu(t,e.response.status);const r=((n=e.response)==null?void 0:n.headers)&&e.response.headers.get("content-length");if(r){const s=parseInt(r);s>0&&t.setAttribute("http.response_content_length",s)}}else e.error&&t.setStatus({code:Se,message:"internal_error"});t.end()}function Ms(t){return t.split(",").filter(e=>!e.split("=")[0].startsWith(na)).join(",")}function ob(t){return typeof Headers<"u"&&dt(t,Headers)}function cb(t,e,n){const r=tb(t);return{name:r?`${e} ${nb(r)}`:e,attributes:ub(t,r,e,n)}}function ub(t,e,n,r){const s={url:t,type:"fetch","http.method":n,[ve]:r,[Qt]:"http.client"};return e&&(kl(e)||(s["http.url"]=e.href,s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function xl(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const _r=ue;function lb(){return"history"in _r&&!!_r.history}function Il(){if(!("fetch"in _r))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function pa(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function db(){var n;if(typeof EdgeRuntime=="string")return!0;if(!Il())return!1;if(pa(_r.fetch))return!0;let t=!1;const e=_r.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(t=pa(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){Et&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function Ol(t,e){const n="fetch";Tt(n,t),kt(n,()=>Cl(void 0,e))}function fb(t){const e="fetch-body-resolved";Tt(e,t),kt(e,()=>Cl(mb))}function Cl(t,e=!1){e&&!db()||Le(ue,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:a}=gb(r),c={args:r,fetchData:{method:i,url:a},startTimestamp:Re()*1e3,virtualError:s,headers:pb(r)};return t||Ve("fetch",{...c}),n.apply(ue,r).then(async u=>(t?t(u):Ve("fetch",{...c,endTimestamp:Re()*1e3,response:u}),u),u=>{if(Ve("fetch",{...c,endTimestamp:Re()*1e3,error:u}),zi(u)&&u.stack===void 0&&(u.stack=s.stack,je(u,"framesToPop",1)),u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(c.fetchData.url);u.message=`${u.message} (${d.host})`}catch{}throw u})}})}async function hb(t,e){if(t!=null&&t.body){const n=t.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let a;try{a=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:c}=await r.read();clearTimeout(a),c&&(e(),i=!1)}catch{i=!1}finally{clearTimeout(a)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function mb(t){let e;try{e=t.clone()}catch{return}hb(e,()=>{Ve("fetch-body-resolved",{endTimestamp:Re()*1e3,response:t})})}function ya(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Rl(t){return typeof t=="string"?t:t?ya(t,"url")?t.url:t.toString?t.toString():"":""}function gb(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Rl(n),method:ya(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:Rl(e),method:ya(e,"method")?String(e.method).toUpperCase():"GET"}}function pb(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(au(e))return new Headers(e.headers)}catch{}}function yb(){return"npm"}const se=ue;let _a=0;function Pl(){return _a>0}function _b(){_a++,setTimeout(()=>{_a--})}function xn(t,e={}){function n(s){return typeof s=="function"}if(!n(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(Zi(t))return t}catch{return t}const r=function(...s){try{const i=s.map(a=>xn(a,e));return t.apply(this,i)}catch(i){throw _b(),Qi(a=>{a.addEventProcessor(c=>(e.mechanism&&(Yi(c,void 0),vn(c,e.mechanism)),c.extra={...c.extra,arguments:s},c)),Xu(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}uu(r,t),je(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function ba(t,e){const n=Aa(t,e),r={type:Sb(e),value:Eb(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function bb(t,e,n,r){const s=ae(),i=s==null?void 0:s.getOptions().normalizeDepth,a=Ob(e),c={__serialized__:Lu(e,i)};if(a)return{exception:{values:[ba(t,a)]},extra:c};const u={exception:{values:[{type:ys(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:xb(e,{isUnhandledRejection:r})}]},extra:c};if(n){const d=Aa(t,n);d.length&&(u.exception.values[0].stacktrace={frames:d})}return u}function wa(t,e){return{exception:{values:[ba(t,e)]}}}function Aa(t,e){const n=e.stacktrace||e.stack||"",r=Ab(e),s=vb(e);try{return t(n,r,s)}catch{}return[]}const wb=/Minified React error #\d+;/i;function Ab(t){return t&&wb.test(t.message)?1:0}function vb(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Ml(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function Sb(t){const e=t==null?void 0:t.name;return!e&&Ml(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Eb(t){const e=t==null?void 0:t.message;return Ml(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Tb(t,e,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,i=va(t,e,s,r);return vn(i),i.level="error",n!=null&&n.event_id&&(i.event_id=n.event_id),Xt(i)}function kb(t,e,n="info",r,s){const i=(r==null?void 0:r.syntheticException)||void 0,a=Sa(t,e,i,s);return a.level=n,r!=null&&r.event_id&&(a.event_id=r.event_id),Xt(a)}function va(t,e,n,r,s){let i;if(ru(e)&&e.error)return wa(t,e.error);if(su(e)||dp(e)){const a=e;if("stack"in e)i=wa(t,e);else{const c=a.name||(su(a)?"DOMError":"DOMException"),u=a.message?`${c}: ${a.message}`:c;i=Sa(t,u,n,r),Yi(i,u)}return"code"in a&&(i.tags={...i.tags,"DOMException.code":`${a.code}`}),i}return zi(e)?wa(t,e):ur(e)||ys(e)?(i=bb(t,e,n,s),vn(i,{synthetic:!0}),i):(i=Sa(t,e,n,r),Yi(i,`${e}`),vn(i,{synthetic:!0}),i)}function Sa(t,e,n,r){const s={};if(r&&n){const i=Aa(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),vn(s,{synthetic:!0})}if(Gi(e)){const{__sentry_template_string__:i,__sentry_template_values__:a}=e;return s.logentry={message:i,params:a},s}return s.message=e,s}function xb(t,{isUnhandledRejection:e}){const n=_p(t),r=e?"promise rejection":"exception";return ru(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:ys(t)?`Event \`${Ib(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Ib(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Ob(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}const Cb=5e3;class Rb extends d_{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=se.SENTRY_SDK_SOURCE||yb();O_(n,"browser",["browser"],r),super(n);const s=this,{sendDefaultPii:i,_experiments:a}=s._options,c=a==null?void 0:a.enableLogs;n.sendClientReports&&se.document&&se.document.addEventListener("visibilitychange",()=>{se.document.visibilityState==="hidden"&&(this._flushOutcomes(),c&&ma(s))}),c&&(s.on("flush",()=>{ma(s)}),s.on("afterCaptureLog",()=>{s._logFlushIdleTimeout&&clearTimeout(s._logFlushIdleTimeout),s._logFlushIdleTimeout=setTimeout(()=>{ma(s)},Cb)})),i&&(s.on("postprocessEvent",x_),s.on("beforeSendSession",I_))}eventFromException(e,n){return Tb(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return kb(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,s)}}const Ea=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Pb=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",In=(t,e,n,r)=>{let s,i;return a=>{e.value>=0&&(a||r)&&(i=e.value-(s||0),(i||s===void 0)&&(s=e.value,e.delta=i,e.rating=Pb(e.value,n),t(e)))}},Q=ue,Mb=()=>`v4-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,br=(t=!0)=>{var n,r;const e=(r=(n=Q.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},wr=()=>{const t=br();return(t==null?void 0:t.activationStart)||0},On=(t,e)=>{var i,a;const n=br();let r="navigate";return n&&((i=Q.document)!=null&&i.prerendering||wr()>0?r="prerender":(a=Q.document)!=null&&a.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:Mb(),navigationType:r}},on=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},Cn=t=>{const e=n=>{var r;(n.type==="pagehide"||((r=Q.document)==null?void 0:r.visibilityState)==="hidden")&&t(n)};Q.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},$s=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let Ar=-1;const $b=()=>Q.document.visibilityState==="hidden"&&!Q.document.prerendering?0:1/0,Ns=t=>{Q.document.visibilityState==="hidden"&&Ar>-1&&(Ar=t.type==="visibilitychange"?t.timeStamp:0,Db())},Nb=()=>{addEventListener("visibilitychange",Ns,!0),addEventListener("prerenderingchange",Ns,!0)},Db=()=>{removeEventListener("visibilitychange",Ns,!0),removeEventListener("prerenderingchange",Ns,!0)},Ds=()=>(Q.document&&Ar<0&&(Ar=$b(),Nb()),{get firstHiddenTime(){return Ar}}),vr=t=>{var e;(e=Q.document)!=null&&e.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},Lb=[1800,3e3],jb=(t,e={})=>{vr(()=>{const n=Ds(),r=On("FCP");let s;const a=on("paint",c=>{c.forEach(u=>{u.name==="first-contentful-paint"&&(a.disconnect(),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-wr(),0),r.entries.push(u),s(!0)))})});a&&(s=In(t,r,Lb,e.reportAllChanges))})},Fb=[.1,.25],Ub=(t,e={})=>{jb($s(()=>{const n=On("CLS",0);let r,s=0,i=[];const a=u=>{u.forEach(d=>{if(!d.hadRecentInput){const h=i[0],g=i[i.length-1];s&&h&&g&&d.startTime-g.startTime<1e3&&d.startTime-h.startTime<5e3?(s+=d.value,i.push(d)):(s=d.value,i=[d])}}),s>n.value&&(n.value=s,n.entries=i,r())},c=on("layout-shift",a);c&&(r=In(t,n,Fb,e.reportAllChanges),Cn(()=>{a(c.takeRecords()),r(!0)}),setTimeout(r,0))}))},Bb=[100,300],Vb=(t,e={})=>{vr(()=>{const n=Ds(),r=On("FID");let s;const i=u=>{u.startTime<n.firstHiddenTime&&(r.value=u.processingStart-u.startTime,r.entries.push(u),s(!0))},a=u=>{u.forEach(i)},c=on("first-input",a);s=In(t,r,Bb,e.reportAllChanges),c&&Cn($s(()=>{a(c.takeRecords()),c.disconnect()}))})};let $l=0,Ta=1/0,Ls=0;const qb=t=>{t.forEach(e=>{e.interactionId&&(Ta=Math.min(Ta,e.interactionId),Ls=Math.max(Ls,e.interactionId),$l=Ls?(Ls-Ta)/7+1:0)})};let ka;const Wb=()=>ka?$l:performance.interactionCount||0,Hb=()=>{"interactionCount"in performance||ka||(ka=on("event",qb,{type:"event",buffered:!0,durationThreshold:0}))},pt=[],xa=new Map,zb=40;let Gb=0;const Jb=()=>Wb()-Gb,Kb=()=>{const t=Math.min(pt.length-1,Math.floor(Jb()/50));return pt[t]},Ia=10,Zb=[],Yb=t=>{var r;if(Zb.forEach(s=>s(t)),!(t.interactionId||t.entryType==="first-input"))return;const e=pt[pt.length-1],n=xa.get(t.interactionId);if(n||pt.length<Ia||e&&t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===((r=n.entries[0])==null?void 0:r.startTime)&&n.entries.push(t);else{const s={id:t.interactionId,latency:t.duration,entries:[t]};xa.set(s.id,s),pt.push(s)}pt.sort((s,i)=>i.latency-s.latency),pt.length>Ia&&pt.splice(Ia).forEach(s=>xa.delete(s.id))}},Nl=t=>{var r;const e=Q.requestIdleCallback||Q.setTimeout;let n=-1;return t=$s(t),((r=Q.document)==null?void 0:r.visibilityState)==="hidden"?t():(n=e(t),Cn(t)),n},Xb=[200,500],Qb=(t,e={})=>{"PerformanceEventTiming"in Q&&"interactionId"in PerformanceEventTiming.prototype&&vr(()=>{Hb();const n=On("INP");let r;const s=a=>{Nl(()=>{a.forEach(Yb);const c=Kb();c&&c.latency!==n.value&&(n.value=c.latency,n.entries=c.entries,r())})},i=on("event",s,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:zb});r=In(t,n,Xb,e.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),Cn(()=>{s(i.takeRecords()),r(!0)}))})},ew=[2500,4e3],Dl={},tw=(t,e={})=>{vr(()=>{const n=Ds(),r=On("LCP");let s;const i=c=>{e.reportAllChanges||(c=c.slice(-1)),c.forEach(u=>{u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-wr(),0),r.entries=[u],s())})},a=on("largest-contentful-paint",i);if(a){s=In(t,r,ew,e.reportAllChanges);const c=$s(()=>{Dl[r.id]||(i(a.takeRecords()),a.disconnect(),Dl[r.id]=!0,s(!0))});["keydown","click"].forEach(u=>{Q.document&&addEventListener(u,()=>Nl(c),{once:!0,capture:!0})}),Cn(c)}})},nw=[800,1800],Oa=t=>{var e,n;(e=Q.document)!=null&&e.prerendering?vr(()=>Oa(t)):((n=Q.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>Oa(t),!0):setTimeout(t,0)},rw=(t,e={})=>{const n=On("TTFB"),r=In(t,n,nw,e.reportAllChanges);Oa(()=>{const s=br();s&&(n.value=Math.max(s.responseStart-wr(),0),n.entries=[s],r(!0))})},Sr={},js={};let Ll,jl,Fl,Ul,Bl;function Vl(t,e=!1){return Tr("cls",t,cw,Ll,e)}function sw(t,e=!1){return Tr("lcp",t,lw,Fl,e)}function iw(t){return Tr("fid",t,uw,jl)}function aw(t){return Tr("ttfb",t,dw,Ul)}function ow(t){return Tr("inp",t,fw,Bl)}function Er(t,e){return ql(t,e),js[t]||(hw(t),js[t]=!0),Wl(t,e)}function Rn(t,e){const n=Sr[t];if(n!=null&&n.length)for(const r of n)try{r(e)}catch(s){Ea&&V.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ut(r)}
Error:`,s)}}function cw(){return Ub(t=>{Rn("cls",{metric:t}),Ll=t},{reportAllChanges:!0})}function uw(){return Vb(t=>{Rn("fid",{metric:t}),jl=t})}function lw(){return tw(t=>{Rn("lcp",{metric:t}),Fl=t},{reportAllChanges:!0})}function dw(){return rw(t=>{Rn("ttfb",{metric:t}),Ul=t})}function fw(){return Qb(t=>{Rn("inp",{metric:t}),Bl=t})}function Tr(t,e,n,r,s=!1){ql(t,e);let i;return js[t]||(i=n(),js[t]=!0),r&&e({metric:r}),Wl(t,e,s?i:void 0)}function hw(t){const e={};t==="event"&&(e.durationThreshold=0),on(t,n=>{Rn(t,{entries:n})},e)}function ql(t,e){Sr[t]=Sr[t]||[],Sr[t].push(e)}function Wl(t,e,n){return()=>{n&&n();const r=Sr[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function mw(t){return"duration"in t}function Ca(t){return typeof t=="number"&&isFinite(t)}function yt(t,e,n,{...r}){const s=le(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),zu(t,()=>{const i=yr({startTime:e,...r});return i&&i.end(n),i})}function Hl(t){var A;const e=ae();if(!e)return;const{name:n,transaction:r,attributes:s,startTime:i}=t,{release:a,environment:c,sendDefaultPii:u}=e.getOptions(),d=e.getIntegrationByName("Replay"),h=d==null?void 0:d.getReplayId(),g=ge(),y=g.getUser(),b=y!==void 0?y.email||y.id||y.ip_address:void 0;let k;try{k=g.getScopeData().contexts.profile.profile_id}catch{}const v={release:a,environment:c,user:b||void 0,profile_id:k||void 0,replay_id:h||void 0,transaction:r,"user_agent.original":(A=Q.navigator)==null?void 0:A.userAgent,"client.address":u?"{{auto}}":void 0,...s};return yr({name:n,attributes:v,startTime:i,experimental:{standalone:!0}})}function Ra(){return Q.addEventListener&&Q.performance}function ye(t){return t/1e3}function zl(t){let e="unknown",n="unknown",r="";for(const s of t){if(s==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=s}return r===t&&(e=r),{name:e,version:n}}function gw(){let t=0,e,n;if(!yw())return;let r=!1;function s(){r||(r=!0,n&&pw(t,e,n),i())}const i=Vl(({metric:a})=>{const c=a.entries[a.entries.length-1];c&&(t=a.value,e=c)},!0);Cn(()=>{s()}),setTimeout(()=>{const a=ae();if(!a)return;const c=a.on("startNavigationSpan",()=>{s(),c==null||c()}),u=Fe();if(u){const d=Pe(u);le(d).op==="pageload"&&(n=d.spanContext().spanId)}},0)}function pw(t,e,n){var u;Ea&&V.log(`Sending CLS span (${t})`);const r=ye((qe()||0)+((e==null?void 0:e.startTime)||0)),s=ge().getScopeData().transactionName,i=e?Kt((u=e.sources[0])==null?void 0:u.node):"Layout shift",a={[ve]:"auto.http.browser.cls",[Qt]:"ui.webvital.cls",[mr]:(e==null?void 0:e.duration)||0,"sentry.pageload.span_id":n},c=Hl({name:i,transaction:s,attributes:a,startTime:r});c&&(c.addEvent("cls",{[vs]:"",[Ss]:t}),c.end(r))}function yw(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}const _w=2147483647;let Gl=0,ke={},$e,Pn;function bw({recordClsStandaloneSpans:t}){const e=Ra();if(e&&qe()){e.mark&&Q.performance.mark("sentry-tracing-init");const n=Tw(),r=Ew(),s=kw(),i=t?gw():Sw();return()=>{n(),r(),s(),i==null||i()}}return()=>{}}function ww(){Er("longtask",({entries:t})=>{const e=Fe();if(!e)return;const{op:n,start_timestamp:r}=le(e);for(const s of t){const i=ye(qe()+s.startTime),a=ye(s.duration);n==="navigation"&&r&&i<r||yt(e,i,i+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ve]:"auto.ui.browser.metrics"}})}})}function Aw(){new PerformanceObserver(e=>{const n=Fe();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const s=ye(qe()+r.startTime),{start_timestamp:i,op:a}=le(n);if(a==="navigation"&&i&&s<i)continue;const c=ye(r.duration),u={[ve]:"auto.ui.browser.metrics"},d=r.scripts[0],{invoker:h,invokerType:g,sourceURL:y,sourceFunctionName:b,sourceCharPosition:k}=d;u["browser.script.invoker"]=h,u["browser.script.invoker_type"]=g,y&&(u["code.filepath"]=y),b&&(u["code.function"]=b),k!==-1&&(u["browser.script.source_char_position"]=k),yt(n,s,s+c,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:u})}}).observe({type:"long-animation-frame",buffered:!0})}function vw(){Er("event",({entries:t})=>{const e=Fe();if(e){for(const n of t)if(n.name==="click"){const r=ye(qe()+n.startTime),s=ye(n.duration),i={name:Kt(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[ve]:"auto.ui.browser.metrics"}},a=ou(n.target);a&&(i.attributes["ui.component_name"]=a),yt(e,r,r+s,i)}}})}function Sw(){return Vl(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ke.cls={value:t.value,unit:""},Pn=e)},!0)}function Ew(){return sw(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ke.lcp={value:t.value,unit:"millisecond"},$e=e)},!0)}function Tw(){return iw(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=ye(qe()),r=ye(e.startTime);ke.fid={value:t.value,unit:"millisecond"},ke["mark.fid"]={value:n+r,unit:"second"}})}function kw(){return aw(({metric:t})=>{t.entries[t.entries.length-1]&&(ke.ttfb={value:t.value,unit:"millisecond"})})}function xw(t,e){const n=Ra(),r=qe();if(!(n!=null&&n.getEntries)||!r)return;const s=ye(r),i=n.getEntries(),{op:a,start_timestamp:c}=le(t);if(i.slice(Gl).forEach(u=>{const d=ye(u.startTime),h=ye(Math.max(0,u.duration));if(!(a==="navigation"&&c&&s+d<c))switch(u.entryType){case"navigation":{Ow(t,u,s);break}case"mark":case"paint":case"measure":{Iw(t,u,d,h,s);const g=Ds(),y=u.startTime<g.firstHiddenTime;u.name==="first-paint"&&y&&(ke.fp={value:u.startTime,unit:"millisecond"}),u.name==="first-contentful-paint"&&y&&(ke.fcp={value:u.startTime,unit:"millisecond"});break}case"resource":{Pw(t,u,u.name,d,h,s);break}}}),Gl=Math.max(i.length-1,0),Mw(t),a==="pageload"){Nw(ke);const u=ke["mark.fid"];u&&ke.fid&&(yt(t,u.value,u.value+ye(ke.fid.value),{name:"first input delay",op:"ui.action",attributes:{[ve]:"auto.ui.browser.metrics"}}),delete ke["mark.fid"]),(!("fcp"in ke)||!e.recordClsOnPageloadSpan)&&delete ke.cls,Object.entries(ke).forEach(([d,h])=>{vy(d,h.value,h.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",wr()),$w(t)}$e=void 0,Pn=void 0,ke={}}function Iw(t,e,n,r,s){const i=br(!1),a=ye(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,h={[ve]:"auto.resource.browser.metrics"};c!==u&&(h["sentry.browser.measure_happened_before_request"]=!0,h["sentry.browser.measure_start_time"]=c),c<=d&&yt(t,c,d,{name:e.name,op:e.entryType,attributes:h})}function Ow(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Fs(t,e,r,n)}),Fs(t,e,"secureConnection",n,"TLS/SSL"),Fs(t,e,"fetch",n,"cache"),Fs(t,e,"domainLookup",n,"DNS"),Rw(t,e,n)}function Fs(t,e,n,r,s=n){const i=Cw(n),a=e[i],c=e[`${n}Start`];!c||!a||yt(t,r+ye(c),r+ye(a),{op:`browser.${s}`,name:e.name,attributes:{[ve]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function Cw(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function Rw(t,e,n){const r=n+ye(e.requestStart),s=n+ye(e.responseEnd),i=n+ye(e.responseStart);e.responseEnd&&(yt(t,r,s,{op:"browser.request",name:e.name,attributes:{[ve]:"auto.ui.browser.metrics"}}),yt(t,i,s,{op:"browser.response",name:e.name,attributes:{[ve]:"auto.ui.browser.metrics"}}))}function Pw(t,e,n,r,s,i){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=an(n),c={[ve]:"auto.resource.browser.metrics"};Pa(c,e,"transferSize","http.response_transfer_size"),Pa(c,e,"encodedBodySize","http.response_content_length"),Pa(c,e,"decodedBodySize","http.decoded_response_content_length");const u=e.deliveryType;u!=null&&(c["http.response_delivery_type"]=u);const d=e.renderBlockingStatus;d&&(c["resource.render_blocking_status"]=d),a.protocol&&(c["url.scheme"]=a.protocol.split(":").pop()),a.host&&(c["server.address"]=a.host),c["url.same_origin"]=n.includes(Q.location.origin);const{name:h,version:g}=zl(e.nextHopProtocol);c["network.protocol.name"]=h,c["network.protocol.version"]=g;const y=i+r,b=y+s;yt(t,y,b,{name:n.replace(Q.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:c})}function Mw(t){const e=Q.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),Ca(n.rtt)&&(ke["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ca(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),Ca(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function $w(t){$e&&($e.element&&t.setAttribute("lcp.element",Kt($e.element)),$e.id&&t.setAttribute("lcp.id",$e.id),$e.url&&t.setAttribute("lcp.url",$e.url.trim().slice(0,200)),$e.loadTime!=null&&t.setAttribute("lcp.loadTime",$e.loadTime),$e.renderTime!=null&&t.setAttribute("lcp.renderTime",$e.renderTime),t.setAttribute("lcp.size",$e.size)),Pn!=null&&Pn.sources&&Pn.sources.forEach((e,n)=>t.setAttribute(`cls.source.${n+1}`,Kt(e.node)))}function Pa(t,e,n,r){const s=e[n];s!=null&&s<_w&&(t[r]=s)}function Nw(t){const e=br(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const Dw=1e3;let Jl,Ma,$a;function Lw(t){const e="dom";Tt(e,t),kt(e,jw)}function jw(){if(!Q.document)return;const t=Ve.bind(null,"dom"),e=Kl(t,!0);Q.document.addEventListener("click",e,!1),Q.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{var i,a;const s=(i=Q[n])==null?void 0:i.prototype;(a=s==null?void 0:s.hasOwnProperty)!=null&&a.call(s,"addEventListener")&&(Le(s,"addEventListener",function(c){return function(u,d,h){if(u==="click"||u=="keypress")try{const g=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},y=g[u]=g[u]||{refCount:0};if(!y.handler){const b=Kl(t);y.handler=b,c.call(this,u,b,h)}y.refCount++}catch{}return c.call(this,u,d,h)}}),Le(s,"removeEventListener",function(c){return function(u,d,h){if(u==="click"||u=="keypress")try{const g=this.__sentry_instrumentation_handlers__||{},y=g[u];y&&(y.refCount--,y.refCount<=0&&(c.call(this,u,y.handler,h),y.handler=void 0,delete g[u]),Object.keys(g).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return c.call(this,u,d,h)}}))})}function Fw(t){if(t.type!==Ma)return!1;try{if(!t.target||t.target._sentryId!==$a)return!1}catch{}return!0}function Uw(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function Kl(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Bw(n);if(Uw(n.type,r))return;je(n,"_sentryCaptured",!0),r&&!r._sentryId&&je(r,"_sentryId",We());const s=n.type==="keypress"?"input":n.type;Fw(n)||(t({event:n,name:s,global:e}),Ma=n.type,$a=r?r._sentryId:void 0),clearTimeout(Jl),Jl=Q.setTimeout(()=>{$a=void 0,Ma=void 0},Dw)}}function Bw(t){try{return t.target}catch{return null}}let Us;function Na(t){const e="history";Tt(e,t),kt(e,Vw)}function Vw(){if(Q.addEventListener("popstate",()=>{const e=Q.location.href,n=Us;if(Us=e,n===e)return;Ve("history",{from:n,to:e})}),!lb())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=Us,i=String(r);if(Us=i,s===i)return e.apply(this,n);Ve("history",{from:s,to:i})}return e.apply(this,n)}}Le(Q.history,"pushState",t),Le(Q.history,"replaceState",t)}const Bs={};function qw(t){const e=Bs[t];if(e)return e;let n=Q[t];if(pa(n))return Bs[t]=n.bind(Q);const r=Q.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i!=null&&i[t]&&(n=i[t]),r.head.removeChild(s)}catch(s){Ea&&V.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return n&&(Bs[t]=n.bind(Q))}function Zl(t){Bs[t]=void 0}const Mn="__sentry_xhr_v3__";function Yl(t){const e="xhr";Tt(e,t),kt(e,Ww)}function Ww(){if(!Q.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const s=new Error,i=Re()*1e3,a=lt(r[0])?r[0].toUpperCase():void 0,c=Hw(r[1]);if(!a||!c)return e.apply(n,r);n[Mn]={method:a,url:c,request_headers:{}},a==="POST"&&c.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const u=()=>{const d=n[Mn];if(d&&n.readyState===4){try{d.status_code=n.status}catch{}const h={endTimestamp:Re()*1e3,startTimestamp:i,xhr:n,virtualError:s};Ve("xhr",h)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(d,h,g){return u(),d.apply(h,g)}}):n.addEventListener("readystatechange",u),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(d,h,g){const[y,b]=g,k=h[Mn];return k&&lt(y)&&lt(b)&&(k.request_headers[y.toLowerCase()]=b),d.apply(h,g)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const s=n[Mn];if(!s)return e.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:Re()*1e3,xhr:n};return Ve("xhr",i),e.apply(n,r)}})}function Hw(t){if(lt(t))return t;try{return t.toString()}catch{}}const Da=[],Vs=new Map;function zw(){if(Ra()&&qe()){const e=Gw();return()=>{e()}}return()=>{}}const Xl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Gw(){return ow(({metric:t})=>{if(t.value==null)return;const e=t.entries.find(k=>k.duration===t.value&&Xl[k.name]);if(!e)return;const{interactionId:n}=e,r=Xl[e.name],s=ye(qe()+e.startTime),i=ye(t.value),a=Fe(),c=a?Pe(a):void 0,d=(n!=null?Vs.get(n):void 0)||c,h=d?le(d).description:ge().getScopeData().transactionName,g=Kt(e.target),y={[ve]:"auto.http.browser.inp",[Qt]:`ui.interaction.${r}`,[mr]:e.duration},b=Hl({name:g,transaction:h,attributes:y,startTime:s});b&&(b.addEvent("inp",{[vs]:"millisecond",[Ss]:t.value}),b.end(s+i))})}function Jw(){const t=({entries:e})=>{const n=Fe(),r=n&&Pe(n);e.forEach(s=>{if(!mw(s)||!r)return;const i=s.interactionId;if(i!=null&&!Vs.has(i)){if(Da.length>10){const a=Da.shift();Vs.delete(a)}Da.push(i),Vs.set(i,r)}})};Er("event",t),Er("first-input",t)}function Kw(t,e=qw("fetch")){let n=0,r=0;function s(i){const a=i.body.length;n+=a,r++;const c={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return Zl("fetch"),ws("No fetch implementation available");try{return e(t.url,c).then(u=>(n-=a,r--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return Zl("fetch"),n-=a,r--,ws(u)}}return k_(t,s)}const Zw=30,Yw=50;function La(t,e,n,r){const s={filename:t,function:e==="<anonymous>"?Jt:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Xw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Qw=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,eA=/\((\S*)(?::(\d+))(?::(\d+))\)/,tA=[Zw,t=>{const e=Xw.exec(t);if(e){const[,r,s,i]=e;return La(r,Jt,+s,+i)}const n=Qw.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const a=eA.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}const[s,i]=Ql(n[1]||Jt,n[2]);return La(i,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],nA=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,rA=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,sA=Zc(...[tA,[Yw,t=>{const e=nA.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=rA.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Jt;return[s,r]=Ql(s,r),La(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]),Ql=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Jt,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},He=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,qs=1024,iA="Breadcrumbs",aA=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:iA,setup(n){e.console&&z_(uA(n)),e.dom&&Lw(cA(n,e.dom)),e.xhr&&Yl(lA(n)),e.fetch&&Ol(dA(n)),e.history&&Na(fA(n)),e.sentry&&n.on("beforeSendEvent",oA(n))}}};function oA(t){return function(n){ae()===t&&Rt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Yt(n)},{event:n})}}function cA(t,e){return function(r){if(ae()!==t)return;let s,i,a=typeof e=="object"?e.serializeAttribute:void 0,c=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;c&&c>qs&&(He&&V.warn(`\`dom.maxStringLength\` cannot exceed ${qs}, but a value of ${c} was configured. Sentry will use ${qs} instead.`),c=qs),typeof a=="string"&&(a=[a]);try{const d=r.event,h=hA(d)?d.target:d;s=Kt(h,{keyAttrs:a,maxStringLength:c}),i=ou(h)}catch{s="<unknown>"}if(s.length===0)return;const u={category:`ui.${r.name}`,message:s};i&&(u.data={"ui.component_name":i}),Rt(u,{event:r.event,name:r.name,global:r.global})}}function uA(t){return function(n){if(ae()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:J_(n.level),message:cu(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${cu(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Rt(r,{input:n.args,level:n.level})}}function lA(t){return function(n){if(ae()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[Mn];if(!r||!s||!i)return;const{method:a,url:c,status_code:u,body:d}=i,h={method:a,url:c,status_code:u},g={xhr:n.xhr,input:d,startTimestamp:r,endTimestamp:s},y={category:"xhr",data:h,type:"http",level:xl(u)};t.emit("beforeOutgoingRequestBreadcrumb",y,g),Rt(y,g)}}function dA(t){return function(n){if(ae()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,a={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",c,a),Rt(c,a)}else{const i=n.response,a={...n.fetchData,status_code:i==null?void 0:i.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i==null||i.status;const c={input:n.args,response:i,startTimestamp:r,endTimestamp:s},u={category:"fetch",data:a,type:"http",level:xl(a.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",u,c),Rt(u,c)}}}function fA(t){return function(n){if(ae()!==t)return;let r=n.from,s=n.to;const i=an(se.location.href);let a=r?an(r):void 0;const c=an(s);a!=null&&a.path||(a=i),i.protocol===c.protocol&&i.host===c.host&&(s=c.relative),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),Rt({category:"navigation",data:{from:r,to:s}})}}function hA(t){return!!t&&!!t.target}const mA=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],gA="BrowserApiErrors",pA=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:gA,setupOnce(){e.setTimeout&&Le(se,"setTimeout",ed),e.setInterval&&Le(se,"setInterval",ed),e.requestAnimationFrame&&Le(se,"requestAnimationFrame",yA),e.XMLHttpRequest&&"XMLHttpRequest"in se&&Le(XMLHttpRequest.prototype,"send",_A);const n=e.eventTarget;n&&(Array.isArray(n)?n:mA).forEach(bA)}}};function ed(t){return function(...e){const n=e[0];return e[0]=xn(n,{mechanism:{data:{function:ut(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function yA(t){return function(e){return t.apply(this,[xn(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ut(t)},handled:!1,type:"instrument"}})])}}function _A(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Le(n,s,function(i){const a={mechanism:{data:{function:s,handler:ut(i)},handled:!1,type:"instrument"}},c=Zi(i);return c&&(a.mechanism.data.handler=ut(c)),xn(i,a)})}),t.apply(this,e)}}function bA(t){var r,s;const n=(r=se[t])==null?void 0:r.prototype;(s=n==null?void 0:n.hasOwnProperty)!=null&&s.call(n,"addEventListener")&&(Le(n,"addEventListener",function(i){return function(a,c,u){try{wA(c)&&(c.handleEvent=xn(c.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ut(c),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[a,xn(c,{mechanism:{data:{function:"addEventListener",handler:ut(c),target:t},handled:!1,type:"instrument"}}),u])}}),Le(n,"removeEventListener",function(i){return function(a,c,u){try{const d=c.__sentry_wrapped__;d&&i.call(this,a,d,u)}catch{}return i.call(this,a,c,u)}}))}function wA(t){return typeof t.handleEvent=="function"}const AA=()=>({name:"BrowserSession",setupOnce(){if(typeof se.document>"u"){He&&V.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}tl({ignoreDuration:!0}),sl(),Na(({from:t,to:e})=>{t!==void 0&&t!==e&&(tl({ignoreDuration:!0}),sl())})}}),vA="GlobalHandlers",SA=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:vA,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(EA(n),td("onerror")),e.onunhandledrejection&&(TA(n),td("onunhandledrejection"))}}};function EA(t){Qc(e=>{const{stackParser:n,attachStacktrace:r}=nd();if(ae()!==t||Pl())return;const{msg:s,url:i,line:a,column:c,error:u}=e,d=IA(va(n,u||s,void 0,r,!1),i,a,c);d.level="error",Qu(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})})}function TA(t){eu(e=>{const{stackParser:n,attachStacktrace:r}=nd();if(ae()!==t||Pl())return;const s=kA(e),i=Ji(s)?xA(s):va(n,s,void 0,r,!0);i.level="error",Qu(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function kA(t){if(Ji(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function xA(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function IA(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],a=i[0]=i[0]||{},c=a.stacktrace=a.stacktrace||{},u=c.frames=c.frames||[],d=r,h=n,g=lt(e)&&e.length>0?e:lr();return u.length===0&&u.push({colno:d,filename:g,function:Jt,in_app:!0,lineno:h}),t}function td(t){He&&V.log(`Global Handler attached: ${t}`)}function nd(){const t=ae();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const OA=()=>({name:"HttpContext",preprocessEvent(t){var a,c;if(!se.navigator&&!se.location&&!se.document)return;const e=((a=t.request)==null?void 0:a.url)||lr(),{referrer:n}=se.document||{},{userAgent:r}=se.navigator||{},s={...(c=t.request)==null?void 0:c.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...t.request,...e&&{url:e},headers:s};t.request=i}}),CA="cause",RA=5,PA="LinkedErrors",MA=(t={})=>{const e=t.limit||RA,n=t.key||CA;return{name:PA,preprocessEvent(r,s,i){const a=i.getOptions();H_(ba,a.stackParser,n,e,r,s)}}};function $A(t){return[L_(),M_(),pA(),aA(),SA(),MA(),Z_(),OA(),AA()]}function NA(t={}){var n;return{...{defaultIntegrations:$A(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=se.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...DA(t)}}function DA(t){const e={};for(const n of Object.getOwnPropertyNames(t)){const r=n;t[r]!==void 0&&(e[r]=t[r])}return e}function LA(){var u;const t=typeof se.window<"u"&&se;if(!t)return!1;const e=t.chrome?"chrome":"browser",n=t[e],r=(u=n==null?void 0:n.runtime)==null?void 0:u.id,s=lr()||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],a=!!r&&se===se.top&&i.some(d=>s.startsWith(`${d}//`)),c=typeof t.nw<"u";return!!r&&!a&&!c}function jA(t={}){const e=NA(t);if(!e.skipBrowserExtensionCheck&&LA()){He&&wn(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}He&&!Il()&&V.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...e,stackParser:ip(e.stackParser||sA),integrations:a_(e),transport:e.transport||Kw};return y_(Rb,n)}const rd=new WeakMap,ja=new Map,sd={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function FA(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:a,tracePropagationTargets:c,onRequestSpanStart:u}={...sd,...e},d=typeof i=="function"?i:y=>!0,h=y=>VA(y,c),g={};n&&(t.addEventProcessor(y=>(y.type==="transaction"&&y.spans&&y.spans.forEach(b=>{if(b.op==="http.client"){const k=ja.get(b.span_id);k&&(b.timestamp=k/1e3,ja.delete(b.span_id))}}),y)),s&&fb(y=>{if(y.response){const b=rd.get(y.response);b&&y.endTimestamp&&ja.set(b,y.endTimestamp)}}),Ol(y=>{const b=sb(y,d,h,g);if(y.response&&y.fetchData.__span&&rd.set(y.response,y.fetchData.__span),b){const k=ad(y.fetchData.url),v=k?an(k).host:void 0;b.setAttributes({"http.url":k,"server.address":v}),a&&id(b),u==null||u(b,{headers:y.headers})}})),r&&Yl(y=>{var k;const b=qA(y,d,h,g);if(b){a&&id(b);let v;try{v=new Headers((k=y.xhr.__sentry_xhr_v3__)==null?void 0:k.request_headers)}catch{}u==null||u(b,{headers:v})}})}function UA(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function id(t){const{url:e}=le(t).data;if(!e||typeof e!="string")return;const n=Er("resource",({entries:r})=>{r.forEach(s=>{UA(s)&&s.name.endsWith(e)&&(BA(s).forEach(a=>t.setAttribute(...a)),setTimeout(n))})})}function st(t=0){return((qe()||performance.timeOrigin)+t)/1e3}function BA(t){const{name:e,version:n}=zl(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),qe()?[...r,["http.request.redirect_start",st(t.redirectStart)],["http.request.fetch_start",st(t.fetchStart)],["http.request.domain_lookup_start",st(t.domainLookupStart)],["http.request.domain_lookup_end",st(t.domainLookupEnd)],["http.request.connect_start",st(t.connectStart)],["http.request.secure_connection_start",st(t.secureConnectionStart)],["http.request.connection_end",st(t.connectEnd)],["http.request.request_start",st(t.requestStart)],["http.request.response_start",st(t.responseStart)],["http.request.response_end",st(t.responseEnd)]]:r}function VA(t,e){const n=lr();if(n){let r,s;try{r=new URL(t,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return e?Zt(r.toString(),e)||i&&Zt(r.pathname,e):i}else{const r=!!t.match(/^\/(?!\/)/);return e?Zt(t,e):r}}function qA(t,e,n,r){const s=t.xhr,i=s==null?void 0:s[Mn];if(!s||s.__sentry_own_request__||!i)return;const{url:a,method:c}=i,u=Ot()&&e(a);if(t.endTimestamp&&u){const v=s.__sentry_xhr_span_id__;if(!v)return;const A=r[v];A&&i.status_code!==void 0&&(bu(A,i.status_code),A.end(),delete r[v]);return}const d=ad(a),h=an(d||a),g=rb(a),y=!!Fe(),b=u&&y?yr({name:`${c} ${g}`,attributes:{url:a,type:"xhr","http.method":c,"http.url":d,"server.address":h==null?void 0:h.host,[ve]:"auto.http.browser",[Qt]:"http.client",...(h==null?void 0:h.search)&&{"http.query":h==null?void 0:h.search},...(h==null?void 0:h.hash)&&{"http.fragment":h==null?void 0:h.hash}}}):new rn;s.__sentry_xhr_span_id__=b.spanContext().spanId,r[s.__sentry_xhr_span_id__]=b,n(a)&&WA(s,Ot()&&y?b:void 0);const k=ae();return k&&k.emit("beforeOutgoingRequestSpan",b,t),b}function WA(t,e){const{"sentry-trace":n,baggage:r}=yl({span:e});n&&HA(t,n,r)}function HA(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader("baggage",n)}catch{}}function ad(t){try{return new URL(t,se.location.origin).href}catch{return}}function zA(){se.document?se.document.addEventListener("visibilitychange",()=>{const t=Fe();if(!t)return;const e=Pe(t);if(se.document.hidden&&e){const n="cancelled",{op:r,status:s}=le(e);He&&V.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||e.setStatus({code:Se,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):He&&V.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const GA=3600,od="sentry_previous_trace",JA="sentry.previous_trace";function cd(t,e){const n=le(e);if(!t)return{spanContext:e.spanContext(),startTimestamp:n.start_timestamp};const r=t.spanContext;return r.traceId===n.trace_id?t:(Date.now()/1e3-t.startTimestamp<=GA&&(He&&V.info(`Adding previous_trace ${r} link to span ${{op:n.op,...e.spanContext()}}`),e.addLink({context:r,attributes:{[Mp]:"previous_trace"}}),e.setAttribute(JA,`${r.traceId}-${r.spanId}-${r.traceFlags===1?1:0}`)),{spanContext:e.spanContext(),startTimestamp:le(e).start_timestamp})}function KA(t){try{se.sessionStorage.setItem(od,JSON.stringify(t))}catch(e){He&&V.warn("Could not store previous trace in sessionStorage",e)}}function ZA(){var t;try{const e=(t=se.sessionStorage)==null?void 0:t.getItem(od);return JSON.parse(e)}catch{return}}const YA="BrowserTracing",XA={...xs,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,linkPreviousTrace:"in-memory",_experiments:{},...sd},QA=(t={})=>{const e=se.document;Yp();const{enableInp:n,enableLongTask:r,enableLongAnimationFrame:s,_experiments:{enableInteractions:i,enableStandaloneClsSpans:a},beforeStartSpan:c,idleTimeout:u,finalTimeout:d,childSpanTimeout:h,markBackgroundSpan:g,traceFetch:y,traceXHR:b,trackFetchStreamPerformance:k,shouldCreateSpanForRequest:v,enableHTTPTimings:A,instrumentPageLoad:T,instrumentNavigation:P,linkPreviousTrace:$,onRequestSpanStart:U}={...XA,...t},F=bw({recordClsStandaloneSpans:a||!1});n&&zw(),s&&ue.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Aw():r&&ww(),i&&vw();const R={name:void 0,source:void 0};function N(_,S){const I=S.op==="pageload",C=c?c(S):S,D=C.attributes||{};S.name!==C.name&&(D[mt]="custom",C.attributes=D),R.name=C.name,R.source=D[mt];const L=Ku(C,{idleTimeout:u,finalTimeout:d,childSpanTimeout:h,disableAutoFinish:I,beforeSpanEnd:O=>{F(),xw(O,{recordClsOnPageloadSpan:!a}),dd(_,void 0);const W=ge(),B=W.getPropagationContext();W.setPropagationContext({...B,traceId:L.spanContext().traceId,sampled:tn(L),dsc:Ct(O)})}});dd(_,L);function q(){e&&["interactive","complete"].includes(e.readyState)&&_.emit("idleSpanEnableAutoFinish",L)}I&&e&&(e.addEventListener("readystatechange",()=>{q()}),q())}return{name:YA,afterAllSetup(_){let S=lr();function I(){const C=Ws(_);C&&!le(C).timestamp&&(He&&V.log(`[Tracing] Finishing current active span with op: ${le(C).op}`),C.end())}if(_.on("startNavigationSpan",C=>{ae()===_&&(I(),ht().setPropagationContext({traceId:It(),sampleRand:Math.random()}),ge().setPropagationContext({traceId:It(),sampleRand:Math.random()}),N(_,{op:"navigation",...C}))}),_.on("startPageLoadSpan",(C,D={})=>{if(ae()!==_)return;I();const L=D.sentryTrace||ud("sentry-trace"),q=D.baggage||ud("baggage"),O=qp(L,q);ge().setPropagationContext(O),N(_,{op:"pageload",...C})}),$!=="off"){let C;_.on("spanStart",D=>{if(Pe(D)===D)if($==="session-storage"){const L=cd(ZA(),D);KA(L)}else C=cd(C,D)})}if(se.location){if(T){const C=qe();ev(_,{name:se.location.pathname,startTime:C?C/1e3:void 0,attributes:{[mt]:"url",[ve]:"auto.pageload.browser"}})}P&&Na(({to:C,from:D})=>{if(D===void 0&&(S==null?void 0:S.indexOf(C))!==-1){S=void 0;return}D!==C&&(S=void 0,tv(_,{name:se.location.pathname,attributes:{[mt]:"url",[ve]:"auto.navigation.browser"}}))})}g&&zA(),i&&nv(_,u,d,h,R),n&&Jw(),FA(_,{traceFetch:y,traceXHR:b,trackFetchStreamPerformance:k,tracePropagationTargets:_.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:v,enableHTTPTimings:A,onRequestSpanStart:U})}}};function ev(t,e,n){return t.emit("startPageLoadSpan",e,n),ge().setTransactionName(e.name),Ws(t)}function tv(t,e){return t.emit("startNavigationSpan",e),ge().setTransactionName(e.name),Ws(t)}function ud(t){const e=se.document,n=e==null?void 0:e.querySelector(`meta[name=${t}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function nv(t,e,n,r,s){const i=se.document;let a;const c=()=>{const u="ui.action.click",d=Ws(t);if(d){const h=le(d).op;if(["navigation","pageload"].includes(h)){He&&V.warn(`[Tracing] Did not create ${u} span because a pageload or navigation span is in progress.`);return}}if(a&&(a.setAttribute(ea,"interactionInterrupted"),a.end(),a=void 0),!s.name){He&&V.warn(`[Tracing] Did not create ${u} transaction because _latestRouteName is missing.`);return}a=Ku({name:s.name,op:u,attributes:{[mt]:s.source||"url"}},{idleTimeout:e,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",c,{once:!1,capture:!0})}const ld="_sentry_idleSpan";function Ws(t){return t[ld]}function dd(t,e){je(t,ld,e)}function Y(t,e=null,n="log"){const s=`[${new Date().toLocaleTimeString()}] ${t}`;switch(n){case"warn":console.warn(s,e||"");break;case"error":console.error(s,e||"");break;default:console.log(s,e||"")}}const rv={enableInDevelopment:!0,dsn:"https://1c39040dcef106341c0101bfc88d6345@o4507294802247680.ingest.de.sentry.io/4509116073705552"};function sv(t){const e=t;return e._sentryReported=!0,e}function Pt(t,e){return $n(t,e),sv(t)}async function iv(t,e){const r="production";Y(`Initializing Sentry for ${e} in ${r} environment`);const s=await ss.sendMessage("getManifest",void 0);jA({dsn:rv.dsn,release:`${s.name}@${s.version}`,environment:r,integrations:[QA()],tracesSampleRate:.05,sampleRate:.2,enabled:!0,debug:void 0,beforeSend(i){return Y("Sending event to Sentry:",i),i},allowUrls:["chrome-extension://","localhost","127.0.0.1"]}),sn("context",e),sn("environment",r),await hd(t),Hs("session",`Sentry initialized for ${e} context`,{environment:r,context:e,timestamp:new Date().toISOString()}),Y(`Sentry initialized for ${e} context in ${r} environment`)}function $n(t,e){const r="production";Y(`Capturing exception for Sentry (${r}):`,t);const s={...e,environment:r,is_dev:void 0,timestamp:new Date().toISOString()};e!=null&&e.context&&sn("error_context",e.context),e!=null&&e.operation&&sn("operation",e.operation),e!=null&&e.recordingMode&&sn("recording_mode",e.recordingMode),e!=null&&e.videoId&&sn("video_id",e.videoId);const i={extra:s};e!=null&&e.fingerprint?i.fingerprint=e.fingerprint:e!=null&&e.context&&(e!=null&&e.operation)&&(i.fingerprint=[e.context,e.operation,t instanceof Error?t.name:"unknown_error"],e.recordingMode&&i.fingerprint.push(`mode:${e.recordingMode}`)),Hs("error",`Error captured: ${t instanceof Error?t.message:"Unknown error"}`,{context:e==null?void 0:e.context,operation:e==null?void 0:e.operation},"error"),Xu(t,i),Xy().then(()=>{Y(`Sentry events flushed (${r})`)})}function av(t){return Y("Sentry test skipped - not running in production"),!1}function Fa(t,e){return{context:"background",operation:t,...e}}function fd(t,e){return{context:"uploadVideo",operation:t,...e}}async function hd(t){try{t?(el({id:t.id,email_domain:t.email?t.email.split("@")[1]:void 0,created_at:t.created_at}),t.app_metadata&&sn("user.provider",t.app_metadata.provider)):el(null)}catch(e){Y("Error setting Sentry user context:",e)}}function Hs(t,e,n,r="info"){try{Rt({category:t,message:e,data:n,level:r,timestamp:Date.now()/1e3})}catch(s){Y("Error adding Sentry breadcrumb:",s)}}function Mt(t,e,n){return{...n,fingerprint:e}}const kr=Rh.create({prefixUrl:gi,credentials:"omit",throwHttpErrors:!1,timeout:3e4,hooks:{beforeRequest:[async t=>{if(!t.headers.get("Authorization")){const e=await qc.getSession();if(!(e!=null&&e.access_token))throw console.error("[error] no session found. url: ",t.url),new Error("No session found",{cause:{url:t.url,headers:t.headers}});t.headers.set("Authorization",`Bearer ${e.access_token}`)}}],beforeRetry:[({error:t,retryCount:e})=>{console.warn(`Retrying request attempt #${e}. Error:`,t)}]}}),md=3,xr={createDirectUploadUrl:async t=>{const e=await kr.post("api/extension/direct-upload",{json:t}).json();return Ir(e,"Error creating upload url")},getAudioUploadUrl:async t=>{const e=await kr.post("api/extension/get-audio-upload-url",{json:t}).json();return Ir(e,"Error getting audio upload url")},transcribe:async t=>{try{const{authToken:e,...n}=t,r=await kr.post("api/extension/transcribe",{json:n,headers:Ua(e),retry:md}).json();return Ir(r,"Error initiating transcription")}catch(e){throw await Wc("transcribe",t,e instanceof Error?e.message:String(e),t.videoId),e}},saveSpeakersStats:async t=>{try{const{authToken:e,...n}=t,r=await kr.post("api/extension/speakers-stats",{json:n,headers:Ua(e),retry:md}).json();return Ir(r,"Error saving speakers stats")}catch(e){throw await Wc("speakers-stats",t,e instanceof Error?e.message:String(e),t.videoId),e}},upgradePlan:async t=>{try{const{authToken:e}=t,n=await kr.post("api/extension/upgrade-plan",{json:{},headers:Ua(e)}).json();return Ir(n,"Error upgrading plan")}catch(e){throw e}}};function Ua(t){return{Authorization:t?`Bearer ${t}`:void 0}}function Ir(t,e){if(t.error){const n=new Error(`${e}: ${t.error.message}`);throw $n(n,{context:"messaging",operation:"apiRequest",error_code:t.error.code,error_message:t.error.message}),n}return t.data}const ov=[{type:"auto",label:"Auto",description:"Klu will automatically detect the meeting type",exampleInsights:[]},{type:"consulting_meeting",label:"Consulting Meeting",description:"A session where expert advice is provided to a client or team, often involving problem-solving or strategic recommendations.",exampleInsights:["Recommendations: Optimize workflow","Issues identified: Resource allocation","Solutions proposed: Hire 2 contractors","Client feedback: Positive on timeline"]},{type:"customer_meeting",label:"Customer Meeting",description:"A discussion with a customer to address their needs, review services, or build relationships, often involving account updates or feedback.",exampleInsights:["Customer satisfaction: 8/10","Needs raised: Faster support","Service updates: New feature rollout","Next steps: Send proposal by Friday"]},{type:"one_on_one",label:"One-on-One",description:"A private meeting between two individuals, typically a manager and employee, focused on performance reviews, goal setting, or personal feedback.",exampleInsights:["Goals assigned: 3 new tasks for Q2","Feedback given: Improve time management","Performance rating: 4/5","Action items: Schedule follow-up in 2 weeks"]},{type:"partner_meeting",label:"Partner Meeting",description:"A meeting with business partners to discuss collaboration, joint ventures, or partnership progress and agreements.",exampleInsights:["Collaboration status: On track","Agreement updates: Signed Q2 terms","Joint goals: Increase sales by 20%","Action items: Share marketing plan"]},{type:"podcast",label:"Podcast",description:"A recorded or live discussion, often for training or informational purposes, typically not interactive like traditional meetings.",exampleInsights:["Topics covered: Industry trends","Duration: 45 minutes","Key points: 3 takeaways shared","Audience: Internal team"]},{type:"product_demo",label:"Product Demo",description:"A presentation showcasing a product's features and benefits, typically to potential customers or stakeholders.",exampleInsights:["Features shown: 5 key highlights","Audience reaction: Positive on UX","Questions asked: Pricing details","Follow-up: Schedule trial session"]},{type:"product_discussion",label:"Product Discussion",description:"A session to review product development, features, or roadmap, typically involving product managers, designers, or developers.",exampleInsights:["Features reviewed: 2 in progress","Roadmap update: Q3 launch","Challenges: Resource constraints","Next steps: Prioritize bug fixes"]},{type:"sales_follow_up",label:"Sales Follow-Up",description:"A meeting to revisit a previous sales discussion, address questions, or finalize a deal with a customer.",exampleInsights:["Questions answered: 3 pricing queries","Deal status: 90% closed","Obstacles: Budget approval","Action items: Finalize contract"]},{type:"sales_intro",label:"Sales Intro",description:"An initial meeting to introduce a product, service, or company to a prospective customer, setting the stage for further discussions.",exampleInsights:["Customer needs: Scalability","Intro outcome: Interest expressed","Product mentioned: Premium plan","Follow-up: Demo scheduled"]},{type:"sales_pitch",label:"Sales Pitch",description:"A persuasive presentation to convince a potential customer or client to purchase a product or service.",exampleInsights:["Objections raised: Cost concerns","Interest level: High","Key selling points: Efficiency gains","Next steps: Send quote"]},{type:"team_meeting",label:"Team Meeting",description:"A collaborative session involving multiple team members to discuss project plans, brainstorm ideas, or align on goals and strategies.",exampleInsights:["Ideas proposed: 4 new features","Decisions made: Prioritize UI redesign","Goals set: Launch beta by May","Action items: Assign design tasks"]},{type:"team_updates",label:"Team Updates",description:"A brief meeting where team members share progress, updates, or status reports on ongoing projects or tasks.",exampleInsights:["Project A: 75% complete","Team member updates: 5/6 reported","Delays noted: Backend integration","Next milestone: April 15"]},{type:"technical_discussion",label:"Technical Discussion",description:"A meeting focused on technical topics, such as system architecture, troubleshooting, or development challenges, often involving engineers or specialists.",exampleInsights:["Issues discussed: API latency","Solutions proposed: Caching","Tech decisions: Adopt microservices","Action items: Test in sandbox"]},{type:"user_interview",label:"User Interview",description:"A research-focused discussion with a user to gather insights, feedback, or experiences about a product or service.",exampleInsights:["Feedback: UI too complex","User pain points: Slow load times","Suggestions: Add dark mode","Sentiment: Mixed"]},{type:"work_interview",label:"Work Interview",description:"A formal meeting to assess a candidate's qualifications, skills, and fit for a job role within the organization.",exampleInsights:["Skills assessed: Coding, teamwork","Candidate rating: 4.5/5","Fit score: Strong cultural match","Next steps: Second interview"]},{type:"other",label:"Other",description:"A meeting that does not fit into any of the other categories. Can be a test meeting or a meeting that is not yet supported.",exampleInsights:[]}],cv={GOOGLE_MEET:!0,TEAMS:!0,ZOOM:!1,OTHER:!1},zs={auto:{label:"Auto",countries:["Klu will automatically detect the language"],countryEmojis:[]},af:{label:"Afrikaans",countries:["South Africa","Namibia"],countryEmojis:["🇿🇦","🇳🇦"]},sq:{label:"Albanian",countries:["Albania","Kosovo","North Macedonia"],countryEmojis:["🇦🇱","🇽🇰","🇲🇰"]},am:{label:"Amharic",countries:["Ethiopia"],countryEmojis:["🇪🇹"]},ar:{label:"Arabic",countries:["Saudi Arabia","Egypt","Algeria"],countryEmojis:["🇸🇦","🇪🇬","🇩🇿"]},hy:{label:"Armenian",countries:["Armenia","Georgia"],countryEmojis:["🇦🇲","🇬🇪"]},as:{label:"Assamese",countries:["India"],countryEmojis:["🇮🇳"]},ast:{label:"Asturian",countries:["Spain"],countryEmojis:["🇪🇸"]},az:{label:"Azerbaijani",countries:["Azerbaijan","Iran"],countryEmojis:["🇦🇿","🇮🇷"]},ms:{label:"Bahasa Melayu",countries:["Malaysia","Indonesia","Brunei"],countryEmojis:["🇲🇾","🇮🇩","🇧🇳"]},id:{label:"Bahasa Indonesia",countries:["Indonesia"],countryEmojis:["🇮🇩"]},ba:{label:"Bashkir",countries:["Russia"],countryEmojis:["🇷🇺"]},eu:{label:"Basque",countries:["Spain","France"],countryEmojis:["🇪🇸","🇫🇷"]},be:{label:"Belarusian",countries:["Belarus","Russia"],countryEmojis:["🇧🇾","🇷🇺"]},bn:{label:"Bengali",countries:["Bangladesh","India"],countryEmojis:["🇧🇩","🇮🇳"]},bs:{label:"Bosnian",countries:["Bosnia and Herzegovina","Serbia"],countryEmojis:["🇧🇦","🇷🇸"]},br:{label:"Breton",countries:["France"],countryEmojis:["🇫🇷"]},bg:{label:"Bulgarian",countries:["Bulgaria"],countryEmojis:["🇧🇬"]},my:{label:"Burmese",countries:["Myanmar"],countryEmojis:["🇲🇲"]},ca:{label:"Catalan",countries:["Spain","Andorra","France"],countryEmojis:["🇪🇸","🇦🇩","🇫🇷"]},ceb:{label:"Cebuano",countries:["Philippines"],countryEmojis:["🇵🇭"]},zh:{label:"Chinese",countries:["China","Taiwan","Singapore"],countryEmojis:["🇨🇳","🇹🇼","🇸🇬"]},hr:{label:"Croatian",countries:["Croatia","Bosnia and Herzegovina"],countryEmojis:["🇭🇷","🇧🇦"]},cs:{label:"Czech",countries:["Czech Republic","Slovakia"],countryEmojis:["🇨🇿","🇸🇰"]},da:{label:"Danish",countries:["Denmark","Greenland"],countryEmojis:["🇩🇰","🇬🇱"]},nl:{label:"Dutch",countries:["Netherlands","Belgium","Suriname"],countryEmojis:["🇳🇱","🇧🇪","🇸🇷"]},en:{label:"English",countries:["United Kingdom","United States","Australia"],countryEmojis:["🇬🇧","🇺🇸","🇦🇺"]},et:{label:"Estonian",countries:["Estonia"],countryEmojis:["🇪🇪"]},fo:{label:"Faroese",countries:["Faroe Islands"],countryEmojis:["🇫🇴"]},fi:{label:"Finnish",countries:["Finland","Sweden"],countryEmojis:["🇫🇮","🇸🇪"]},fr:{label:"French",countries:["France","Belgium","Canada"],countryEmojis:["🇫🇷","🇧🇪","🇨🇦"]},fy:{label:"Western Frisian",countries:["Netherlands"],countryEmojis:["🇳🇱"]},ff:{label:"Fulah",countries:["Senegal","Guinea","Mali"],countryEmojis:["🇸🇳","🇬🇳","🇲🇱"]},gd:{label:"Gaelic",countries:["United Kingdom"],countryEmojis:["🇬🇧"]},gl:{label:"Galician",countries:["Spain"],countryEmojis:["🇪🇸"]},lg:{label:"Ganda",countries:["Uganda"],countryEmojis:["🇺🇬"]},ka:{label:"Georgian",countries:["Georgia"],countryEmojis:["🇬🇪"]},de:{label:"German",countries:["Germany","Austria","Switzerland"],countryEmojis:["🇩🇪","🇦🇹","🇨🇭"]},el:{label:"Greek",countries:["Greece","Cyprus"],countryEmojis:["🇬🇷","🇨🇾"]},gu:{label:"Gujarati",countries:["India"],countryEmojis:["🇮🇳"]},ht:{label:"Haitian",countries:["Haiti"],countryEmojis:["🇭🇹"]},ha:{label:"Hausa",countries:["Nigeria","Niger","Ghana"],countryEmojis:["🇳🇬","🇳🇪","🇬🇭"]},haw:{label:"Hawaiian",countries:["United States"],countryEmojis:["🇺🇸"]},he:{label:"Hebrew",countries:["Israel"],countryEmojis:["🇮🇱"]},hi:{label:"Hindi",countries:["India"],countryEmojis:["🇮🇳"]},hu:{label:"Hungarian",countries:["Hungary","Romania","Slovakia"],countryEmojis:["🇭🇺","🇷🇴","🇸🇰"]},is:{label:"Icelandic",countries:["Iceland"],countryEmojis:["🇮🇸"]},ig:{label:"Igbo",countries:["Nigeria"],countryEmojis:["🇳🇬"]},ilo:{label:"Iloko",countries:["Philippines"],countryEmojis:["🇵🇭"]},ga:{label:"Irish",countries:["Ireland"],countryEmojis:["🇮🇪"]},it:{label:"Italian",countries:["Italy","Switzerland"],countryEmojis:["🇮🇹","🇨🇭"]},ja:{label:"Japanese",countries:["Japan"],countryEmojis:["🇯🇵"]},jv:{label:"Javanese",countries:["Indonesia"],countryEmojis:["🇮🇩"]},kn:{label:"Kannada",countries:["India"],countryEmojis:["🇮🇳"]},kk:{label:"Kazakh",countries:["Kazakhstan","Russia"],countryEmojis:["🇰🇿","🇷🇺"]},km:{label:"Khmer",countries:["Cambodia"],countryEmojis:["🇰🇭"]},ko:{label:"Korean",countries:["South Korea","North Korea"],countryEmojis:["🇰🇷","🇰🇵"]},lo:{label:"Lao",countries:["Laos"],countryEmojis:["🇱🇦"]},la:{label:"Latin"},lv:{label:"Latvian",countries:["Latvia"],countryEmojis:["🇱🇻"]},ln:{label:"Lingala",countries:["Congo"],countryEmojis:["🇨🇩"]},lt:{label:"Lithuanian",countries:["Lithuania"],countryEmojis:["🇱🇹"]},lb:{label:"Luxembourgish",countries:["Luxembourg"],countryEmojis:["🇱🇺"]},mk:{label:"Macedonian",countries:["North Macedonia"],countryEmojis:["🇲🇰"]},mg:{label:"Malagasy",countries:["Madagascar"],countryEmojis:["🇲🇬"]},ml:{label:"Malayalam",countries:["India"],countryEmojis:["🇮🇳"]},mt:{label:"Maltese",countries:["Malta"],countryEmojis:["🇲🇹"]},mi:{label:"Maori",countries:["New Zealand"],countryEmojis:["🇳🇿"]},mr:{label:"Marathi",countries:["India"],countryEmojis:["🇮🇳"]},mo:{label:"Moldovan",countries:["Moldova"],countryEmojis:["🇲🇩"]},mn:{label:"Mongolian",countries:["Mongolia","China"],countryEmojis:["🇲🇳","🇨🇳"]},ne:{label:"Nepali",countries:["Nepal","India"],countryEmojis:["🇳🇵","🇮🇳"]},no:{label:"Norwegian",countries:["Norway"],countryEmojis:["🇳🇴"]},nn:{label:"Nynorsk",countries:["Norway"],countryEmojis:["🇳🇴"]},oc:{label:"Occitan",countries:["France","Spain"],countryEmojis:["🇫🇷","🇪🇸"]},or:{label:"Oriya",countries:["India"],countryEmojis:["🇮🇳"]},ps:{label:"Pashto",countries:["Afghanistan","Pakistan"],countryEmojis:["🇦🇫","🇵🇰"]},fa:{label:"Persian",countries:["Iran","Afghanistan","Tajikistan"],countryEmojis:["🇮🇷","🇦🇫","🇹🇯"]},pl:{label:"Polish",countries:["Poland"],countryEmojis:["🇵🇱"]},pt:{label:"Portuguese",countries:["Portugal","Brazil","Angola"],countryEmojis:["🇵🇹","🇧🇷","🇦🇴"]},pa:{label:"Punjabi",countries:["India","Pakistan"],countryEmojis:["🇮🇳","🇵🇰"]},ro:{label:"Romanian",countries:["Romania","Moldova"],countryEmojis:["🇷🇴","🇲🇩"]},ru:{label:"Russian",countries:["Russia","Ukraine","Belarus"],countryEmojis:["🇷🇺","🇺🇦","🇧🇾"]},sa:{label:"Sanskrit"},sr:{label:"Serbian",countries:["Serbia","Bosnia and Herzegovina","Montenegro"],countryEmojis:["🇷🇸","🇧🇦","🇲🇪"]},sn:{label:"Shona",countries:["Zimbabwe","South Africa"],countryEmojis:["🇿🇼","🇿🇦"]},sd:{label:"Sindhi",countries:["Pakistan","India"],countryEmojis:["🇵🇰","🇮🇳"]},si:{label:"Sinhalese",countries:["Sri Lanka"],countryEmojis:["🇱🇰"]},sk:{label:"Slovak",countries:["Slovakia","Czech Republic"],countryEmojis:["🇸🇰","🇨🇿"]},sl:{label:"Slovenian",countries:["Slovenia"],countryEmojis:["🇸🇮"]},so:{label:"Somali",countries:["Somalia","Ethiopia","Kenya"],countryEmojis:["🇸🇴","🇪🇹","🇰🇪"]},es:{label:"Spanish",countries:["Spain","Mexico","Argentina"],countryEmojis:["🇪🇸","🇲🇽","🇦🇷"]},su:{label:"Sundanese",countries:["Indonesia"],countryEmojis:["🇮🇩"]},sw:{label:"Swahili",countries:["Tanzania","Kenya","Uganda"],countryEmojis:["🇹🇿","🇰🇪","🇺🇬"]},ss:{label:"Swati",countries:["Eswatini","South Africa"],countryEmojis:["🇸🇿","🇿🇦"]},sv:{label:"Swedish",countries:["Sweden","Finland"],countryEmojis:["🇸🇪","🇫🇮"]},tl:{label:"Tagalog",countries:["Philippines"],countryEmojis:["🇵🇭"]},tg:{label:"Tajik",countries:["Tajikistan"],countryEmojis:["🇹🇯"]},ta:{label:"Tamil",countries:["India","Sri Lanka","Singapore"],countryEmojis:["🇮🇳","🇱🇰","🇸🇬"]},tt:{label:"Tatar",countries:["Russia"],countryEmojis:["🇷🇺"]},te:{label:"Telugu",countries:["India"],countryEmojis:["🇮🇳"]},th:{label:"Thai",countries:["Thailand"],countryEmojis:["🇹🇭"]},bo:{label:"Tibetan",countries:["China"],countryEmojis:["🇨🇳"]},tn:{label:"Tswana",countries:["Botswana","South Africa"],countryEmojis:["🇧🇼","🇿🇦"]},tr:{label:"Turkish",countries:["Turkey","Cyprus"],countryEmojis:["🇹🇷","🇨🇾"]},tk:{label:"Turkmen",countries:["Turkmenistan"],countryEmojis:["🇹🇲"]},uk:{label:"Ukrainian",countries:["Ukraine"],countryEmojis:["🇺🇦"]},ur:{label:"Urdu",countries:["Pakistan","India"],countryEmojis:["🇵🇰","🇮🇳"]},uz:{label:"Uzbek",countries:["Uzbekistan"],countryEmojis:["🇺🇿"]},vi:{label:"Vietnamese",countries:["Vietnam"],countryEmojis:["🇻🇳"]},cy:{label:"Welsh",countries:["United Kingdom"],countryEmojis:["🇬🇧"]},wo:{label:"Wolof",countries:["Senegal","Gambia"],countryEmojis:["🇸🇳","🇬🇲"]},xh:{label:"Xhosa",countries:["South Africa"],countryEmojis:["🇿🇦"]},yi:{label:"Yiddish"},yo:{label:"Yoruba",countries:["Nigeria","Benin"],countryEmojis:["🇳🇬","🇧🇯"]},zu:{label:"Zulu",countries:["South Africa"],countryEmojis:["🇿🇦"]}};Object.keys(zs).map(t=>{var n;const e=t;return{value:e,label:zs[e].label,description:(n=zs[e].countries)==null?void 0:n.join(", ")}});const Or={GOOGLE_MEET:{origin:"https://meet.google.com",codePattern:/^[a-z0-9]{3}-[a-z0-9]{4}-[a-z0-9]{3}$/i},ZOOM:{origins:["https://app.zoom.us"],pathPatterns:[/^\/wc\//,/^\/j\//,/^\/s\//,/^\/meeting\//]},TEAMS:{origins:["https://teams.live.com","https://teams.microsoft.com"]}};function uv(t){try{const e=new URL(t);if(e.origin!==Or.GOOGLE_MEET.origin)return!1;if(e.pathname==="/new")return!0;const n=e.pathname.slice(1);return Or.GOOGLE_MEET.codePattern.test(n)}catch{return!1}}function lv(t){try{const e=new URL(t);return Or.ZOOM.origins.includes(e.origin)?Or.ZOOM.pathPatterns.some(r=>r.test(e.pathname)):!1}catch{return!1}}function dv(t){try{const e=new URL(t);return Or.TEAMS.origins.includes(e.origin)}catch{return!1}}function fv(t){return t?uv(t)?"GOOGLE_MEET":lv(t)?"ZOOM":dv(t)?"TEAMS":null:null}function hv(t){return fv(t)!==null}var Gs={exports:{}},mv=Gs.exports,gd;function gv(){return gd||(gd=1,function(t,e){(function(n,r){r(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:mv,function(n){var r,s;if(!((s=(r=globalThis.chrome)==null?void 0:r.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",a=c=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(S,I=void 0){super(I),this.createItem=S}get(S){return this.has(S)||this.set(S,this.createItem(S)),super.get(S)}}const h=_=>_&&typeof _=="object"&&typeof _.then=="function",g=(_,S)=>(...I)=>{c.runtime.lastError?_.reject(new Error(c.runtime.lastError.message)):S.singleCallbackArg||I.length<=1&&S.singleCallbackArg!==!1?_.resolve(I[0]):_.resolve(I)},y=_=>_==1?"argument":"arguments",b=(_,S)=>function(C,...D){if(D.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${D.length}`);if(D.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${D.length}`);return new Promise((L,q)=>{if(S.fallbackToNoCallback)try{C[_](...D,g({resolve:L,reject:q},S))}catch(O){console.warn(`${_} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,O),C[_](...D),S.fallbackToNoCallback=!1,S.noCallback=!0,L()}else S.noCallback?(C[_](...D),L()):C[_](...D,g({resolve:L,reject:q},S))})},k=(_,S,I)=>new Proxy(S,{apply(C,D,L){return I.call(D,_,...L)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const A=(_,S={},I={})=>{let C=Object.create(null),D={has(q,O){return O in _||O in C},get(q,O,W){if(O in C)return C[O];if(!(O in _))return;let B=_[O];if(typeof B=="function")if(typeof S[O]=="function")B=k(_,_[O],S[O]);else if(v(I,O)){let H=b(O,I[O]);B=k(_,_[O],H)}else B=B.bind(_);else if(typeof B=="object"&&B!==null&&(v(S,O)||v(I,O)))B=A(B,S[O],I[O]);else if(v(I,"*"))B=A(B,S[O],I["*"]);else return Object.defineProperty(C,O,{configurable:!0,enumerable:!0,get(){return _[O]},set(H){_[O]=H}}),B;return C[O]=B,B},set(q,O,W,B){return O in C?C[O]=W:_[O]=W,!0},defineProperty(q,O,W){return Reflect.defineProperty(C,O,W)},deleteProperty(q,O){return Reflect.deleteProperty(C,O)}},L=Object.create(_);return new Proxy(L,D)},T=_=>({addListener(S,I,...C){S.addListener(_.get(I),...C)},hasListener(S,I){return S.hasListener(_.get(I))},removeListener(S,I){S.removeListener(_.get(I))}}),P=new d(_=>typeof _!="function"?_:function(I){const C=A(I,{},{getContent:{minArgs:0,maxArgs:0}});_(C)}),$=new d(_=>typeof _!="function"?_:function(I,C,D){let L=!1,q,O=new Promise(oe=>{q=function(ee){L=!0,oe(ee)}}),W;try{W=_(I,C,q)}catch(oe){W=Promise.reject(oe)}const B=W!==!0&&h(W);if(W!==!0&&!B&&!L)return!1;const H=oe=>{oe.then(ee=>{D(ee)},ee=>{let Be;ee&&(ee instanceof Error||typeof ee.message=="string")?Be=ee.message:Be="An unexpected error occurred",D({__mozWebExtensionPolyfillReject__:!0,message:Be})}).catch(ee=>{console.error("Failed to send onMessage rejected reply",ee)})};return H(B?W:O),!0}),U=({reject:_,resolve:S},I)=>{c.runtime.lastError?c.runtime.lastError.message===i?S():_(new Error(c.runtime.lastError.message)):I&&I.__mozWebExtensionPolyfillReject__?_(new Error(I.message)):S(I)},F=(_,S,I,...C)=>{if(C.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${C.length}`);if(C.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${C.length}`);return new Promise((D,L)=>{const q=U.bind(null,{resolve:D,reject:L});C.push(q),I.sendMessage(...C)})},R={devtools:{network:{onRequestFinished:T(P)}},runtime:{onMessage:T($),onMessageExternal:T($),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},N={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":N},services:{"*":N},websites:{"*":N}},A(c,R,u)};n.exports=a(chrome)}else n.exports=globalThis.browser})}(Gs)),Gs.exports}var pv=gv();const pd=bt(pv);/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ba,yd;function yv(){return yd||(yd=1,Ba=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),Ba}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */var Va,_d;function _v(){if(_d)return Va;_d=1;const t=yv();Va=function(i,a,c){if(t(c)||(c={default:c}),!s(i))return typeof c.default<"u"?c.default:i;typeof a=="number"&&(a=String(a));const u=Array.isArray(a),d=typeof a=="string",h=c.separator||".",g=c.joinChar||(typeof h=="string"?h:".");if(!d&&!u)return i;if(d&&a in i)return r(a,i,c)?i[a]:c.default;let y=u?a:n(a,h,c),b=y.length,k=0;do{let v=y[k];for(typeof v=="number"&&(v=String(v));v&&v.slice(-1)==="\\";)v=e([v.slice(0,-1),y[++k]||""],g,c);if(v in i){if(!r(v,i,c))return c.default;i=i[v]}else{let A=!1,T=k+1;for(;T<b;)if(v=e([v,y[T++]],g,c),A=v in i){if(!r(v,i,c))return c.default;i=i[v],k=T-1;break}if(!A)return c.default}}while(++k<b&&s(i));return k===b?i:c.default};function e(i,a,c){return typeof c.join=="function"?c.join(i):i[0]+a+i[1]}function n(i,a,c){return typeof c.split=="function"?c.split(i):i.split(a)}function r(i,a,c){return typeof c.isValid=="function"?c.isValid(i,a):!0}function s(i){return t(i)||Array.isArray(i)||typeof i=="function"}return Va}var bv=_v();const qa=bt(bv);var bd=(t,e,n)=>new Promise((r,s)=>{var i=u=>{try{c(n.next(u))}catch(d){s(d)}},a=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,a);c((n=n.apply(t,e)).next())});function wv(){if(!Av())return!1;const t=pd.runtime.getManifest();return t.background?t.manifest_version===3?Ev():Sv():!1}function Av(){var t;return!!((t=pd.runtime)!=null&&t.id)}var vv=["/_generated_background_page.html"];function Sv(){return typeof window<"u"&&vv.includes(location.pathname)}function Ev(){return typeof window>"u"}function wd(t,e,n){let r;const s=`proxy-service.${t}`,{onMessage:i,sendMessage:a}=rs(n);function c(u){const d=()=>{},h=new Proxy(d,{apply(g,y,b){return bd(this,null,function*(){return yield a(s,{path:u,args:b})})},get(g,y,b){return y==="__proxy"||typeof y=="symbol"?Reflect.get(g,y,b):c(u==null?y:`${u}.${y}`)}});return h.__proxy=!0,h}return[function(...d){return r=e(...d),i(s,({data:h})=>{const g=h.path==null?r:qa(r??{},h.path);if(g)return Promise.resolve(g.bind(r)(...h.args))}),r},function(){if(!wv())return c();if(r==null)throw Error(`Failed to get an instance of ${t}: in background, but registerService has not been called. Did you forget to call registerService?`);return r}]}function Ad(t){function e(n){const r=()=>{},s=new Proxy(r,{apply(i,a,c){return bd(this,null,function*(){const u=yield t,d=n!=null&&n.parentPath?qa(u,n.parentPath):u;return(n?qa(u,n.propertyPath):u).apply(d,c)})},get(i,a,c){return a==="__proxy"||typeof a=="symbol"?Reflect.get(i,a,c):e({propertyPath:n==null?a:`${n.propertyPath}.${a}`,parentPath:n==null?void 0:n.propertyPath})}});return s.__proxy=!0,s}return e()}var Tv=Object.defineProperty,kv=(t,e,n)=>e in t?Tv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xe=(t,e,n)=>kv(t,typeof e!="symbol"?e+"":e,n),Cr=class{constructor(t){xe(this,"message"),xe(this,"code"),this.message=t.message,this.code=t.code}toString(){return`${this.message} (code: ${this.code})`}toJSON(){return{message:this.message,code:this.code}}},xv=t=>{if(!t.email&&!t.id)throw new Cr({message:"Email or id is required",code:"invalid_params"})},Ue=(t,e,n)=>(e||(e=new it),t({instance:e,...n})),vd=t=>({get:e=>Ue(Iv,t,{id:e}),create:e=>Ue(Ov,t,{params:e}),update:(e,n)=>Ue(Cv,t,{id:e,params:n}),delete:e=>Ue(Rv,t,{id:e}),billingPortal:(e,n)=>Ue(Pv,t,{id:e,params:n})}),Iv=async({instance:t,id:e})=>e?t.get(`/customers/${e}`):{data:null,error:new Cr({message:"Customer ID is required",code:"CUSTOMER_ID_REQUIRED"})},Ov=async({instance:t,params:e})=>(xv(e||{}),t.post("/customers",e)),Cv=async({instance:t,id:e,params:n})=>t.post(`/customers/${e}`,n),Rv=async({instance:t,id:e})=>t.delete(`/customers/${e}`),Pv=async({instance:t,id:e,params:n})=>t.post(`/customers/${e}/billing_portal`,n),Sd=async({instance:t,params:e})=>t.post("/attach",e),Ed=async({instance:t,params:e})=>t.post("/entitled",e),Td=async({instance:t,params:e})=>t.post("/events",e),kd=async({instance:t,params:e})=>t.post("/track",e),xd=async({instance:t,params:e})=>t.post("/usage",e),Id=async({instance:t,params:e})=>t.post("/check",e),Od=t=>({get:e=>Ue(Mv,t,{id:e}),create:e=>Ue($v,t,{params:e})}),Mv=async({instance:t,id:e})=>t.get(`/products/${e}`),$v=async({instance:t,params:e})=>t.post("/products",e),it=class{constructor(t={}){xe(this,"secretKey"),xe(this,"publishableKey"),xe(this,"level"),xe(this,"headers"),xe(this,"url"),xe(this,"customers",vd(this)),xe(this,"products",Od(this));try{this.secretKey=t.secretKey||process.env.AUTUMN_SECRET_KEY,this.publishableKey=t.publishableKey||process.env.AUTUMN_PUBLISHABLE_KEY}catch{}if(!this.secretKey&&!this.publishableKey)throw new Error("Autumn secret key or publishable key is required");this.headers={Authorization:`Bearer ${this.secretKey||this.publishableKey}`,"Content-Type":"application/json"},this.url=t.url||"https://api.useautumn.com/v1",this.level=this.secretKey?"secret":"publishable"}getLevel(){return this.level}async handleResponse(t){if(t.status<200||t.status>=300){let e;try{e=await t.json()}catch{return{data:null,error:new Cr({message:"Something went wrong",code:"internal_error"})}}return{data:null,error:new Cr({message:e.message,code:e.code})}}try{return{data:await t.json(),error:null}}catch{return{data:null,error:new Cr({message:"Failed to parse Autumn API response",code:"internal_error"})}}}async get(t){const e=await fetch(`${this.url}${t}`,{headers:this.headers});return this.handleResponse(e)}async post(t,e){const n=await fetch(`${this.url}${t}`,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return this.handleResponse(n)}async delete(t){const e=await fetch(`${this.url}${t}`,{method:"DELETE",headers:this.headers});return this.handleResponse(e)}async attach(t){return Sd({instance:this,params:t})}async entitled(t){return Ed({instance:this,params:t})}async check(t){return Id({instance:this,params:t})}async event(t){return Td({instance:this,params:t})}async track(t){return kd({instance:this,params:t})}async usage(t){return xd({instance:this,params:t})}};xe(it,"customers",vd()),xe(it,"products",Od()),xe(it,"attach",t=>Ue(Sd,void 0,{params:t})),xe(it,"usage",t=>Ue(xd,void 0,{params:t})),xe(it,"entitled",t=>Ue(Ed,void 0,{params:t})),xe(it,"check",t=>Ue(Id,void 0,{params:t})),xe(it,"event",t=>Ue(Td,void 0,{params:t})),xe(it,"track",t=>Ue(kd,void 0,{params:t}));const Nv=new it({publishableKey:"am_pk_live_2vLmb7ppnnRKeorPXhAMEleCBcj",secretKey:"am_pk_live_2vLmb7ppnnRKeorPXhAMEleCBcj"}),Dv=async t=>{var n;return!!((n=(await Nv.check({customer_id:t,feature_id:"create_meeting_summary"})).data)!=null&&n.allowed)};function Lv(t){return{async openRecordings(){await chrome.tabs.create({url:Jr})},async openRecording(e){await chrome.tabs.create({url:`${Jr}/${e}`})},async switchToTab(e){chrome.tabs.update(e,{active:!0}),chrome.windows.getCurrent(n=>{n.id&&chrome.windows.update(n.id,{focused:!0})})},async getSession(){var r,s;const{data:e,error:n}=await t.auth.getSession();return n||!e.session?null:{access_token:(r=e.session)==null?void 0:r.access_token,user:(s=e.session)==null?void 0:s.user}},async getAutumnCustomerId(){var s,i,a,c;const{data:e,error:n}=await t.auth.getSession();if(n||!e.session)return null;let r=(i=(s=e.session)==null?void 0:s.user.app_metadata._app)==null?void 0:i.customer_id;return r||(r=(c=(a=(await t.auth.refreshSession()).data.session)==null?void 0:a.user.app_metadata._app)==null?void 0:c.customer_id),r||null},async isUserEntitled(){const e=await this.getAutumnCustomerId();return e?Dv(e):!1}}}const[jv,b0]=wd("createAppService",Lv),Wa=(t,e)=>e.some(n=>t instanceof n);let Cd,Rd;function Fv(){return Cd||(Cd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uv(){return Rd||(Rd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ha=new WeakMap,za=new WeakMap,Js=new WeakMap;function Bv(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(cn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return Js.set(e,t),e}function Vv(t){if(Ha.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ha.set(t,e)}let Ga={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ha.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Pd(t){Ga=t(Ga)}function qv(t){return Uv().includes(t)?function(...e){return t.apply(Ja(this),e),cn(this.request)}:function(...e){return cn(t.apply(Ja(this),e))}}function Wv(t){return typeof t=="function"?qv(t):(t instanceof IDBTransaction&&Vv(t),Wa(t,Fv())?new Proxy(t,Ga):t)}function cn(t){if(t instanceof IDBRequest)return Bv(t);if(za.has(t))return za.get(t);const e=Wv(t);return e!==t&&(za.set(t,e),Js.set(e,t)),e}const Ja=t=>Js.get(t);function Hv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=cn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(cn(a.result),u.oldVersion,u.newVersion,cn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const zv=["get","getKey","getAll","getAllKeys","count"],Gv=["put","add","delete","clear"],Ka=new Map;function Md(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ka.get(e))return Ka.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Gv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zv.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ka.set(e,i),i}Pd(t=>({...t,get:(e,n,r)=>Md(e,n)||t.get(e,n,r),has:(e,n)=>!!Md(e,n)||t.has(e,n)}));const Jv=["continue","continuePrimaryKey","advance"],$d={},Za=new WeakMap,Nd=new WeakMap,Kv={get(t,e){if(!Jv.includes(e))return t[e];let n=$d[e];return n||(n=$d[e]=function(...r){Za.set(this,Nd.get(this)[e](...r))}),n}};async function*Zv(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Kv);for(Nd.set(n,e),Js.set(n,Ja(e));e;)yield n,e=await(Za.get(n)||e.continue()),Za.delete(n)}function Dd(t,e){return e===Symbol.asyncIterator&&Wa(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Wa(t,[IDBIndex,IDBObjectStore])}Pd(t=>({...t,get(e,n,r){return Dd(e,n)?Zv:t.get(e,n,r)},has(e,n){return Dd(e,n)||t.has(e,n)}}));class Yv extends Error{constructor(e,n){super(e),this.cause=n,this.name="DatabaseConnectionError"}}class Xv extends Error{constructor(e,n,r){super(e),this.operation=n,this.cause=r,this.name="DatabaseOperationError"}}const Qv="meet-klu",Ld=3,jd="chunks",eS="recordingSpeakers";let un=null;async function Ks(){try{if((un==null?void 0:un.version)===Ld)return un;const t=await Hv(Qv,Ld,{upgrade(e,n,r,s){try{n<1&&tS(e),n<2&&nS(e,s),n<3&&rS(e)}catch(i){throw new Xv("Failed to upgrade database","upgrade",i)}},blocked(e,n,r){console.warn(`Database upgrade blocked: current version ${e}, blocked version ${n}`,r)},blocking(e,n,r){console.warn(`Database blocking: current version ${e}, blocked version ${n}`,r),t==null||t.close(),un=null},terminated(){console.error("Database connection terminated unexpectedly"),un=null}});return un=t,t}catch(t){throw new Yv("Failed to initialize database",t)}}function tS(t){t.createObjectStore(jd,{keyPath:"id",autoIncrement:!0}).createIndex("recordingId","recordingId")}function nS(t,e){const n=e.objectStore(jd);n.indexNames.contains("recordingId+type")||n.createIndex("recordingId+type",["recordingId","type"]),n.indexNames.contains("recordingId+type+byteStart")||n.createIndex("recordingId+type+byteStart",["recordingId","type","byteStart"]),n.indexNames.contains("createdAt")||n.createIndex("createdAt","createdAt")}function rS(t){t.createObjectStore(eS,{keyPath:"id"})}async function Zs({olderThanDays:t=7,storeName:e}){const r=(await Ks()).transaction(e,"readwrite"),s=r.objectStore(e),i=Date.now()-t*24*60*60*1e3;let a=await s.openCursor(),c=0;for(;a;)a.value.createdAt<i&&(await a.delete(),c++),a=await a.continue();await r.done,console.log(`Cleaned up ${c} old records from ${e} store (older than ${t} days)`)}function sS(t){const e=Ad(t);return{async create(n){const r=crypto.randomUUID(),s=Date.now(),i={...n,id:r,createdAt:s,updatedAt:s};await e.add("chunks",i)},getOne(n){return e.get("chunks",n)},getAll(){return e.getAll("chunks")},async update(n){await e.put("chunks",n)},async delete(n){await e.delete("chunks",n.id)},async getChunksByRecordingIdOrdered(n,r){const s=[n,r,-1/0],i=[n,r,1/0],a=IDBKeyRange.bound(s,i);return e.getAllFromIndex("chunks","recordingId+type+byteStart",a)},async deleteAllChunksByRecordingId(n,r){const s=await await e.getAllFromIndex("chunks","recordingId+type",[n,r]);for(const i of s)await e.delete("chunks",i.id)},async getVideoIdsWithFailedUploads(){await Zs({storeName:"chunks"});const r=(await e.getAll("chunks")).filter(i=>!i.isUploaded),s=new Map;for(const i of r){const{recordingId:a,type:c}=i;s.has(a)||s.set(a,{videoId:a,failedVideo:!1,failedAudio:!1});const u=s.get(a);c==="video"?u.failedVideo=!0:c==="audio"&&(u.failedAudio=!0),s.set(a,u)}return Array.from(s.values())}}}function Fd(t){const e=Ad(t);return{async create(n,r){await e.add("recordingSpeakers",{id:n,meetingPlatform:r,speakers:[],createdAt:Date.now(),updatedAt:Date.now()})},async updateSpeakers(n){const r=await e.get("recordingSpeakers",n.id);if(!r)throw new Error(`RecordingSpeaker with id ${n.id} not found`);n.speakers.length<r.speakers.length||await e.put("recordingSpeakers",{...r,speakers:n.speakers,updatedAt:Date.now()})},async updateMySelf(n,r){const s=await e.get("recordingSpeakers",n);if(!s)throw new Error(`RecordingSpeaker with id ${n} not found`);await e.put("recordingSpeakers",{...s,mySelf:r,updatedAt:Date.now()})},getOne(n){return e.get("recordingSpeakers",n)},delete(n){return e.delete("recordingSpeakers",n)}}}const[iS,Ud]=wd("RecordingSpeakersRepo",Fd),aS=t=>{const n=new Date().getTime()-t;return Math.floor(n/1e3)},Bd=3,_t=new Map;async function Ya(t,e){Y(`Reuploading failed chunks for recording ${t}`);const n=sS(Ks());await Zs({storeName:"chunks",olderThanDays:7});const r=await n.getChunksByRecordingIdOrdered(t,e),s=`${t}-${e}`;if(r.length===0)return Y(`type: ${e} No chunks found for recording ${t}`),await zc(t,e),!0;if(!r.some(d=>d.isFinalChunk)&&r.length>0){const d=r.reduce((h,g)=>!h||g.byteStart>h.byteStart?g:h,r[0]);d.isFinalChunk=!0,await n.update({...d,updatedAt:Date.now()}),Y(`type: ${e} No final chunk found, marking chunk with byteStart ${d.byteStart} as final`)}r.sort((d,h)=>d.isFinalChunk?1:h.isFinalChunk?-1:d.byteStart-h.byteStart),Y(`type: ${e} Found ${r.length} indexed chunks for recording ${t}`);const a=r.filter(d=>!d.isUploaded);Y(`type: ${e} chunksToUpload:`,a),Y(`type: ${e} Found ${a.length} chunks to upload for recording ${t}`);const c=r.filter(d=>d.isUploaded).sort((d,h)=>h.byteStart-d.byteStart)[0];let u=c?c.byteStart+c.blob.size:0;Y(`type: ${e} Starting upload from byte ${u}`),_t.has(s)||_t.set(s,0);try{for(const d of a){Y(`type: ${e} Reuploading chunk ${d.byteStart}`);const h=d.blob.size===0,g=h&&d.isFinalChunk?u-1:u+d.blob.size-1,y=d.isFinalChunk?h?u:g+1:"*",b=d.blob.size.toString(),k=h&&d.isFinalChunk?`bytes */${y}`:`bytes ${u}-${g}/${y}`;if(Y(`type: ${e} Reupload content range: ${k}`),!await oS({chunk:{...d,contentLength:b,contentRange:k,byteStart:u},dbService:n,activeUploadsMapId:s,type:e}))throw Y(`type: ${e} Failed to reupload chunk ${u}`,"error"),new Error(`Failed to reupload chunk ${u}`);Y(`type: ${e} Reuploaded chunk ${u}${h?" (empty)":""}`),u=g+1}return await n.deleteAllChunksByRecordingId(t,e),await zc(t,e),Y(`type: ${e} All chunks reuploaded successfully`),_t.delete(s),!0}catch(d){Y(`type: ${e} Error during reupload: ${d}`,"error");const h=Mt(d,["reuploadFailedChunks",`type-${e}`,"failed"],fd("reuploadFailedChunks",{recordingId:t,type:e,errorMessage:d.message||"Unknown error",chunksCount:(r==null?void 0:r.length)||0}));return Pt(d,h),_t.delete(s),!1}}async function oS({chunk:t,dbService:e,activeUploadsMapId:n,type:r}){const s=t.blob.size===0,i={"Content-Length":t.contentLength,"Content-Range":t.contentRange};r==="audio"&&t.mimeType&&(i["Content-Type"]=t.mimeType);let a=0,c=!1;try{const u=_t.get(n)||0;_t.set(n,u+1);const d=`reupload-${n}`;await navigator.locks.request(d,async()=>{for(;a<Bd&&!c;)try{const h=await fetch(t.uploadUrl,{method:"PUT",headers:i,body:t.blob});if(h.ok||h.status===308)c=!0,Y(`type: ${r} Chunk ${s?"empty final":t.contentRange} uploaded successfully. Status: ${h.status}`,"info"),await e.update({...t,isUploaded:!0,updatedAt:Date.now()});else throw new Error(`type: ${r} Upload failed with status: ${h.status}`)}catch(h){if(a++,Y(`type: ${r} Chunk upload failed (attempt ${a}): ${h.message}`,"error"),a<Bd){const g=a*1e3;Y(`type: ${r} Retrying in ${g/1e3} seconds...`,"error"),await new Promise(y=>setTimeout(y,g))}else{const g=Mt(h,["reuploadFailedChunks","chunkUploadFailed",`type-${r}`,`attempt-${a}`,t.isFinalChunk?"finalChunk":"midChunk"],fd("uploadChunk",{chunkId:t.id,type:r,byteStart:t.byteStart,contentRange:t.contentRange,isFinalChunk:t.isFinalChunk,retryNumber:a,errorStatus:h.status,errorMessage:h.message||"Unknown error"}));throw Pt(h,g),h}}})}catch(u){Y(`type: ${r} Error uploading chunk:`,u)}finally{const u=_t.get(n)||1;u<=1?_t.delete(n):_t.set(n,u-1)}return c}async function Vd({videoId:t,token:e}){const r=await Fd(Ks()).getOne(t),s=(r==null?void 0:r.speakers.slice(0))||[],i=[];let a=null;if(r&&s.length>0){const c=new Set(s.map(d=>d.id));if(r.meetingPlatform==="GOOGLE_MEET"?a={number_of_speakers:c.size}:r.meetingPlatform==="TEAMS"&&(a={min_speakers:c.size,max_speakers:c.size+1}),r.mySelf){const d=r.mySelf;s.push(d)}const u=new Set(s.map(d=>d.speaker).filter(d=>!!d&&d.trim()!=="").flatMap(d=>d.split(/\s+/)).filter(d=>d.length>0));i.push(...Array.from(u))}return xr.transcribe({videoId:t,diarizationConfig:a,customVocabulary:i,authToken:e})}async function cS(){const t=await np();if(await Ai.getValue()){Y("Already retrying failed recordings");return}Ai.setValue(!0);try{await Hc()}catch(n){Y("Error retrying all failed api calls:",n);const r=Mt(n,["retryAllFailedRecordings","all-failed-api-calls","failed"],{type:"all-failed-api-calls",errorMessage:n.message||"Unknown error"});Pt(n,r)}try{const n={total:0,successful:0};for(const r of t){if(r.hasFailedVideo){n.total++;try{await Ya(r.videoId,"video")?(n.successful++,Y(`Successfully reuploaded video for ${r.videoId}`)):Y(`Failed to reupload video for ${r.videoId}`)}catch(s){Y(`Error reuploading video for ${r.videoId}:`,s);const i=Mt(s,["retryAllFailedRecordings","reupload-video","failed"],{type:"video",videoId:r.videoId,errorMessage:s.message||"Unknown error"});Pt(s,i)}}if(r.hasFailedAudio){n.total++;try{if(await Ya(r.videoId,"audio")){n.successful++,Y(`Successfully reuploaded audio for ${r.videoId}`);const i=await Vc();await Vd({videoId:r.videoId,token:i==null?void 0:i.access_token}),Y(`Successfully retried transcribe api call for ${r.videoId}`)}else{Y(`Failed to reupload audio for ${r.videoId}`);const i=Mt(new Error(`Failed to reupload audio for ${r.videoId}`),["retryAllFailedRecordings","reupload-audio","failed"],{type:"audio",videoId:r.videoId});Pt(new Error(`Failed to reupload audio for ${r.videoId}`),i)}}catch(s){Y(`Error reuploading audio for ${r.videoId}:`,s);const i=Mt(s,["retryAllFailedRecordings","reupload-audio","error"],{type:"audio",videoId:r.videoId,errorMessage:s.message||"Unknown error"});Pt(s,i)}}}Y("summary",n);try{await Hc()}catch(r){Y("Error retrying all failed api calls:",r);const s=Mt(r,["retryAllFailedRecordings","all-failed-api-calls","failed"],{type:"all-failed-api-calls",errorMessage:r.message||"Unknown error"});Pt(r,s)}}catch(n){Y("Error in retry process:",n);const r=Mt(n,["retryAllFailedRecordings","overall-process","failed"],{errorMessage:n.message||"Unknown error"});Pt(n,r)}finally{Ai.setValue(!1)}}async function Xa(t,e){e&&console.log("setRecordingStatus",t,e),await _i.setValue(t),t==="recording"?yi.setValue(new Date().getTime()):t==="idle"&&e==="cleanupRecordingResources"&&yi.setValue(null)}var Ys={exports:{}},uS=Ys.exports,qd;function lS(){return qd||(qd=1,function(t,e){(function(n,r){r(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:uS,function(n){var r,s;if(!((s=(r=globalThis.chrome)==null?void 0:r.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",a=c=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(S,I=void 0){super(I),this.createItem=S}get(S){return this.has(S)||this.set(S,this.createItem(S)),super.get(S)}}const h=_=>_&&typeof _=="object"&&typeof _.then=="function",g=(_,S)=>(...I)=>{c.runtime.lastError?_.reject(new Error(c.runtime.lastError.message)):S.singleCallbackArg||I.length<=1&&S.singleCallbackArg!==!1?_.resolve(I[0]):_.resolve(I)},y=_=>_==1?"argument":"arguments",b=(_,S)=>function(C,...D){if(D.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${D.length}`);if(D.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${D.length}`);return new Promise((L,q)=>{if(S.fallbackToNoCallback)try{C[_](...D,g({resolve:L,reject:q},S))}catch(O){console.warn(`${_} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,O),C[_](...D),S.fallbackToNoCallback=!1,S.noCallback=!0,L()}else S.noCallback?(C[_](...D),L()):C[_](...D,g({resolve:L,reject:q},S))})},k=(_,S,I)=>new Proxy(S,{apply(C,D,L){return I.call(D,_,...L)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const A=(_,S={},I={})=>{let C=Object.create(null),D={has(q,O){return O in _||O in C},get(q,O,W){if(O in C)return C[O];if(!(O in _))return;let B=_[O];if(typeof B=="function")if(typeof S[O]=="function")B=k(_,_[O],S[O]);else if(v(I,O)){let H=b(O,I[O]);B=k(_,_[O],H)}else B=B.bind(_);else if(typeof B=="object"&&B!==null&&(v(S,O)||v(I,O)))B=A(B,S[O],I[O]);else if(v(I,"*"))B=A(B,S[O],I["*"]);else return Object.defineProperty(C,O,{configurable:!0,enumerable:!0,get(){return _[O]},set(H){_[O]=H}}),B;return C[O]=B,B},set(q,O,W,B){return O in C?C[O]=W:_[O]=W,!0},defineProperty(q,O,W){return Reflect.defineProperty(C,O,W)},deleteProperty(q,O){return Reflect.deleteProperty(C,O)}},L=Object.create(_);return new Proxy(L,D)},T=_=>({addListener(S,I,...C){S.addListener(_.get(I),...C)},hasListener(S,I){return S.hasListener(_.get(I))},removeListener(S,I){S.removeListener(_.get(I))}}),P=new d(_=>typeof _!="function"?_:function(I){const C=A(I,{},{getContent:{minArgs:0,maxArgs:0}});_(C)}),$=new d(_=>typeof _!="function"?_:function(I,C,D){let L=!1,q,O=new Promise(oe=>{q=function(ee){L=!0,oe(ee)}}),W;try{W=_(I,C,q)}catch(oe){W=Promise.reject(oe)}const B=W!==!0&&h(W);if(W!==!0&&!B&&!L)return!1;const H=oe=>{oe.then(ee=>{D(ee)},ee=>{let Be;ee&&(ee instanceof Error||typeof ee.message=="string")?Be=ee.message:Be="An unexpected error occurred",D({__mozWebExtensionPolyfillReject__:!0,message:Be})}).catch(ee=>{console.error("Failed to send onMessage rejected reply",ee)})};return H(B?W:O),!0}),U=({reject:_,resolve:S},I)=>{c.runtime.lastError?c.runtime.lastError.message===i?S():_(new Error(c.runtime.lastError.message)):I&&I.__mozWebExtensionPolyfillReject__?_(new Error(I.message)):S(I)},F=(_,S,I,...C)=>{if(C.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${y(S.minArgs)} for ${_}(), got ${C.length}`);if(C.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${y(S.maxArgs)} for ${_}(), got ${C.length}`);return new Promise((D,L)=>{const q=U.bind(null,{resolve:D,reject:L});C.push(q),I.sendMessage(...C)})},R={devtools:{network:{onRequestFinished:T(P)}},runtime:{onMessage:T($),onMessageExternal:T($),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},N={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":N},services:{"*":N},websites:{"*":N}},A(c,R,u)};n.exports=a(chrome)}else n.exports=globalThis.browser})}(Ys)),Ys.exports}var dS=lS();const Nn=bt(dS);var Qa,Wd;function fS(){if(Wd)return Qa;Wd=1;function t(s){if(typeof s!="number")throw new TypeError("Expected a number");return{days:Math.trunc(s/864e5),hours:Math.trunc(s/36e5)%24,minutes:Math.trunc(s/6e4)%60,seconds:Math.trunc(s/1e3)%60,ms:Math.trunc(s)%1e3}}function e(s,i){i=i||2;let a=s.toString(),c=0;return c=i-a.length+1,a=new Array(c).join("0").concat(a),a}function n(s,i){return i?s<0?"-":"":s<=-1e3?"-":""}function r(s,i){const a=i&&i.leading,c=i&&i.ms,u=s<0?-s:s,d=n(s,c),h=t(u),g=e(h.seconds);let y="";return h.days&&!y&&(y=d+h.days+":"+e(h.hours)+":"+e(h.minutes)+":"+g),h.hours&&!y&&(y=d+(a?e(h.hours):h.hours)+":"+e(h.minutes)+":"+g),y||(y=d+(a?e(h.minutes):h.minutes)+":"+g),c&&(y+="."+e(h.ms,3)),y}return Qa=r,Qa}var hS=fS();const mS=bt(hS);var Ne={},Hd;function gS(){if(Hd)return Ne;Hd=1,Object.defineProperty(Ne,"__esModule",{value:!0});class t extends Error{}class e extends t{constructor(o){super(`Invalid DateTime: ${o.toMessage()}`)}}class n extends t{constructor(o){super(`Invalid Interval: ${o.toMessage()}`)}}class r extends t{constructor(o){super(`Invalid Duration: ${o.toMessage()}`)}}class s extends t{}class i extends t{constructor(o){super(`Invalid unit ${o}`)}}class a extends t{}class c extends t{constructor(){super("Zone is an abstract class")}}const u="numeric",d="short",h="long",g={year:u,month:u,day:u},y={year:u,month:d,day:u},b={year:u,month:d,day:u,weekday:d},k={year:u,month:h,day:u},v={year:u,month:h,day:u,weekday:h},A={hour:u,minute:u},T={hour:u,minute:u,second:u},P={hour:u,minute:u,second:u,timeZoneName:d},$={hour:u,minute:u,second:u,timeZoneName:h},U={hour:u,minute:u,hourCycle:"h23"},F={hour:u,minute:u,second:u,hourCycle:"h23"},R={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:d},N={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:h},_={year:u,month:u,day:u,hour:u,minute:u},S={year:u,month:u,day:u,hour:u,minute:u,second:u},I={year:u,month:d,day:u,hour:u,minute:u},C={year:u,month:d,day:u,hour:u,minute:u,second:u},D={year:u,month:d,day:u,weekday:d,hour:u,minute:u},L={year:u,month:h,day:u,hour:u,minute:u,timeZoneName:d},q={year:u,month:h,day:u,hour:u,minute:u,second:u,timeZoneName:d},O={year:u,month:h,day:u,weekday:h,hour:u,minute:u,timeZoneName:h},W={year:u,month:h,day:u,weekday:h,hour:u,minute:u,second:u,timeZoneName:h};class B{get type(){throw new c}get name(){throw new c}get ianaName(){return this.name}get isUniversal(){throw new c}offsetName(o,l){throw new c}formatOffset(o,l){throw new c}offset(o){throw new c}equals(o){throw new c}get isValid(){throw new c}}let H=null;class oe extends B{static get instance(){return H===null&&(H=new oe),H}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(o,{format:l,locale:m}){return Pf(o,l,m)}formatOffset(o,l){return Nr(this.offset(o),l)}offset(o){return-new Date(o).getTimezoneOffset()}equals(o){return o.type==="system"}get isValid(){return!0}}const ee=new Map;function Be(f){let o=ee.get(f);return o===void 0&&(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:f,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),ee.set(f,o)),o}const ZS={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function YS(f,o){const l=f.format(o).replace(/\u200E/g,""),m=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(l),[,p,w,E,x,M,j,z]=m;return[E,p,w,x,M,j,z]}function XS(f,o){const l=f.formatToParts(o),m=[];for(let p=0;p<l.length;p++){const{type:w,value:E}=l[p],x=ZS[w];w==="era"?m[x]=E:G(x)||(m[x]=parseInt(E,10))}return m}const lo=new Map;class at extends B{static create(o){let l=lo.get(o);return l===void 0&&lo.set(o,l=new at(o)),l}static resetCache(){lo.clear(),ee.clear()}static isValidSpecifier(o){return this.isValidZone(o)}static isValidZone(o){if(!o)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:o}).format(),!0}catch{return!1}}constructor(o){super(),this.zoneName=o,this.valid=at.isValidZone(o)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(o,{format:l,locale:m}){return Pf(o,l,m,this.name)}formatOffset(o,l){return Nr(this.offset(o),l)}offset(o){if(!this.valid)return NaN;const l=new Date(o);if(isNaN(l))return NaN;const m=Be(this.name);let[p,w,E,x,M,j,z]=m.formatToParts?XS(m,l):YS(m,l);x==="BC"&&(p=-Math.abs(p)+1);const _e=si({year:p,month:w,day:E,hour:M===24?0:M,minute:j,second:z,millisecond:0});let Z=+l;const Ee=Z%1e3;return Z-=Ee>=0?Ee:1e3+Ee,(_e-Z)/6e4}equals(o){return o.type==="iana"&&o.name===this.name}get isValid(){return this.valid}}let af={};function QS(f,o={}){const l=JSON.stringify([f,o]);let m=af[l];return m||(m=new Intl.ListFormat(f,o),af[l]=m),m}const fo=new Map;function ho(f,o={}){const l=JSON.stringify([f,o]);let m=fo.get(l);return m===void 0&&(m=new Intl.DateTimeFormat(f,o),fo.set(l,m)),m}const mo=new Map;function eE(f,o={}){const l=JSON.stringify([f,o]);let m=mo.get(l);return m===void 0&&(m=new Intl.NumberFormat(f,o),mo.set(l,m)),m}const go=new Map;function tE(f,o={}){const{base:l,...m}=o,p=JSON.stringify([f,m]);let w=go.get(p);return w===void 0&&(w=new Intl.RelativeTimeFormat(f,o),go.set(p,w)),w}let Pr=null;function nE(){return Pr||(Pr=new Intl.DateTimeFormat().resolvedOptions().locale,Pr)}const po=new Map;function of(f){let o=po.get(f);return o===void 0&&(o=new Intl.DateTimeFormat(f).resolvedOptions(),po.set(f,o)),o}const yo=new Map;function rE(f){let o=yo.get(f);if(!o){const l=new Intl.Locale(f);o="getWeekInfo"in l?l.getWeekInfo():l.weekInfo,"minimalDays"in o||(o={...cf,...o}),yo.set(f,o)}return o}function sE(f){const o=f.indexOf("-x-");o!==-1&&(f=f.substring(0,o));const l=f.indexOf("-u-");if(l===-1)return[f];{let m,p;try{m=ho(f).resolvedOptions(),p=f}catch{const M=f.substring(0,l);m=ho(M).resolvedOptions(),p=M}const{numberingSystem:w,calendar:E}=m;return[p,w,E]}}function iE(f,o,l){return(l||o)&&(f.includes("-u-")||(f+="-u"),l&&(f+=`-ca-${l}`),o&&(f+=`-nu-${o}`)),f}function aE(f){const o=[];for(let l=1;l<=12;l++){const m=J.utc(2009,l,1);o.push(f(m))}return o}function oE(f){const o=[];for(let l=1;l<=7;l++){const m=J.utc(2016,11,13+l);o.push(f(m))}return o}function ei(f,o,l,m){const p=f.listingMode();return p==="error"?null:p==="en"?l(o):m(o)}function cE(f){return f.numberingSystem&&f.numberingSystem!=="latn"?!1:f.numberingSystem==="latn"||!f.locale||f.locale.startsWith("en")||of(f.locale).numberingSystem==="latn"}class uE{constructor(o,l,m){this.padTo=m.padTo||0,this.floor=m.floor||!1;const{padTo:p,floor:w,...E}=m;if(!l||Object.keys(E).length>0){const x={useGrouping:!1,...m};m.padTo>0&&(x.minimumIntegerDigits=m.padTo),this.inf=eE(o,x)}}format(o){if(this.inf){const l=this.floor?Math.floor(o):o;return this.inf.format(l)}else{const l=this.floor?Math.floor(o):ko(o,3);return be(l,this.padTo)}}}class lE{constructor(o,l,m){this.opts=m,this.originalZone=void 0;let p;if(this.opts.timeZone)this.dt=o;else if(o.zone.type==="fixed"){const E=-1*(o.offset/60),x=E>=0?`Etc/GMT+${E}`:`Etc/GMT${E}`;o.offset!==0&&at.create(x).valid?(p=x,this.dt=o):(p="UTC",this.dt=o.offset===0?o:o.setZone("UTC").plus({minutes:o.offset}),this.originalZone=o.zone)}else o.zone.type==="system"?this.dt=o:o.zone.type==="iana"?(this.dt=o,p=o.zone.name):(p="UTC",this.dt=o.setZone("UTC").plus({minutes:o.offset}),this.originalZone=o.zone);const w={...this.opts};w.timeZone=w.timeZone||p,this.dtf=ho(l,w)}format(){return this.originalZone?this.formatToParts().map(({value:o})=>o).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const o=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?o.map(l=>{if(l.type==="timeZoneName"){const m=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...l,value:m}}else return l}):o}resolvedOptions(){return this.dtf.resolvedOptions()}}class dE{constructor(o,l,m){this.opts={style:"long",...m},!l&&If()&&(this.rtf=tE(o,m))}format(o,l){return this.rtf?this.rtf.format(o,l):PE(l,o,this.opts.numeric,this.opts.style!=="long")}formatToParts(o,l){return this.rtf?this.rtf.formatToParts(o,l):[]}}const cf={firstDay:1,minimalDays:4,weekend:[6,7]};class ce{static fromOpts(o){return ce.create(o.locale,o.numberingSystem,o.outputCalendar,o.weekSettings,o.defaultToEN)}static create(o,l,m,p,w=!1){const E=o||fe.defaultLocale,x=E||(w?"en-US":nE()),M=l||fe.defaultNumberingSystem,j=m||fe.defaultOutputCalendar,z=Eo(p)||fe.defaultWeekSettings;return new ce(x,M,j,z,E)}static resetCache(){Pr=null,fo.clear(),mo.clear(),go.clear(),po.clear(),yo.clear()}static fromObject({locale:o,numberingSystem:l,outputCalendar:m,weekSettings:p}={}){return ce.create(o,l,m,p)}constructor(o,l,m,p,w){const[E,x,M]=sE(o);this.locale=E,this.numberingSystem=l||x||null,this.outputCalendar=m||M||null,this.weekSettings=p,this.intl=iE(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=w,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cE(this)),this.fastNumbersCached}listingMode(){const o=this.isEnglish(),l=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return o&&l?"en":"intl"}clone(o){return!o||Object.getOwnPropertyNames(o).length===0?this:ce.create(o.locale||this.specifiedLocale,o.numberingSystem||this.numberingSystem,o.outputCalendar||this.outputCalendar,Eo(o.weekSettings)||this.weekSettings,o.defaultToEN||!1)}redefaultToEN(o={}){return this.clone({...o,defaultToEN:!0})}redefaultToSystem(o={}){return this.clone({...o,defaultToEN:!1})}months(o,l=!1){return ei(this,o,Nf,()=>{const m=l?{month:o,day:"numeric"}:{month:o},p=l?"format":"standalone";return this.monthsCache[p][o]||(this.monthsCache[p][o]=aE(w=>this.extract(w,m,"month"))),this.monthsCache[p][o]})}weekdays(o,l=!1){return ei(this,o,jf,()=>{const m=l?{weekday:o,year:"numeric",month:"long",day:"numeric"}:{weekday:o},p=l?"format":"standalone";return this.weekdaysCache[p][o]||(this.weekdaysCache[p][o]=oE(w=>this.extract(w,m,"weekday"))),this.weekdaysCache[p][o]})}meridiems(){return ei(this,void 0,()=>Ff,()=>{if(!this.meridiemCache){const o={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[J.utc(2016,11,13,9),J.utc(2016,11,13,19)].map(l=>this.extract(l,o,"dayperiod"))}return this.meridiemCache})}eras(o){return ei(this,o,Uf,()=>{const l={era:o};return this.eraCache[o]||(this.eraCache[o]=[J.utc(-40,1,1),J.utc(2017,1,1)].map(m=>this.extract(m,l,"era"))),this.eraCache[o]})}extract(o,l,m){const p=this.dtFormatter(o,l),w=p.formatToParts(),E=w.find(x=>x.type.toLowerCase()===m);return E?E.value:null}numberFormatter(o={}){return new uE(this.intl,o.forceSimple||this.fastNumbers,o)}dtFormatter(o,l={}){return new lE(o,this.intl,l)}relFormatter(o={}){return new dE(this.intl,this.isEnglish(),o)}listFormatter(o={}){return QS(this.intl,o)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||of(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Of()?rE(this.locale):cf}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(o){return this.locale===o.locale&&this.numberingSystem===o.numberingSystem&&this.outputCalendar===o.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let _o=null;class Ie extends B{static get utcInstance(){return _o===null&&(_o=new Ie(0)),_o}static instance(o){return o===0?Ie.utcInstance:new Ie(o)}static parseSpecifier(o){if(o){const l=o.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(l)return new Ie(ii(l[1],l[2]))}return null}constructor(o){super(),this.fixed=o}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Nr(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Nr(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(o,l){return Nr(this.fixed,l)}get isUniversal(){return!0}offset(){return this.fixed}equals(o){return o.type==="fixed"&&o.fixed===this.fixed}get isValid(){return!0}}class uf extends B{constructor(o){super(),this.zoneName=o}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function $t(f,o){if(G(f)||f===null)return o;if(f instanceof B)return f;if(yE(f)){const l=f.toLowerCase();return l==="default"?o:l==="local"||l==="system"?oe.instance:l==="utc"||l==="gmt"?Ie.utcInstance:Ie.parseSpecifier(l)||at.create(f)}else return Nt(f)?Ie.instance(f):typeof f=="object"&&"offset"in f&&typeof f.offset=="function"?f:new uf(f)}const bo={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},lf={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},fE=bo.hanidec.replace(/[\[|\]]/g,"").split("");function hE(f){let o=parseInt(f,10);if(isNaN(o)){o="";for(let l=0;l<f.length;l++){const m=f.charCodeAt(l);if(f[l].search(bo.hanidec)!==-1)o+=fE.indexOf(f[l]);else for(const p in lf){const[w,E]=lf[p];m>=w&&m<=E&&(o+=m-w)}}return parseInt(o,10)}else return o}const wo=new Map;function mE(){wo.clear()}function Ye({numberingSystem:f},o=""){const l=f||"latn";let m=wo.get(l);m===void 0&&(m=new Map,wo.set(l,m));let p=m.get(o);return p===void 0&&(p=new RegExp(`${bo[l]}${o}`),m.set(o,p)),p}let df=()=>Date.now(),ff="system",hf=null,mf=null,gf=null,pf=60,yf,_f=null;class fe{static get now(){return df}static set now(o){df=o}static set defaultZone(o){ff=o}static get defaultZone(){return $t(ff,oe.instance)}static get defaultLocale(){return hf}static set defaultLocale(o){hf=o}static get defaultNumberingSystem(){return mf}static set defaultNumberingSystem(o){mf=o}static get defaultOutputCalendar(){return gf}static set defaultOutputCalendar(o){gf=o}static get defaultWeekSettings(){return _f}static set defaultWeekSettings(o){_f=Eo(o)}static get twoDigitCutoffYear(){return pf}static set twoDigitCutoffYear(o){pf=o%100}static get throwOnInvalid(){return yf}static set throwOnInvalid(o){yf=o}static resetCaches(){ce.resetCache(),at.resetCache(),J.resetCache(),mE()}}class Xe{constructor(o,l){this.reason=o,this.explanation=l}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const bf=[0,31,59,90,120,151,181,212,243,273,304,334],wf=[0,31,60,91,121,152,182,213,244,274,305,335];function ze(f,o){return new Xe("unit out of range",`you specified ${o} (of type ${typeof o}) as a ${f}, which is invalid`)}function Ao(f,o,l){const m=new Date(Date.UTC(f,o-1,l));f<100&&f>=0&&m.setUTCFullYear(m.getUTCFullYear()-1900);const p=m.getUTCDay();return p===0?7:p}function Af(f,o,l){return l+(Mr(f)?wf:bf)[o-1]}function vf(f,o){const l=Mr(f)?wf:bf,m=l.findIndex(w=>w<o),p=o-l[m];return{month:m+1,day:p}}function vo(f,o){return(f-o+7)%7+1}function ti(f,o=4,l=1){const{year:m,month:p,day:w}=f,E=Af(m,p,w),x=vo(Ao(m,p,w),l);let M=Math.floor((E-x+14-o)/7),j;return M<1?(j=m-1,M=$r(j,o,l)):M>$r(m,o,l)?(j=m+1,M=1):j=m,{weekYear:j,weekNumber:M,weekday:x,...oi(f)}}function Sf(f,o=4,l=1){const{weekYear:m,weekNumber:p,weekday:w}=f,E=vo(Ao(m,1,o),l),x=Ln(m);let M=p*7+w-E-7+o,j;M<1?(j=m-1,M+=Ln(j)):M>x?(j=m+1,M-=Ln(m)):j=m;const{month:z,day:ne}=vf(j,M);return{year:j,month:z,day:ne,...oi(f)}}function So(f){const{year:o,month:l,day:m}=f,p=Af(o,l,m);return{year:o,ordinal:p,...oi(f)}}function Ef(f){const{year:o,ordinal:l}=f,{month:m,day:p}=vf(o,l);return{year:o,month:m,day:p,...oi(f)}}function Tf(f,o){if(!G(f.localWeekday)||!G(f.localWeekNumber)||!G(f.localWeekYear)){if(!G(f.weekday)||!G(f.weekNumber)||!G(f.weekYear))throw new s("Cannot mix locale-based week fields with ISO-based week fields");return G(f.localWeekday)||(f.weekday=f.localWeekday),G(f.localWeekNumber)||(f.weekNumber=f.localWeekNumber),G(f.localWeekYear)||(f.weekYear=f.localWeekYear),delete f.localWeekday,delete f.localWeekNumber,delete f.localWeekYear,{minDaysInFirstWeek:o.getMinDaysInFirstWeek(),startOfWeek:o.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gE(f,o=4,l=1){const m=ni(f.weekYear),p=Ge(f.weekNumber,1,$r(f.weekYear,o,l)),w=Ge(f.weekday,1,7);return m?p?w?!1:ze("weekday",f.weekday):ze("week",f.weekNumber):ze("weekYear",f.weekYear)}function pE(f){const o=ni(f.year),l=Ge(f.ordinal,1,Ln(f.year));return o?l?!1:ze("ordinal",f.ordinal):ze("year",f.year)}function kf(f){const o=ni(f.year),l=Ge(f.month,1,12),m=Ge(f.day,1,ri(f.year,f.month));return o?l?m?!1:ze("day",f.day):ze("month",f.month):ze("year",f.year)}function xf(f){const{hour:o,minute:l,second:m,millisecond:p}=f,w=Ge(o,0,23)||o===24&&l===0&&m===0&&p===0,E=Ge(l,0,59),x=Ge(m,0,59),M=Ge(p,0,999);return w?E?x?M?!1:ze("millisecond",p):ze("second",m):ze("minute",l):ze("hour",o)}function G(f){return typeof f>"u"}function Nt(f){return typeof f=="number"}function ni(f){return typeof f=="number"&&f%1===0}function yE(f){return typeof f=="string"}function _E(f){return Object.prototype.toString.call(f)==="[object Date]"}function If(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Of(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function bE(f){return Array.isArray(f)?f:[f]}function Cf(f,o,l){if(f.length!==0)return f.reduce((m,p)=>{const w=[o(p),p];return m&&l(m[0],w[0])===m[0]?m:w},null)[1]}function wE(f,o){return o.reduce((l,m)=>(l[m]=f[m],l),{})}function Dn(f,o){return Object.prototype.hasOwnProperty.call(f,o)}function Eo(f){if(f==null)return null;if(typeof f!="object")throw new a("Week settings must be an object");if(!Ge(f.firstDay,1,7)||!Ge(f.minimalDays,1,7)||!Array.isArray(f.weekend)||f.weekend.some(o=>!Ge(o,1,7)))throw new a("Invalid week settings");return{firstDay:f.firstDay,minimalDays:f.minimalDays,weekend:Array.from(f.weekend)}}function Ge(f,o,l){return ni(f)&&f>=o&&f<=l}function AE(f,o){return f-o*Math.floor(f/o)}function be(f,o=2){const l=f<0;let m;return l?m="-"+(""+-f).padStart(o,"0"):m=(""+f).padStart(o,"0"),m}function Dt(f){if(!(G(f)||f===null||f===""))return parseInt(f,10)}function ln(f){if(!(G(f)||f===null||f===""))return parseFloat(f)}function To(f){if(!(G(f)||f===null||f==="")){const o=parseFloat("0."+f)*1e3;return Math.floor(o)}}function ko(f,o,l=!1){const m=10**o;return(l?Math.trunc:Math.round)(f*m)/m}function Mr(f){return f%4===0&&(f%100!==0||f%400===0)}function Ln(f){return Mr(f)?366:365}function ri(f,o){const l=AE(o-1,12)+1,m=f+(o-l)/12;return l===2?Mr(m)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][l-1]}function si(f){let o=Date.UTC(f.year,f.month-1,f.day,f.hour,f.minute,f.second,f.millisecond);return f.year<100&&f.year>=0&&(o=new Date(o),o.setUTCFullYear(f.year,f.month-1,f.day)),+o}function Rf(f,o,l){return-vo(Ao(f,1,o),l)+o-1}function $r(f,o=4,l=1){const m=Rf(f,o,l),p=Rf(f+1,o,l);return(Ln(f)-m+p)/7}function xo(f){return f>99?f:f>fe.twoDigitCutoffYear?1900+f:2e3+f}function Pf(f,o,l,m=null){const p=new Date(f),w={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};m&&(w.timeZone=m);const E={timeZoneName:o,...w},x=new Intl.DateTimeFormat(l,E).formatToParts(p).find(M=>M.type.toLowerCase()==="timezonename");return x?x.value:null}function ii(f,o){let l=parseInt(f,10);Number.isNaN(l)&&(l=0);const m=parseInt(o,10)||0,p=l<0||Object.is(l,-0)?-m:m;return l*60+p}function Mf(f){const o=Number(f);if(typeof f=="boolean"||f===""||Number.isNaN(o))throw new a(`Invalid unit value ${f}`);return o}function ai(f,o){const l={};for(const m in f)if(Dn(f,m)){const p=f[m];if(p==null)continue;l[o(m)]=Mf(p)}return l}function Nr(f,o){const l=Math.trunc(Math.abs(f/60)),m=Math.trunc(Math.abs(f%60)),p=f>=0?"+":"-";switch(o){case"short":return`${p}${be(l,2)}:${be(m,2)}`;case"narrow":return`${p}${l}${m>0?`:${m}`:""}`;case"techie":return`${p}${be(l,2)}${be(m,2)}`;default:throw new RangeError(`Value format ${o} is out of range for property format`)}}function oi(f){return wE(f,["hour","minute","second","millisecond"])}const vE=["January","February","March","April","May","June","July","August","September","October","November","December"],$f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],SE=["J","F","M","A","M","J","J","A","S","O","N","D"];function Nf(f){switch(f){case"narrow":return[...SE];case"short":return[...$f];case"long":return[...vE];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Df=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Lf=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],EE=["M","T","W","T","F","S","S"];function jf(f){switch(f){case"narrow":return[...EE];case"short":return[...Lf];case"long":return[...Df];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ff=["AM","PM"],TE=["Before Christ","Anno Domini"],kE=["BC","AD"],xE=["B","A"];function Uf(f){switch(f){case"narrow":return[...xE];case"short":return[...kE];case"long":return[...TE];default:return null}}function IE(f){return Ff[f.hour<12?0:1]}function OE(f,o){return jf(o)[f.weekday-1]}function CE(f,o){return Nf(o)[f.month-1]}function RE(f,o){return Uf(o)[f.year<0?0:1]}function PE(f,o,l="always",m=!1){const p={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},w=["hours","minutes","seconds"].indexOf(f)===-1;if(l==="auto"&&w){const ne=f==="days";switch(o){case 1:return ne?"tomorrow":`next ${p[f][0]}`;case-1:return ne?"yesterday":`last ${p[f][0]}`;case 0:return ne?"today":`this ${p[f][0]}`}}const E=Object.is(o,-0)||o<0,x=Math.abs(o),M=x===1,j=p[f],z=m?M?j[1]:j[2]||j[1]:M?p[f][0]:f;return E?`${x} ${z} ago`:`in ${x} ${z}`}function Bf(f,o){let l="";for(const m of f)m.literal?l+=m.val:l+=o(m.val);return l}const ME={D:g,DD:y,DDD:k,DDDD:v,t:A,tt:T,ttt:P,tttt:$,T:U,TT:F,TTT:R,TTTT:N,f:_,ff:I,fff:L,ffff:O,F:S,FF:C,FFF:q,FFFF:W};class Oe{static create(o,l={}){return new Oe(o,l)}static parseFormat(o){let l=null,m="",p=!1;const w=[];for(let E=0;E<o.length;E++){const x=o.charAt(E);x==="'"?(m.length>0&&w.push({literal:p||/^\s+$/.test(m),val:m}),l=null,m="",p=!p):p||x===l?m+=x:(m.length>0&&w.push({literal:/^\s+$/.test(m),val:m}),m=x,l=x)}return m.length>0&&w.push({literal:p||/^\s+$/.test(m),val:m}),w}static macroTokenToFormatOpts(o){return ME[o]}constructor(o,l){this.opts=l,this.loc=o,this.systemLoc=null}formatWithSystemDefault(o,l){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(o,{...this.opts,...l}).format()}dtFormatter(o,l={}){return this.loc.dtFormatter(o,{...this.opts,...l})}formatDateTime(o,l){return this.dtFormatter(o,l).format()}formatDateTimeParts(o,l){return this.dtFormatter(o,l).formatToParts()}formatInterval(o,l){return this.dtFormatter(o.start,l).dtf.formatRange(o.start.toJSDate(),o.end.toJSDate())}resolvedOptions(o,l){return this.dtFormatter(o,l).resolvedOptions()}num(o,l=0){if(this.opts.forceSimple)return be(o,l);const m={...this.opts};return l>0&&(m.padTo=l),this.loc.numberFormatter(m).format(o)}formatDateTimeFromString(o,l){const m=this.loc.listingMode()==="en",p=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",w=(Z,Ee)=>this.loc.extract(o,Z,Ee),E=Z=>o.isOffsetFixed&&o.offset===0&&Z.allowZ?"Z":o.isValid?o.zone.formatOffset(o.ts,Z.format):"",x=()=>m?IE(o):w({hour:"numeric",hourCycle:"h12"},"dayperiod"),M=(Z,Ee)=>m?CE(o,Z):w(Ee?{month:Z}:{month:Z,day:"numeric"},"month"),j=(Z,Ee)=>m?OE(o,Z):w(Ee?{weekday:Z}:{weekday:Z,month:"long",day:"numeric"},"weekday"),z=Z=>{const Ee=Oe.macroTokenToFormatOpts(Z);return Ee?this.formatWithSystemDefault(o,Ee):Z},ne=Z=>m?RE(o,Z):w({era:Z},"era"),_e=Z=>{switch(Z){case"S":return this.num(o.millisecond);case"u":case"SSS":return this.num(o.millisecond,3);case"s":return this.num(o.second);case"ss":return this.num(o.second,2);case"uu":return this.num(Math.floor(o.millisecond/10),2);case"uuu":return this.num(Math.floor(o.millisecond/100));case"m":return this.num(o.minute);case"mm":return this.num(o.minute,2);case"h":return this.num(o.hour%12===0?12:o.hour%12);case"hh":return this.num(o.hour%12===0?12:o.hour%12,2);case"H":return this.num(o.hour);case"HH":return this.num(o.hour,2);case"Z":return E({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return E({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return E({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return o.zone.offsetName(o.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return o.zone.offsetName(o.ts,{format:"long",locale:this.loc.locale});case"z":return o.zoneName;case"a":return x();case"d":return p?w({day:"numeric"},"day"):this.num(o.day);case"dd":return p?w({day:"2-digit"},"day"):this.num(o.day,2);case"c":return this.num(o.weekday);case"ccc":return j("short",!0);case"cccc":return j("long",!0);case"ccccc":return j("narrow",!0);case"E":return this.num(o.weekday);case"EEE":return j("short",!1);case"EEEE":return j("long",!1);case"EEEEE":return j("narrow",!1);case"L":return p?w({month:"numeric",day:"numeric"},"month"):this.num(o.month);case"LL":return p?w({month:"2-digit",day:"numeric"},"month"):this.num(o.month,2);case"LLL":return M("short",!0);case"LLLL":return M("long",!0);case"LLLLL":return M("narrow",!0);case"M":return p?w({month:"numeric"},"month"):this.num(o.month);case"MM":return p?w({month:"2-digit"},"month"):this.num(o.month,2);case"MMM":return M("short",!1);case"MMMM":return M("long",!1);case"MMMMM":return M("narrow",!1);case"y":return p?w({year:"numeric"},"year"):this.num(o.year);case"yy":return p?w({year:"2-digit"},"year"):this.num(o.year.toString().slice(-2),2);case"yyyy":return p?w({year:"numeric"},"year"):this.num(o.year,4);case"yyyyyy":return p?w({year:"numeric"},"year"):this.num(o.year,6);case"G":return ne("short");case"GG":return ne("long");case"GGGGG":return ne("narrow");case"kk":return this.num(o.weekYear.toString().slice(-2),2);case"kkkk":return this.num(o.weekYear,4);case"W":return this.num(o.weekNumber);case"WW":return this.num(o.weekNumber,2);case"n":return this.num(o.localWeekNumber);case"nn":return this.num(o.localWeekNumber,2);case"ii":return this.num(o.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(o.localWeekYear,4);case"o":return this.num(o.ordinal);case"ooo":return this.num(o.ordinal,3);case"q":return this.num(o.quarter);case"qq":return this.num(o.quarter,2);case"X":return this.num(Math.floor(o.ts/1e3));case"x":return this.num(o.ts);default:return z(Z)}};return Bf(Oe.parseFormat(l),_e)}formatDurationFromString(o,l){const m=M=>{switch(M[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},p=M=>j=>{const z=m(j);return z?this.num(M.get(z),j.length):j},w=Oe.parseFormat(l),E=w.reduce((M,{literal:j,val:z})=>j?M:M.concat(z),[]),x=o.shiftTo(...E.map(m).filter(M=>M));return Bf(w,p(x))}}const Vf=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function jn(...f){const o=f.reduce((l,m)=>l+m.source,"");return RegExp(`^${o}$`)}function Fn(...f){return o=>f.reduce(([l,m,p],w)=>{const[E,x,M]=w(o,p);return[{...l,...E},x||m,M]},[{},null,1]).slice(0,2)}function Un(f,...o){if(f==null)return[null,null];for(const[l,m]of o){const p=l.exec(f);if(p)return m(p)}return[null,null]}function qf(...f){return(o,l)=>{const m={};let p;for(p=0;p<f.length;p++)m[f[p]]=Dt(o[l+p]);return[m,null,l+p]}}const Wf=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$E=`(?:${Wf.source}?(?:\\[(${Vf.source})\\])?)?`,Io=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Hf=RegExp(`${Io.source}${$E}`),Oo=RegExp(`(?:T${Hf.source})?`),NE=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,DE=/(\d{4})-?W(\d\d)(?:-?(\d))?/,LE=/(\d{4})-?(\d{3})/,jE=qf("weekYear","weekNumber","weekDay"),FE=qf("year","ordinal"),UE=/(\d{4})-(\d\d)-(\d\d)/,zf=RegExp(`${Io.source} ?(?:${Wf.source}|(${Vf.source}))?`),BE=RegExp(`(?: ${zf.source})?`);function Bn(f,o,l){const m=f[o];return G(m)?l:Dt(m)}function VE(f,o){return[{year:Bn(f,o),month:Bn(f,o+1,1),day:Bn(f,o+2,1)},null,o+3]}function Vn(f,o){return[{hours:Bn(f,o,0),minutes:Bn(f,o+1,0),seconds:Bn(f,o+2,0),milliseconds:To(f[o+3])},null,o+4]}function Dr(f,o){const l=!f[o]&&!f[o+1],m=ii(f[o+1],f[o+2]),p=l?null:Ie.instance(m);return[{},p,o+3]}function Lr(f,o){const l=f[o]?at.create(f[o]):null;return[{},l,o+1]}const qE=RegExp(`^T?${Io.source}$`),WE=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function HE(f){const[o,l,m,p,w,E,x,M,j]=f,z=o[0]==="-",ne=M&&M[0]==="-",_e=(Z,Ee=!1)=>Z!==void 0&&(Ee||Z&&z)?-Z:Z;return[{years:_e(ln(l)),months:_e(ln(m)),weeks:_e(ln(p)),days:_e(ln(w)),hours:_e(ln(E)),minutes:_e(ln(x)),seconds:_e(ln(M),M==="-0"),milliseconds:_e(To(j),ne)}]}const zE={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Co(f,o,l,m,p,w,E){const x={year:o.length===2?xo(Dt(o)):Dt(o),month:$f.indexOf(l)+1,day:Dt(m),hour:Dt(p),minute:Dt(w)};return E&&(x.second=Dt(E)),f&&(x.weekday=f.length>3?Df.indexOf(f)+1:Lf.indexOf(f)+1),x}const GE=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function JE(f){const[,o,l,m,p,w,E,x,M,j,z,ne]=f,_e=Co(o,p,m,l,w,E,x);let Z;return M?Z=zE[M]:j?Z=0:Z=ii(z,ne),[_e,new Ie(Z)]}function KE(f){return f.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZE=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,YE=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,XE=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Gf(f){const[,o,l,m,p,w,E,x]=f;return[Co(o,p,m,l,w,E,x),Ie.utcInstance]}function QE(f){const[,o,l,m,p,w,E,x]=f;return[Co(o,x,l,m,p,w,E),Ie.utcInstance]}const eT=jn(NE,Oo),tT=jn(DE,Oo),nT=jn(LE,Oo),rT=jn(Hf),Jf=Fn(VE,Vn,Dr,Lr),sT=Fn(jE,Vn,Dr,Lr),iT=Fn(FE,Vn,Dr,Lr),aT=Fn(Vn,Dr,Lr);function oT(f){return Un(f,[eT,Jf],[tT,sT],[nT,iT],[rT,aT])}function cT(f){return Un(KE(f),[GE,JE])}function uT(f){return Un(f,[ZE,Gf],[YE,Gf],[XE,QE])}function lT(f){return Un(f,[WE,HE])}const dT=Fn(Vn);function fT(f){return Un(f,[qE,dT])}const hT=jn(UE,BE),mT=jn(zf),gT=Fn(Vn,Dr,Lr);function pT(f){return Un(f,[hT,Jf],[mT,gT])}const Kf="Invalid Duration",Zf={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},yT={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Zf},Je=146097/400,qn=146097/4800,_T={years:{quarters:4,months:12,weeks:Je/7,days:Je,hours:Je*24,minutes:Je*24*60,seconds:Je*24*60*60,milliseconds:Je*24*60*60*1e3},quarters:{months:3,weeks:Je/28,days:Je/4,hours:Je*24/4,minutes:Je*24*60/4,seconds:Je*24*60*60/4,milliseconds:Je*24*60*60*1e3/4},months:{weeks:qn/7,days:qn,hours:qn*24,minutes:qn*24*60,seconds:qn*24*60*60,milliseconds:qn*24*60*60*1e3},...Zf},dn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],bT=dn.slice(0).reverse();function Lt(f,o,l=!1){const m={values:l?o.values:{...f.values,...o.values||{}},loc:f.loc.clone(o.loc),conversionAccuracy:o.conversionAccuracy||f.conversionAccuracy,matrix:o.matrix||f.matrix};return new re(m)}function Yf(f,o){var l;let m=(l=o.milliseconds)!=null?l:0;for(const p of bT.slice(1))o[p]&&(m+=o[p]*f[p].milliseconds);return m}function Xf(f,o){const l=Yf(f,o)<0?-1:1;dn.reduceRight((m,p)=>{if(G(o[p]))return m;if(m){const w=o[m]*l,E=f[p][m],x=Math.floor(w/E);o[p]+=x*l,o[m]-=x*E*l}return p},null),dn.reduce((m,p)=>{if(G(o[p]))return m;if(m){const w=o[m]%1;o[m]-=w,o[p]+=w*f[m][p]}return p},null)}function wT(f){const o={};for(const[l,m]of Object.entries(f))m!==0&&(o[l]=m);return o}class re{constructor(o){const l=o.conversionAccuracy==="longterm"||!1;let m=l?_T:yT;o.matrix&&(m=o.matrix),this.values=o.values,this.loc=o.loc||ce.create(),this.conversionAccuracy=l?"longterm":"casual",this.invalid=o.invalid||null,this.matrix=m,this.isLuxonDuration=!0}static fromMillis(o,l){return re.fromObject({milliseconds:o},l)}static fromObject(o,l={}){if(o==null||typeof o!="object")throw new a(`Duration.fromObject: argument expected to be an object, got ${o===null?"null":typeof o}`);return new re({values:ai(o,re.normalizeUnit),loc:ce.fromObject(l),conversionAccuracy:l.conversionAccuracy,matrix:l.matrix})}static fromDurationLike(o){if(Nt(o))return re.fromMillis(o);if(re.isDuration(o))return o;if(typeof o=="object")return re.fromObject(o);throw new a(`Unknown duration argument ${o} of type ${typeof o}`)}static fromISO(o,l){const[m]=lT(o);return m?re.fromObject(m,l):re.invalid("unparsable",`the input "${o}" can't be parsed as ISO 8601`)}static fromISOTime(o,l){const[m]=fT(o);return m?re.fromObject(m,l):re.invalid("unparsable",`the input "${o}" can't be parsed as ISO 8601`)}static invalid(o,l=null){if(!o)throw new a("need to specify a reason the Duration is invalid");const m=o instanceof Xe?o:new Xe(o,l);if(fe.throwOnInvalid)throw new r(m);return new re({invalid:m})}static normalizeUnit(o){const l={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[o&&o.toLowerCase()];if(!l)throw new i(o);return l}static isDuration(o){return o&&o.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(o,l={}){const m={...l,floor:l.round!==!1&&l.floor!==!1};return this.isValid?Oe.create(this.loc,m).formatDurationFromString(this,o):Kf}toHuman(o={}){if(!this.isValid)return Kf;const l=dn.map(m=>{const p=this.values[m];return G(p)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...o,unit:m.slice(0,-1)}).format(p)}).filter(m=>m);return this.loc.listFormatter({type:"conjunction",style:o.listStyle||"narrow",...o}).format(l)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let o="P";return this.years!==0&&(o+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(o+=this.months+this.quarters*3+"M"),this.weeks!==0&&(o+=this.weeks+"W"),this.days!==0&&(o+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(o+="T"),this.hours!==0&&(o+=this.hours+"H"),this.minutes!==0&&(o+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(o+=ko(this.seconds+this.milliseconds/1e3,3)+"S"),o==="P"&&(o+="T0S"),o}toISOTime(o={}){if(!this.isValid)return null;const l=this.toMillis();return l<0||l>=864e5?null:(o={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...o,includeOffset:!1},J.fromMillis(l,{zone:"UTC"}).toISOTime(o))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yf(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(o){if(!this.isValid)return this;const l=re.fromDurationLike(o),m={};for(const p of dn)(Dn(l.values,p)||Dn(this.values,p))&&(m[p]=l.get(p)+this.get(p));return Lt(this,{values:m},!0)}minus(o){if(!this.isValid)return this;const l=re.fromDurationLike(o);return this.plus(l.negate())}mapUnits(o){if(!this.isValid)return this;const l={};for(const m of Object.keys(this.values))l[m]=Mf(o(this.values[m],m));return Lt(this,{values:l},!0)}get(o){return this[re.normalizeUnit(o)]}set(o){if(!this.isValid)return this;const l={...this.values,...ai(o,re.normalizeUnit)};return Lt(this,{values:l})}reconfigure({locale:o,numberingSystem:l,conversionAccuracy:m,matrix:p}={}){const E={loc:this.loc.clone({locale:o,numberingSystem:l}),matrix:p,conversionAccuracy:m};return Lt(this,E)}as(o){return this.isValid?this.shiftTo(o).get(o):NaN}normalize(){if(!this.isValid)return this;const o=this.toObject();return Xf(this.matrix,o),Lt(this,{values:o},!0)}rescale(){if(!this.isValid)return this;const o=wT(this.normalize().shiftToAll().toObject());return Lt(this,{values:o},!0)}shiftTo(...o){if(!this.isValid)return this;if(o.length===0)return this;o=o.map(E=>re.normalizeUnit(E));const l={},m={},p=this.toObject();let w;for(const E of dn)if(o.indexOf(E)>=0){w=E;let x=0;for(const j in m)x+=this.matrix[j][E]*m[j],m[j]=0;Nt(p[E])&&(x+=p[E]);const M=Math.trunc(x);l[E]=M,m[E]=(x*1e3-M*1e3)/1e3}else Nt(p[E])&&(m[E]=p[E]);for(const E in m)m[E]!==0&&(l[w]+=E===w?m[E]:m[E]/this.matrix[w][E]);return Xf(this.matrix,l),Lt(this,{values:l},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const o={};for(const l of Object.keys(this.values))o[l]=this.values[l]===0?0:-this.values[l];return Lt(this,{values:o},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(o){if(!this.isValid||!o.isValid||!this.loc.equals(o.loc))return!1;function l(m,p){return m===void 0||m===0?p===void 0||p===0:m===p}for(const m of dn)if(!l(this.values[m],o.values[m]))return!1;return!0}}const Wn="Invalid Interval";function AT(f,o){return!f||!f.isValid?he.invalid("missing or invalid start"):!o||!o.isValid?he.invalid("missing or invalid end"):o<f?he.invalid("end before start",`The end of an interval must be after its start, but you had start=${f.toISO()} and end=${o.toISO()}`):null}class he{constructor(o){this.s=o.start,this.e=o.end,this.invalid=o.invalid||null,this.isLuxonInterval=!0}static invalid(o,l=null){if(!o)throw new a("need to specify a reason the Interval is invalid");const m=o instanceof Xe?o:new Xe(o,l);if(fe.throwOnInvalid)throw new n(m);return new he({invalid:m})}static fromDateTimes(o,l){const m=Br(o),p=Br(l),w=AT(m,p);return w??new he({start:m,end:p})}static after(o,l){const m=re.fromDurationLike(l),p=Br(o);return he.fromDateTimes(p,p.plus(m))}static before(o,l){const m=re.fromDurationLike(l),p=Br(o);return he.fromDateTimes(p.minus(m),p)}static fromISO(o,l){const[m,p]=(o||"").split("/",2);if(m&&p){let w,E;try{w=J.fromISO(m,l),E=w.isValid}catch{E=!1}let x,M;try{x=J.fromISO(p,l),M=x.isValid}catch{M=!1}if(E&&M)return he.fromDateTimes(w,x);if(E){const j=re.fromISO(p,l);if(j.isValid)return he.after(w,j)}else if(M){const j=re.fromISO(m,l);if(j.isValid)return he.before(x,j)}}return he.invalid("unparsable",`the input "${o}" can't be parsed as ISO 8601`)}static isInterval(o){return o&&o.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(o="milliseconds"){return this.isValid?this.toDuration(o).get(o):NaN}count(o="milliseconds",l){if(!this.isValid)return NaN;const m=this.start.startOf(o,l);let p;return l!=null&&l.useLocaleWeeks?p=this.end.reconfigure({locale:m.locale}):p=this.end,p=p.startOf(o,l),Math.floor(p.diff(m,o).get(o))+(p.valueOf()!==this.end.valueOf())}hasSame(o){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,o):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(o){return this.isValid?this.s>o:!1}isBefore(o){return this.isValid?this.e<=o:!1}contains(o){return this.isValid?this.s<=o&&this.e>o:!1}set({start:o,end:l}={}){return this.isValid?he.fromDateTimes(o||this.s,l||this.e):this}splitAt(...o){if(!this.isValid)return[];const l=o.map(Br).filter(E=>this.contains(E)).sort((E,x)=>E.toMillis()-x.toMillis()),m=[];let{s:p}=this,w=0;for(;p<this.e;){const E=l[w]||this.e,x=+E>+this.e?this.e:E;m.push(he.fromDateTimes(p,x)),p=x,w+=1}return m}splitBy(o){const l=re.fromDurationLike(o);if(!this.isValid||!l.isValid||l.as("milliseconds")===0)return[];let{s:m}=this,p=1,w;const E=[];for(;m<this.e;){const x=this.start.plus(l.mapUnits(M=>M*p));w=+x>+this.e?this.e:x,E.push(he.fromDateTimes(m,w)),m=w,p+=1}return E}divideEqually(o){return this.isValid?this.splitBy(this.length()/o).slice(0,o):[]}overlaps(o){return this.e>o.s&&this.s<o.e}abutsStart(o){return this.isValid?+this.e==+o.s:!1}abutsEnd(o){return this.isValid?+o.e==+this.s:!1}engulfs(o){return this.isValid?this.s<=o.s&&this.e>=o.e:!1}equals(o){return!this.isValid||!o.isValid?!1:this.s.equals(o.s)&&this.e.equals(o.e)}intersection(o){if(!this.isValid)return this;const l=this.s>o.s?this.s:o.s,m=this.e<o.e?this.e:o.e;return l>=m?null:he.fromDateTimes(l,m)}union(o){if(!this.isValid)return this;const l=this.s<o.s?this.s:o.s,m=this.e>o.e?this.e:o.e;return he.fromDateTimes(l,m)}static merge(o){const[l,m]=o.sort((p,w)=>p.s-w.s).reduce(([p,w],E)=>w?w.overlaps(E)||w.abutsStart(E)?[p,w.union(E)]:[p.concat([w]),E]:[p,E],[[],null]);return m&&l.push(m),l}static xor(o){let l=null,m=0;const p=[],w=o.map(M=>[{time:M.s,type:"s"},{time:M.e,type:"e"}]),E=Array.prototype.concat(...w),x=E.sort((M,j)=>M.time-j.time);for(const M of x)m+=M.type==="s"?1:-1,m===1?l=M.time:(l&&+l!=+M.time&&p.push(he.fromDateTimes(l,M.time)),l=null);return he.merge(p)}difference(...o){return he.xor([this].concat(o)).map(l=>this.intersection(l)).filter(l=>l&&!l.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Wn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(o=g,l={}){return this.isValid?Oe.create(this.s.loc.clone(l),o).formatInterval(this):Wn}toISO(o){return this.isValid?`${this.s.toISO(o)}/${this.e.toISO(o)}`:Wn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Wn}toISOTime(o){return this.isValid?`${this.s.toISOTime(o)}/${this.e.toISOTime(o)}`:Wn}toFormat(o,{separator:l=" – "}={}){return this.isValid?`${this.s.toFormat(o)}${l}${this.e.toFormat(o)}`:Wn}toDuration(o,l){return this.isValid?this.e.diff(this.s,o,l):re.invalid(this.invalidReason)}mapEndpoints(o){return he.fromDateTimes(o(this.s),o(this.e))}}class jr{static hasDST(o=fe.defaultZone){const l=J.now().setZone(o).set({month:12});return!o.isUniversal&&l.offset!==l.set({month:6}).offset}static isValidIANAZone(o){return at.isValidZone(o)}static normalizeZone(o){return $t(o,fe.defaultZone)}static getStartOfWeek({locale:o=null,locObj:l=null}={}){return(l||ce.create(o)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:o=null,locObj:l=null}={}){return(l||ce.create(o)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:o=null,locObj:l=null}={}){return(l||ce.create(o)).getWeekendDays().slice()}static months(o="long",{locale:l=null,numberingSystem:m=null,locObj:p=null,outputCalendar:w="gregory"}={}){return(p||ce.create(l,m,w)).months(o)}static monthsFormat(o="long",{locale:l=null,numberingSystem:m=null,locObj:p=null,outputCalendar:w="gregory"}={}){return(p||ce.create(l,m,w)).months(o,!0)}static weekdays(o="long",{locale:l=null,numberingSystem:m=null,locObj:p=null}={}){return(p||ce.create(l,m,null)).weekdays(o)}static weekdaysFormat(o="long",{locale:l=null,numberingSystem:m=null,locObj:p=null}={}){return(p||ce.create(l,m,null)).weekdays(o,!0)}static meridiems({locale:o=null}={}){return ce.create(o).meridiems()}static eras(o="short",{locale:l=null}={}){return ce.create(l,null,"gregory").eras(o)}static features(){return{relative:If(),localeWeek:Of()}}}function Qf(f,o){const l=p=>p.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),m=l(o)-l(f);return Math.floor(re.fromMillis(m).as("days"))}function vT(f,o,l){const m=[["years",(M,j)=>j.year-M.year],["quarters",(M,j)=>j.quarter-M.quarter+(j.year-M.year)*4],["months",(M,j)=>j.month-M.month+(j.year-M.year)*12],["weeks",(M,j)=>{const z=Qf(M,j);return(z-z%7)/7}],["days",Qf]],p={},w=f;let E,x;for(const[M,j]of m)l.indexOf(M)>=0&&(E=M,p[M]=j(f,o),x=w.plus(p),x>o?(p[M]--,f=w.plus(p),f>o&&(x=f,p[M]--,f=w.plus(p))):f=x);return[f,p,x,E]}function ST(f,o,l,m){let[p,w,E,x]=vT(f,o,l);const M=o-p,j=l.filter(ne=>["hours","minutes","seconds","milliseconds"].indexOf(ne)>=0);j.length===0&&(E<o&&(E=p.plus({[x]:1})),E!==p&&(w[x]=(w[x]||0)+M/(E-p)));const z=re.fromObject(w,m);return j.length>0?re.fromMillis(M,m).shiftTo(...j).plus(z):z}const ET="missing Intl.DateTimeFormat.formatToParts support";function ie(f,o=l=>l){return{regex:f,deser:([l])=>o(hE(l))}}const eh="[  ]",th=new RegExp(eh,"g");function TT(f){return f.replace(/\./g,"\\.?").replace(th,eh)}function nh(f){return f.replace(/\./g,"").replace(th," ").toLowerCase()}function Qe(f,o){return f===null?null:{regex:RegExp(f.map(TT).join("|")),deser:([l])=>f.findIndex(m=>nh(l)===nh(m))+o}}function rh(f,o){return{regex:f,deser:([,l,m])=>ii(l,m),groups:o}}function ci(f){return{regex:f,deser:([o])=>o}}function kT(f){return f.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function xT(f,o){const l=Ye(o),m=Ye(o,"{2}"),p=Ye(o,"{3}"),w=Ye(o,"{4}"),E=Ye(o,"{6}"),x=Ye(o,"{1,2}"),M=Ye(o,"{1,3}"),j=Ye(o,"{1,6}"),z=Ye(o,"{1,9}"),ne=Ye(o,"{2,4}"),_e=Ye(o,"{4,6}"),Z=ot=>({regex:RegExp(kT(ot.val)),deser:([Gn])=>Gn,literal:!0}),zn=(ot=>{if(f.literal)return Z(ot);switch(ot.val){case"G":return Qe(o.eras("short"),0);case"GG":return Qe(o.eras("long"),0);case"y":return ie(j);case"yy":return ie(ne,xo);case"yyyy":return ie(w);case"yyyyy":return ie(_e);case"yyyyyy":return ie(E);case"M":return ie(x);case"MM":return ie(m);case"MMM":return Qe(o.months("short",!0),1);case"MMMM":return Qe(o.months("long",!0),1);case"L":return ie(x);case"LL":return ie(m);case"LLL":return Qe(o.months("short",!1),1);case"LLLL":return Qe(o.months("long",!1),1);case"d":return ie(x);case"dd":return ie(m);case"o":return ie(M);case"ooo":return ie(p);case"HH":return ie(m);case"H":return ie(x);case"hh":return ie(m);case"h":return ie(x);case"mm":return ie(m);case"m":return ie(x);case"q":return ie(x);case"qq":return ie(m);case"s":return ie(x);case"ss":return ie(m);case"S":return ie(M);case"SSS":return ie(p);case"u":return ci(z);case"uu":return ci(x);case"uuu":return ie(l);case"a":return Qe(o.meridiems(),0);case"kkkk":return ie(w);case"kk":return ie(ne,xo);case"W":return ie(x);case"WW":return ie(m);case"E":case"c":return ie(l);case"EEE":return Qe(o.weekdays("short",!1),1);case"EEEE":return Qe(o.weekdays("long",!1),1);case"ccc":return Qe(o.weekdays("short",!0),1);case"cccc":return Qe(o.weekdays("long",!0),1);case"Z":case"ZZ":return rh(new RegExp(`([+-]${x.source})(?::(${m.source}))?`),2);case"ZZZ":return rh(new RegExp(`([+-]${x.source})(${m.source})?`),2);case"z":return ci(/[a-z_+-/]{1,256}?/i);case" ":return ci(/[^\S\n\r]/);default:return Z(ot)}})(f)||{invalidReason:ET};return zn.token=f,zn}const IT={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function OT(f,o,l){const{type:m,value:p}=f;if(m==="literal"){const M=/^\s+$/.test(p);return{literal:!M,val:M?" ":p}}const w=o[m];let E=m;m==="hour"&&(o.hour12!=null?E=o.hour12?"hour12":"hour24":o.hourCycle!=null?o.hourCycle==="h11"||o.hourCycle==="h12"?E="hour12":E="hour24":E=l.hour12?"hour12":"hour24");let x=IT[E];if(typeof x=="object"&&(x=x[w]),x)return{literal:!1,val:x}}function CT(f){return[`^${f.map(l=>l.regex).reduce((l,m)=>`${l}(${m.source})`,"")}$`,f]}function RT(f,o,l){const m=f.match(o);if(m){const p={};let w=1;for(const E in l)if(Dn(l,E)){const x=l[E],M=x.groups?x.groups+1:1;!x.literal&&x.token&&(p[x.token.val[0]]=x.deser(m.slice(w,w+M))),w+=M}return[m,p]}else return[m,{}]}function PT(f){const o=w=>{switch(w){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let l=null,m;return G(f.z)||(l=at.create(f.z)),G(f.Z)||(l||(l=new Ie(f.Z)),m=f.Z),G(f.q)||(f.M=(f.q-1)*3+1),G(f.h)||(f.h<12&&f.a===1?f.h+=12:f.h===12&&f.a===0&&(f.h=0)),f.G===0&&f.y&&(f.y=-f.y),G(f.u)||(f.S=To(f.u)),[Object.keys(f).reduce((w,E)=>{const x=o(E);return x&&(w[x]=f[E]),w},{}),l,m]}let Ro=null;function MT(){return Ro||(Ro=J.fromMillis(1555555555555)),Ro}function $T(f,o){if(f.literal)return f;const l=Oe.macroTokenToFormatOpts(f.val),m=oh(l,o);return m==null||m.includes(void 0)?f:m}function sh(f,o){return Array.prototype.concat(...f.map(l=>$T(l,o)))}class ih{constructor(o,l){if(this.locale=o,this.format=l,this.tokens=sh(Oe.parseFormat(l),o),this.units=this.tokens.map(m=>xT(m,o)),this.disqualifyingUnit=this.units.find(m=>m.invalidReason),!this.disqualifyingUnit){const[m,p]=CT(this.units);this.regex=RegExp(m,"i"),this.handlers=p}}explainFromTokens(o){if(this.isValid){const[l,m]=RT(o,this.regex,this.handlers),[p,w,E]=m?PT(m):[null,null,void 0];if(Dn(m,"a")&&Dn(m,"H"))throw new s("Can't include meridiem when specifying 24-hour format");return{input:o,tokens:this.tokens,regex:this.regex,rawMatches:l,matches:m,result:p,zone:w,specificOffset:E}}else return{input:o,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ah(f,o,l){return new ih(f,l).explainFromTokens(o)}function NT(f,o,l){const{result:m,zone:p,specificOffset:w,invalidReason:E}=ah(f,o,l);return[m,p,w,E]}function oh(f,o){if(!f)return null;const m=Oe.create(o,f).dtFormatter(MT()),p=m.formatToParts(),w=m.resolvedOptions();return p.map(E=>OT(E,f,w))}const Po="Invalid DateTime",DT=864e13;function Fr(f){return new Xe("unsupported zone",`the zone "${f.name}" is not supported`)}function Mo(f){return f.weekData===null&&(f.weekData=ti(f.c)),f.weekData}function $o(f){return f.localWeekData===null&&(f.localWeekData=ti(f.c,f.loc.getMinDaysInFirstWeek(),f.loc.getStartOfWeek())),f.localWeekData}function fn(f,o){const l={ts:f.ts,zone:f.zone,c:f.c,o:f.o,loc:f.loc,invalid:f.invalid};return new J({...l,...o,old:l})}function ch(f,o,l){let m=f-o*60*1e3;const p=l.offset(m);if(o===p)return[m,o];m-=(p-o)*60*1e3;const w=l.offset(m);return p===w?[m,p]:[f-Math.min(p,w)*60*1e3,Math.max(p,w)]}function ui(f,o){f+=o*60*1e3;const l=new Date(f);return{year:l.getUTCFullYear(),month:l.getUTCMonth()+1,day:l.getUTCDate(),hour:l.getUTCHours(),minute:l.getUTCMinutes(),second:l.getUTCSeconds(),millisecond:l.getUTCMilliseconds()}}function li(f,o,l){return ch(si(f),o,l)}function uh(f,o){const l=f.o,m=f.c.year+Math.trunc(o.years),p=f.c.month+Math.trunc(o.months)+Math.trunc(o.quarters)*3,w={...f.c,year:m,month:p,day:Math.min(f.c.day,ri(m,p))+Math.trunc(o.days)+Math.trunc(o.weeks)*7},E=re.fromObject({years:o.years-Math.trunc(o.years),quarters:o.quarters-Math.trunc(o.quarters),months:o.months-Math.trunc(o.months),weeks:o.weeks-Math.trunc(o.weeks),days:o.days-Math.trunc(o.days),hours:o.hours,minutes:o.minutes,seconds:o.seconds,milliseconds:o.milliseconds}).as("milliseconds"),x=si(w);let[M,j]=ch(x,l,f.zone);return E!==0&&(M+=E,j=f.zone.offset(M)),{ts:M,o:j}}function Hn(f,o,l,m,p,w){const{setZone:E,zone:x}=l;if(f&&Object.keys(f).length!==0||o){const M=o||x,j=J.fromObject(f,{...l,zone:M,specificOffset:w});return E?j:j.setZone(x)}else return J.invalid(new Xe("unparsable",`the input "${p}" can't be parsed as ${m}`))}function di(f,o,l=!0){return f.isValid?Oe.create(ce.create("en-US"),{allowZ:l,forceSimple:!0}).formatDateTimeFromString(f,o):null}function No(f,o){const l=f.c.year>9999||f.c.year<0;let m="";return l&&f.c.year>=0&&(m+="+"),m+=be(f.c.year,l?6:4),o?(m+="-",m+=be(f.c.month),m+="-",m+=be(f.c.day)):(m+=be(f.c.month),m+=be(f.c.day)),m}function lh(f,o,l,m,p,w){let E=be(f.c.hour);return o?(E+=":",E+=be(f.c.minute),(f.c.millisecond!==0||f.c.second!==0||!l)&&(E+=":")):E+=be(f.c.minute),(f.c.millisecond!==0||f.c.second!==0||!l)&&(E+=be(f.c.second),(f.c.millisecond!==0||!m)&&(E+=".",E+=be(f.c.millisecond,3))),p&&(f.isOffsetFixed&&f.offset===0&&!w?E+="Z":f.o<0?(E+="-",E+=be(Math.trunc(-f.o/60)),E+=":",E+=be(Math.trunc(-f.o%60))):(E+="+",E+=be(Math.trunc(f.o/60)),E+=":",E+=be(Math.trunc(f.o%60)))),w&&(E+="["+f.zone.ianaName+"]"),E}const dh={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},LT={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},jT={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fh=["year","month","day","hour","minute","second","millisecond"],FT=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],UT=["year","ordinal","hour","minute","second","millisecond"];function BT(f){const o={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[f.toLowerCase()];if(!o)throw new i(f);return o}function hh(f){switch(f.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return BT(f)}}function VT(f){if(Ur===void 0&&(Ur=fe.now()),f.type!=="iana")return f.offset(Ur);const o=f.name;let l=Do.get(o);return l===void 0&&(l=f.offset(Ur),Do.set(o,l)),l}function mh(f,o){const l=$t(o.zone,fe.defaultZone);if(!l.isValid)return J.invalid(Fr(l));const m=ce.fromObject(o);let p,w;if(G(f.year))p=fe.now();else{for(const M of fh)G(f[M])&&(f[M]=dh[M]);const E=kf(f)||xf(f);if(E)return J.invalid(E);const x=VT(l);[p,w]=li(f,x,l)}return new J({ts:p,zone:l,loc:m,o:w})}function gh(f,o,l){const m=G(l.round)?!0:l.round,p=(E,x)=>(E=ko(E,m||l.calendary?0:2,!0),o.loc.clone(l).relFormatter(l).format(E,x)),w=E=>l.calendary?o.hasSame(f,E)?0:o.startOf(E).diff(f.startOf(E),E).get(E):o.diff(f,E).get(E);if(l.unit)return p(w(l.unit),l.unit);for(const E of l.units){const x=w(E);if(Math.abs(x)>=1)return p(x,E)}return p(f>o?-0:0,l.units[l.units.length-1])}function ph(f){let o={},l;return f.length>0&&typeof f[f.length-1]=="object"?(o=f[f.length-1],l=Array.from(f).slice(0,f.length-1)):l=Array.from(f),[o,l]}let Ur;const Do=new Map;class J{constructor(o){const l=o.zone||fe.defaultZone;let m=o.invalid||(Number.isNaN(o.ts)?new Xe("invalid input"):null)||(l.isValid?null:Fr(l));this.ts=G(o.ts)?fe.now():o.ts;let p=null,w=null;if(!m)if(o.old&&o.old.ts===this.ts&&o.old.zone.equals(l))[p,w]=[o.old.c,o.old.o];else{const x=Nt(o.o)&&!o.old?o.o:l.offset(this.ts);p=ui(this.ts,x),m=Number.isNaN(p.year)?new Xe("invalid input"):null,p=m?null:p,w=m?null:x}this._zone=l,this.loc=o.loc||ce.create(),this.invalid=m,this.weekData=null,this.localWeekData=null,this.c=p,this.o=w,this.isLuxonDateTime=!0}static now(){return new J({})}static local(){const[o,l]=ph(arguments),[m,p,w,E,x,M,j]=l;return mh({year:m,month:p,day:w,hour:E,minute:x,second:M,millisecond:j},o)}static utc(){const[o,l]=ph(arguments),[m,p,w,E,x,M,j]=l;return o.zone=Ie.utcInstance,mh({year:m,month:p,day:w,hour:E,minute:x,second:M,millisecond:j},o)}static fromJSDate(o,l={}){const m=_E(o)?o.valueOf():NaN;if(Number.isNaN(m))return J.invalid("invalid input");const p=$t(l.zone,fe.defaultZone);return p.isValid?new J({ts:m,zone:p,loc:ce.fromObject(l)}):J.invalid(Fr(p))}static fromMillis(o,l={}){if(Nt(o))return o<-864e13||o>DT?J.invalid("Timestamp out of range"):new J({ts:o,zone:$t(l.zone,fe.defaultZone),loc:ce.fromObject(l)});throw new a(`fromMillis requires a numerical input, but received a ${typeof o} with value ${o}`)}static fromSeconds(o,l={}){if(Nt(o))return new J({ts:o*1e3,zone:$t(l.zone,fe.defaultZone),loc:ce.fromObject(l)});throw new a("fromSeconds requires a numerical input")}static fromObject(o,l={}){o=o||{};const m=$t(l.zone,fe.defaultZone);if(!m.isValid)return J.invalid(Fr(m));const p=ce.fromObject(l),w=ai(o,hh),{minDaysInFirstWeek:E,startOfWeek:x}=Tf(w,p),M=fe.now(),j=G(l.specificOffset)?m.offset(M):l.specificOffset,z=!G(w.ordinal),ne=!G(w.year),_e=!G(w.month)||!G(w.day),Z=ne||_e,Ee=w.weekYear||w.weekNumber;if((Z||z)&&Ee)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_e&&z)throw new s("Can't mix ordinal dates with month/day");const zn=Ee||w.weekday&&!Z;let ot,Gn,Vr=ui(M,j);zn?(ot=FT,Gn=LT,Vr=ti(Vr,E,x)):z?(ot=UT,Gn=jT,Vr=So(Vr)):(ot=fh,Gn=dh);let yh=!1;for(const Wr of ot){const JT=w[Wr];G(JT)?yh?w[Wr]=Gn[Wr]:w[Wr]=Vr[Wr]:yh=!0}const WT=zn?gE(w,E,x):z?pE(w):kf(w),_h=WT||xf(w);if(_h)return J.invalid(_h);const HT=zn?Sf(w,E,x):z?Ef(w):w,[zT,GT]=li(HT,j,m),qr=new J({ts:zT,zone:m,o:GT,loc:p});return w.weekday&&Z&&o.weekday!==qr.weekday?J.invalid("mismatched weekday",`you can't specify both a weekday of ${w.weekday} and a date of ${qr.toISO()}`):qr.isValid?qr:J.invalid(qr.invalid)}static fromISO(o,l={}){const[m,p]=oT(o);return Hn(m,p,l,"ISO 8601",o)}static fromRFC2822(o,l={}){const[m,p]=cT(o);return Hn(m,p,l,"RFC 2822",o)}static fromHTTP(o,l={}){const[m,p]=uT(o);return Hn(m,p,l,"HTTP",l)}static fromFormat(o,l,m={}){if(G(o)||G(l))throw new a("fromFormat requires an input string and a format");const{locale:p=null,numberingSystem:w=null}=m,E=ce.fromOpts({locale:p,numberingSystem:w,defaultToEN:!0}),[x,M,j,z]=NT(E,o,l);return z?J.invalid(z):Hn(x,M,m,`format ${l}`,o,j)}static fromString(o,l,m={}){return J.fromFormat(o,l,m)}static fromSQL(o,l={}){const[m,p]=pT(o);return Hn(m,p,l,"SQL",o)}static invalid(o,l=null){if(!o)throw new a("need to specify a reason the DateTime is invalid");const m=o instanceof Xe?o:new Xe(o,l);if(fe.throwOnInvalid)throw new e(m);return new J({invalid:m})}static isDateTime(o){return o&&o.isLuxonDateTime||!1}static parseFormatForOpts(o,l={}){const m=oh(o,ce.fromObject(l));return m?m.map(p=>p?p.val:null).join(""):null}static expandFormat(o,l={}){return sh(Oe.parseFormat(o),ce.fromObject(l)).map(p=>p.val).join("")}static resetCache(){Ur=void 0,Do.clear()}get(o){return this[o]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Mo(this).weekYear:NaN}get weekNumber(){return this.isValid?Mo(this).weekNumber:NaN}get weekday(){return this.isValid?Mo(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?$o(this).weekday:NaN}get localWeekNumber(){return this.isValid?$o(this).weekNumber:NaN}get localWeekYear(){return this.isValid?$o(this).weekYear:NaN}get ordinal(){return this.isValid?So(this.c).ordinal:NaN}get monthShort(){return this.isValid?jr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?jr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?jr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?jr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const o=864e5,l=6e4,m=si(this.c),p=this.zone.offset(m-o),w=this.zone.offset(m+o),E=this.zone.offset(m-p*l),x=this.zone.offset(m-w*l);if(E===x)return[this];const M=m-E*l,j=m-x*l,z=ui(M,E),ne=ui(j,x);return z.hour===ne.hour&&z.minute===ne.minute&&z.second===ne.second&&z.millisecond===ne.millisecond?[fn(this,{ts:M}),fn(this,{ts:j})]:[this]}get isInLeapYear(){return Mr(this.year)}get daysInMonth(){return ri(this.year,this.month)}get daysInYear(){return this.isValid?Ln(this.year):NaN}get weeksInWeekYear(){return this.isValid?$r(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?$r(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(o={}){const{locale:l,numberingSystem:m,calendar:p}=Oe.create(this.loc.clone(o),o).resolvedOptions(this);return{locale:l,numberingSystem:m,outputCalendar:p}}toUTC(o=0,l={}){return this.setZone(Ie.instance(o),l)}toLocal(){return this.setZone(fe.defaultZone)}setZone(o,{keepLocalTime:l=!1,keepCalendarTime:m=!1}={}){if(o=$t(o,fe.defaultZone),o.equals(this.zone))return this;if(o.isValid){let p=this.ts;if(l||m){const w=o.offset(this.ts),E=this.toObject();[p]=li(E,w,o)}return fn(this,{ts:p,zone:o})}else return J.invalid(Fr(o))}reconfigure({locale:o,numberingSystem:l,outputCalendar:m}={}){const p=this.loc.clone({locale:o,numberingSystem:l,outputCalendar:m});return fn(this,{loc:p})}setLocale(o){return this.reconfigure({locale:o})}set(o){if(!this.isValid)return this;const l=ai(o,hh),{minDaysInFirstWeek:m,startOfWeek:p}=Tf(l,this.loc),w=!G(l.weekYear)||!G(l.weekNumber)||!G(l.weekday),E=!G(l.ordinal),x=!G(l.year),M=!G(l.month)||!G(l.day),j=x||M,z=l.weekYear||l.weekNumber;if((j||E)&&z)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(M&&E)throw new s("Can't mix ordinal dates with month/day");let ne;w?ne=Sf({...ti(this.c,m,p),...l},m,p):G(l.ordinal)?(ne={...this.toObject(),...l},G(l.day)&&(ne.day=Math.min(ri(ne.year,ne.month),ne.day))):ne=Ef({...So(this.c),...l});const[_e,Z]=li(ne,this.o,this.zone);return fn(this,{ts:_e,o:Z})}plus(o){if(!this.isValid)return this;const l=re.fromDurationLike(o);return fn(this,uh(this,l))}minus(o){if(!this.isValid)return this;const l=re.fromDurationLike(o).negate();return fn(this,uh(this,l))}startOf(o,{useLocaleWeeks:l=!1}={}){if(!this.isValid)return this;const m={},p=re.normalizeUnit(o);switch(p){case"years":m.month=1;case"quarters":case"months":m.day=1;case"weeks":case"days":m.hour=0;case"hours":m.minute=0;case"minutes":m.second=0;case"seconds":m.millisecond=0;break}if(p==="weeks")if(l){const w=this.loc.getStartOfWeek(),{weekday:E}=this;E<w&&(m.weekNumber=this.weekNumber-1),m.weekday=w}else m.weekday=1;if(p==="quarters"){const w=Math.ceil(this.month/3);m.month=(w-1)*3+1}return this.set(m)}endOf(o,l){return this.isValid?this.plus({[o]:1}).startOf(o,l).minus(1):this}toFormat(o,l={}){return this.isValid?Oe.create(this.loc.redefaultToEN(l)).formatDateTimeFromString(this,o):Po}toLocaleString(o=g,l={}){return this.isValid?Oe.create(this.loc.clone(l),o).formatDateTime(this):Po}toLocaleParts(o={}){return this.isValid?Oe.create(this.loc.clone(o),o).formatDateTimeParts(this):[]}toISO({format:o="extended",suppressSeconds:l=!1,suppressMilliseconds:m=!1,includeOffset:p=!0,extendedZone:w=!1}={}){if(!this.isValid)return null;const E=o==="extended";let x=No(this,E);return x+="T",x+=lh(this,E,l,m,p,w),x}toISODate({format:o="extended"}={}){return this.isValid?No(this,o==="extended"):null}toISOWeekDate(){return di(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:o=!1,suppressSeconds:l=!1,includeOffset:m=!0,includePrefix:p=!1,extendedZone:w=!1,format:E="extended"}={}){return this.isValid?(p?"T":"")+lh(this,E==="extended",l,o,m,w):null}toRFC2822(){return di(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return di(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?No(this,!0):null}toSQLTime({includeOffset:o=!0,includeZone:l=!1,includeOffsetSpace:m=!0}={}){let p="HH:mm:ss.SSS";return(l||o)&&(m&&(p+=" "),l?p+="z":o&&(p+="ZZ")),di(this,p,!0)}toSQL(o={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(o)}`:null}toString(){return this.isValid?this.toISO():Po}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(o={}){if(!this.isValid)return{};const l={...this.c};return o.includeConfig&&(l.outputCalendar=this.outputCalendar,l.numberingSystem=this.loc.numberingSystem,l.locale=this.loc.locale),l}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(o,l="milliseconds",m={}){if(!this.isValid||!o.isValid)return re.invalid("created by diffing an invalid DateTime");const p={locale:this.locale,numberingSystem:this.numberingSystem,...m},w=bE(l).map(re.normalizeUnit),E=o.valueOf()>this.valueOf(),x=E?this:o,M=E?o:this,j=ST(x,M,w,p);return E?j.negate():j}diffNow(o="milliseconds",l={}){return this.diff(J.now(),o,l)}until(o){return this.isValid?he.fromDateTimes(this,o):this}hasSame(o,l,m){if(!this.isValid)return!1;const p=o.valueOf(),w=this.setZone(o.zone,{keepLocalTime:!0});return w.startOf(l,m)<=p&&p<=w.endOf(l,m)}equals(o){return this.isValid&&o.isValid&&this.valueOf()===o.valueOf()&&this.zone.equals(o.zone)&&this.loc.equals(o.loc)}toRelative(o={}){if(!this.isValid)return null;const l=o.base||J.fromObject({},{zone:this.zone}),m=o.padding?this<l?-o.padding:o.padding:0;let p=["years","months","days","hours","minutes","seconds"],w=o.unit;return Array.isArray(o.unit)&&(p=o.unit,w=void 0),gh(l,this.plus(m),{...o,numeric:"always",units:p,unit:w})}toRelativeCalendar(o={}){return this.isValid?gh(o.base||J.fromObject({},{zone:this.zone}),this,{...o,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...o){if(!o.every(J.isDateTime))throw new a("min requires all arguments be DateTimes");return Cf(o,l=>l.valueOf(),Math.min)}static max(...o){if(!o.every(J.isDateTime))throw new a("max requires all arguments be DateTimes");return Cf(o,l=>l.valueOf(),Math.max)}static fromFormatExplain(o,l,m={}){const{locale:p=null,numberingSystem:w=null}=m,E=ce.fromOpts({locale:p,numberingSystem:w,defaultToEN:!0});return ah(E,o,l)}static fromStringExplain(o,l,m={}){return J.fromFormatExplain(o,l,m)}static buildFormatParser(o,l={}){const{locale:m=null,numberingSystem:p=null}=l,w=ce.fromOpts({locale:m,numberingSystem:p,defaultToEN:!0});return new ih(w,o)}static fromFormatParser(o,l,m={}){if(G(o)||G(l))throw new a("fromFormatParser requires an input string and a format parser");const{locale:p=null,numberingSystem:w=null}=m,E=ce.fromOpts({locale:p,numberingSystem:w,defaultToEN:!0});if(!E.equals(l.locale))throw new a(`fromFormatParser called with a locale of ${E}, but the format parser was created for ${l.locale}`);const{result:x,zone:M,specificOffset:j,invalidReason:z}=l.explainFromTokens(o);return z?J.invalid(z):Hn(x,M,m,`format ${l.format}`,o,j)}static get DATE_SHORT(){return g}static get DATE_MED(){return y}static get DATE_MED_WITH_WEEKDAY(){return b}static get DATE_FULL(){return k}static get DATE_HUGE(){return v}static get TIME_SIMPLE(){return A}static get TIME_WITH_SECONDS(){return T}static get TIME_WITH_SHORT_OFFSET(){return P}static get TIME_WITH_LONG_OFFSET(){return $}static get TIME_24_SIMPLE(){return U}static get TIME_24_WITH_SECONDS(){return F}static get TIME_24_WITH_SHORT_OFFSET(){return R}static get TIME_24_WITH_LONG_OFFSET(){return N}static get DATETIME_SHORT(){return _}static get DATETIME_SHORT_WITH_SECONDS(){return S}static get DATETIME_MED(){return I}static get DATETIME_MED_WITH_SECONDS(){return C}static get DATETIME_MED_WITH_WEEKDAY(){return D}static get DATETIME_FULL(){return L}static get DATETIME_FULL_WITH_SECONDS(){return q}static get DATETIME_HUGE(){return O}static get DATETIME_HUGE_WITH_SECONDS(){return W}}function Br(f){if(J.isDateTime(f))return f;if(f&&f.valueOf&&Nt(f.valueOf()))return J.fromJSDate(f);if(f&&typeof f=="object")return J.fromObject(f);throw new a(`Unknown datetime argument: ${f}, of type ${typeof f}`)}const qT="3.6.1";return Ne.DateTime=J,Ne.Duration=re,Ne.FixedOffsetZone=Ie,Ne.IANAZone=at,Ne.Info=jr,Ne.Interval=he,Ne.InvalidZone=uf,Ne.Settings=fe,Ne.SystemZone=oe,Ne.VERSION=qT,Ne.Zone=B,Ne}var eo,zd;function pS(){if(zd)return eo;zd=1;var t=gS();e.prototype.addYear=function(){this._date=this._date.plus({years:1})},e.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},e.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},e.prototype.addHour=function(){var n=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=n&&(this._date=this._date.plus({hours:1}))},e.prototype.addMinute=function(){var n=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<n&&(this._date=this._date.plus({hours:1}))},e.prototype.addSecond=function(){var n=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<n&&(this._date=this._date.plus({hours:1}))},e.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},e.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},e.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},e.prototype.subtractHour=function(){var n=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=n&&(this._date=this._date.minus({hours:1}))},e.prototype.subtractMinute=function(){var n=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>n&&(this._date=this._date.minus({hours:1}))},e.prototype.subtractSecond=function(){var n=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>n&&(this._date=this._date.minus({hours:1}))},e.prototype.getDate=function(){return this._date.day},e.prototype.getFullYear=function(){return this._date.year},e.prototype.getDay=function(){var n=this._date.weekday;return n==7?0:n},e.prototype.getMonth=function(){return this._date.month-1},e.prototype.getHours=function(){return this._date.hour},e.prototype.getMinutes=function(){return this._date.minute},e.prototype.getSeconds=function(){return this._date.second},e.prototype.getMilliseconds=function(){return this._date.millisecond},e.prototype.getTime=function(){return this._date.valueOf()},e.prototype.getUTCDate=function(){return this._getUTC().day},e.prototype.getUTCFullYear=function(){return this._getUTC().year},e.prototype.getUTCDay=function(){var n=this._getUTC().weekday;return n==7?0:n},e.prototype.getUTCMonth=function(){return this._getUTC().month-1},e.prototype.getUTCHours=function(){return this._getUTC().hour},e.prototype.getUTCMinutes=function(){return this._getUTC().minute},e.prototype.getUTCSeconds=function(){return this._getUTC().second},e.prototype.toISOString=function(){return this._date.toUTC().toISO()},e.prototype.toJSON=function(){return this._date.toJSON()},e.prototype.setDate=function(n){this._date=this._date.set({day:n})},e.prototype.setFullYear=function(n){this._date=this._date.set({year:n})},e.prototype.setDay=function(n){this._date=this._date.set({weekday:n})},e.prototype.setMonth=function(n){this._date=this._date.set({month:n+1})},e.prototype.setHours=function(n){this._date=this._date.set({hour:n})},e.prototype.setMinutes=function(n){this._date=this._date.set({minute:n})},e.prototype.setSeconds=function(n){this._date=this._date.set({second:n})},e.prototype.setMilliseconds=function(n){this._date=this._date.set({millisecond:n})},e.prototype._getUTC=function(){return this._date.toUTC()},e.prototype.toString=function(){return this.toDate().toString()},e.prototype.toDate=function(){return this._date.toJSDate()},e.prototype.isLastDayOfMonth=function(){var n=this._date.plus({days:1}).startOf("day");return this._date.month!==n.month},e.prototype.isLastWeekdayOfMonth=function(){var n=this._date.plus({days:7}).startOf("day");return this._date.month!==n.month};function e(n,r){var s={zone:r};if(n?n instanceof e?this._date=n._date:n instanceof Date?this._date=t.DateTime.fromJSDate(n,s):typeof n=="number"?this._date=t.DateTime.fromMillis(n,s):typeof n=="string"&&(this._date=t.DateTime.fromISO(n,s),this._date.isValid||(this._date=t.DateTime.fromRFC2822(n,s)),this._date.isValid||(this._date=t.DateTime.fromSQL(n,s)),this._date.isValid||(this._date=t.DateTime.fromFormat(n,"EEE, d MMM yyyy HH:mm:ss",s))):this._date=t.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(n));r&&r!==this._date.zoneName&&(this._date=this._date.setZone(r))}return eo=e,eo}var to,Gd;function yS(){if(Gd)return to;Gd=1;function t(s){return{start:s,count:1}}function e(s,i){s.end=i,s.step=i-s.start,s.count=2}function n(s,i,a){i&&(i.count===2?(s.push(t(i.start)),s.push(t(i.end))):s.push(i)),a&&s.push(a)}function r(s){for(var i=[],a=void 0,c=0;c<s.length;c++){var u=s[c];typeof u!="number"?(n(i,a,t(u)),a=void 0):a?a.count===1?e(a,u):a.step===u-a.end?(a.count++,a.end=u):a.count===2?(i.push(t(a.start)),a=t(a.end),e(a,u)):(n(i,a),a=t(u)):a=t(u)}return n(i,a),i}return to=r,to}var no,Jd;function _S(){if(Jd)return no;Jd=1;var t=yS();function e(n,r,s){var i=t(n);if(i.length===1){var a=i[0],c=a.step;if(c===1&&a.start===r&&a.end===s)return"*";if(c!==1&&a.start===r&&a.end===s-c+1)return"*/"+c}for(var u=[],d=0,h=i.length;d<h;++d){var g=i[d];if(g.count===1){u.push(g.start);continue}var c=g.step;if(g.step===1){u.push(g.start+"-"+g.end);continue}var y=g.start==0?g.count-1:g.count;g.step*y>g.end?u=u.concat(Array.from({length:g.end-g.start+1}).map(function(k,v){var A=g.start+v;return(A-g.start)%g.step===0?A:null}).filter(function(k){return k!=null})):g.end===s-g.step+1?u.push(g.start+"/"+g.step):u.push(g.start+"-"+g.end+"/"+g.step)}return u.join(",")}return no=e,no}var ro,Kd;function bS(){if(Kd)return ro;Kd=1;var t=pS(),e=_S(),n=1e4;function r(s,i){this._options=i,this._utc=i.utc||!1,this._tz=this._utc?"UTC":i.tz,this._currentDate=new t(i.currentDate,this._tz),this._startDate=i.startDate?new t(i.startDate,this._tz):null,this._endDate=i.endDate?new t(i.endDate,this._tz):null,this._isIterator=i.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=i.nthDayOfWeek||0,this.fields=r._freezeFields(s)}return r.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],r.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},r.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],r.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],r.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},r.parseDefaults=["0","*","*","*","*","*"],r.standardValidCharacters=/^[,*\d/-]+$/,r.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/,r.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/,r.validCharacters={second:r.standardValidCharacters,minute:r.standardValidCharacters,hour:r.standardValidCharacters,dayOfMonth:r.dayOfMonthValidCharacters,month:r.standardValidCharacters,dayOfWeek:r.dayOfWeekValidCharacters},r._isValidConstraintChar=function(i,a){return typeof a!="string"?!1:i.chars.some(function(c){return a.indexOf(c)>-1})},r._parseField=function(i,a,c){switch(i){case"month":case"dayOfWeek":var u=r.aliases[i];a=a.replace(/[a-z]{3}/gi,function(y){if(y=y.toLowerCase(),typeof u[y]<"u")return u[y];throw new Error('Validation error, cannot resolve alias "'+y+'"')});break}if(!r.validCharacters[i].test(a))throw new Error("Invalid characters, got value: "+a);a.indexOf("*")!==-1?a=a.replace(/\*/g,c.min+"-"+c.max):a.indexOf("?")!==-1&&(a=a.replace(/\?/g,c.min+"-"+c.max));function d(y){var b=[];function k(P){if(P instanceof Array)for(var $=0,U=P.length;$<U;$++){var F=P[$];if(r._isValidConstraintChar(c,F)){b.push(F);continue}if(typeof F!="number"||Number.isNaN(F)||F<c.min||F>c.max)throw new Error("Constraint error, got value "+F+" expected range "+c.min+"-"+c.max);b.push(F)}else{if(r._isValidConstraintChar(c,P)){b.push(P);return}var R=+P;if(Number.isNaN(R)||R<c.min||R>c.max)throw new Error("Constraint error, got value "+P+" expected range "+c.min+"-"+c.max);i==="dayOfWeek"&&(R=R%7),b.push(R)}}var v=y.split(",");if(!v.every(function(P){return P.length>0}))throw new Error("Invalid list value format");if(v.length>1)for(var A=0,T=v.length;A<T;A++)k(h(v[A]));else k(h(y));return b.sort(r._sortCompareFn),b}function h(y){var b=1,k=y.split("/");if(k.length>2)throw new Error("Invalid repeat: "+y);return k.length>1?(k[0]==+k[0]&&(k=[k[0]+"-"+c.max,k[1]]),g(k[0],k[k.length-1])):g(y,b)}function g(y,b){var k=[],v=y.split("-");if(v.length>1){if(v.length<2)return+y;if(!v[0].length){if(!v[1].length)throw new Error("Invalid range: "+y);return+y}var A=+v[0],T=+v[1];if(Number.isNaN(A)||Number.isNaN(T)||A<c.min||T>c.max)throw new Error("Constraint error, got range "+A+"-"+T+" expected range "+c.min+"-"+c.max);if(A>T)throw new Error("Invalid range: "+y);var P=+b;if(Number.isNaN(P)||P<=0)throw new Error("Constraint error, cannot repeat at every "+P+" time.");i==="dayOfWeek"&&T%7===0&&k.push(0);for(var $=A,U=T;$<=U;$++){var F=k.indexOf($)!==-1;!F&&P>0&&P%b===0?(P=1,k.push($)):P++}return k}return Number.isNaN(+y)?y:+y}return d(a)},r._sortCompareFn=function(s,i){var a=typeof s=="number",c=typeof i=="number";return a&&c?s-i:!a&&c?1:a&&!c?-1:s.localeCompare(i)},r._handleMaxDaysInMonth=function(s){if(s.month.length===1){var i=r.daysInMonth[s.month[0]-1];if(s.dayOfMonth[0]>i)throw new Error("Invalid explicit day of month definition");return s.dayOfMonth.filter(function(a){return a==="L"?!0:a<=i}).sort(r._sortCompareFn)}},r._freezeFields=function(s){for(var i=0,a=r.map.length;i<a;++i){var c=r.map[i],u=s[c];s[c]=Object.freeze(u)}return Object.freeze(s)},r.prototype._applyTimezoneShift=function(s,i,a){if(a==="Month"||a==="Day"){var c=s.getTime();s[i+a]();var u=s.getTime();c===u&&(s.getMinutes()===0&&s.getSeconds()===0?s.addHour():s.getMinutes()===59&&s.getSeconds()===59&&s.subtractHour())}else{var d=s.getHours();s[i+a]();var h=s.getHours(),g=h-d;g===2?this.fields.hour.length!==24&&(this._dstStart=h):g===0&&s.getMinutes()===0&&s.getSeconds()===0&&this.fields.hour.length!==24&&(this._dstEnd=h)}},r.prototype._findSchedule=function(i){function a(F,R){for(var N=0,_=R.length;N<_;N++)if(R[N]>=F)return R[N]===F;return R[0]===F}function c(F,R){if(R<6){if(F.getDate()<8&&R===1)return!0;var N=F.getDate()%7?1:0,_=F.getDate()-F.getDate()%7,S=Math.floor(_/7)+N;return S===R}return!1}function u(F){return F.length>0&&F.some(function(R){return typeof R=="string"&&R.indexOf("L")>=0})}i=i||!1;var d=i?"subtract":"add",h=new t(this._currentDate,this._tz),g=this._startDate,y=this._endDate,b=h.getTime(),k=0;function v(F){return F.some(function(R){if(!u([R]))return!1;var N=Number.parseInt(R[0])%7;if(Number.isNaN(N))throw new Error("Invalid last weekday of the month expression: "+R);return h.getDay()===N&&h.isLastWeekdayOfMonth()})}for(;k<n;){if(k++,i){if(g&&h.getTime()-g.getTime()<0)throw new Error("Out of the timespan range")}else if(y&&y.getTime()-h.getTime()<0)throw new Error("Out of the timespan range");var A=a(h.getDate(),this.fields.dayOfMonth);u(this.fields.dayOfMonth)&&(A=A||h.isLastDayOfMonth());var T=a(h.getDay(),this.fields.dayOfWeek);u(this.fields.dayOfWeek)&&(T=T||v(this.fields.dayOfWeek));var P=this.fields.dayOfMonth.length>=r.daysInMonth[h.getMonth()],$=this.fields.dayOfWeek.length===r.constraints[5].max-r.constraints[5].min+1,U=h.getHours();if(!A&&(!T||$)){this._applyTimezoneShift(h,d,"Day");continue}if(!P&&$&&!A){this._applyTimezoneShift(h,d,"Day");continue}if(P&&!$&&!T){this._applyTimezoneShift(h,d,"Day");continue}if(this._nthDayOfWeek>0&&!c(h,this._nthDayOfWeek)){this._applyTimezoneShift(h,d,"Day");continue}if(!a(h.getMonth()+1,this.fields.month)){this._applyTimezoneShift(h,d,"Month");continue}if(a(U,this.fields.hour)){if(this._dstEnd===U&&!i){this._dstEnd=null,this._applyTimezoneShift(h,"add","Hour");continue}}else if(this._dstStart!==U){this._dstStart=null,this._applyTimezoneShift(h,d,"Hour");continue}else if(!a(U-1,this.fields.hour)){h[d+"Hour"]();continue}if(!a(h.getMinutes(),this.fields.minute)){this._applyTimezoneShift(h,d,"Minute");continue}if(!a(h.getSeconds(),this.fields.second)){this._applyTimezoneShift(h,d,"Second");continue}if(b===h.getTime()){d==="add"||h.getMilliseconds()===0?this._applyTimezoneShift(h,d,"Second"):h.setMilliseconds(0);continue}break}if(k>=n)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new t(h,this._tz),this._hasIterated=!0,h},r.prototype.next=function(){var i=this._findSchedule();return this._isIterator?{value:i,done:!this.hasNext()}:i},r.prototype.prev=function(){var i=this._findSchedule(!0);return this._isIterator?{value:i,done:!this.hasPrev()}:i},r.prototype.hasNext=function(){var s=this._currentDate,i=this._hasIterated;try{return this._findSchedule(),!0}catch{return!1}finally{this._currentDate=s,this._hasIterated=i}},r.prototype.hasPrev=function(){var s=this._currentDate,i=this._hasIterated;try{return this._findSchedule(!0),!0}catch{return!1}finally{this._currentDate=s,this._hasIterated=i}},r.prototype.iterate=function(i,a){var c=[];if(i>=0)for(var u=0,d=i;u<d;u++)try{var h=this.next();c.push(h),a&&a(h,u)}catch{break}else for(var u=0,d=i;u>d;u--)try{var h=this.prev();c.push(h),a&&a(h,u)}catch{break}return c},r.prototype.reset=function(i){this._currentDate=new t(i||this._options.currentDate)},r.prototype.stringify=function(i){for(var a=[],c=i?0:1,u=r.map.length;c<u;++c){var d=r.map[c],h=this.fields[d],g=r.constraints[c];d==="dayOfMonth"&&this.fields.month.length===1?g={min:1,max:r.daysInMonth[this.fields.month[0]-1]}:d==="dayOfWeek"&&(g={min:0,max:6},h=h[h.length-1]===7?h.slice(0,-1):h),a.push(e(h,g.min,g.max))}return a.join(" ")},r.parse=function(i,a){var c=this;typeof a=="function"&&(a={});function u(d,h){h||(h={}),typeof h.currentDate>"u"&&(h.currentDate=new t(void 0,c._tz)),r.predefined[d]&&(d=r.predefined[d]);var g=[],y=(d+"").trim().split(/\s+/);if(y.length>6)throw new Error("Invalid cron expression");for(var b=r.map.length-y.length,k=0,v=r.map.length;k<v;++k){var A=r.map[k],T=y[y.length>v?k:k-b];if(k<b||!T)g.push(r._parseField(A,r.parseDefaults[k],r.constraints[k]));else{var P=A==="dayOfWeek"?R(T):T;g.push(r._parseField(A,P,r.constraints[k]))}}for(var $={},k=0,v=r.map.length;k<v;k++){var U=r.map[k];$[U]=g[k]}var F=r._handleMaxDaysInMonth($);return $.dayOfMonth=F||$.dayOfMonth,new r($,h);function R(N){var _=N.split("#");if(_.length>1){var S=+_[_.length-1];if(/,/.test(N))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(N))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(N))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(_.length>2||Number.isNaN(S)||S<1||S>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return h.nthDayOfWeek=S,_[0]}return N}}return u(i,a)},r.fieldsToExpression=function(i,a){function c(A,T,P){if(!T)throw new Error("Validation error, Field "+A+" is missing");if(T.length===0)throw new Error("Validation error, Field "+A+" contains no values");for(var $=0,U=T.length;$<U;$++){var F=T[$];if(!r._isValidConstraintChar(P,F)&&(typeof F!="number"||Number.isNaN(F)||F<P.min||F>P.max))throw new Error("Constraint error, got value "+F+" expected range "+P.min+"-"+P.max)}}for(var u={},d=0,h=r.map.length;d<h;++d){var g=r.map[d],y=i[g];c(g,y,r.constraints[d]);for(var b=[],k=-1;++k<y.length;)b[k]=y[k];if(y=b.sort(r._sortCompareFn).filter(function(A,T,P){return!T||A!==P[T-1]}),y.length!==b.length)throw new Error("Validation error, Field "+g+" contains duplicate values");u[g]=y}var v=r._handleMaxDaysInMonth(u);return u.dayOfMonth=v||u.dayOfMonth,new r(u,a||{})},ro=r,ro}const wS=Yo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var so,Zd;function AS(){if(Zd)return so;Zd=1;var t=bS();function e(){}return e._parseEntry=function(r){var s=r.split(" ");if(s.length===6)return{interval:t.parse(r)};if(s.length>6)return{interval:t.parse(s.slice(0,6).join(" ")),command:s.slice(6,s.length)};throw new Error("Invalid entry: "+r)},e.parseExpression=function(r,s){return t.parse(r,s)},e.fieldsToExpression=function(r,s){return t.fieldsToExpression(r,s)},e.parseString=function(r){for(var s=r.split(`
`),i={variables:{},expressions:[],errors:{}},a=0,c=s.length;a<c;a++){var u=s[a],d=null,h=u.trim();if(h.length>0){if(h.match(/^#/))continue;if(d=h.match(/^(.*)=(.*)$/))i.variables[d[1]]=d[2];else{var g=null;try{g=e._parseEntry("0 "+h),i.expressions.push(g.interval)}catch(y){i.errors[h]=y}}}}return i},e.parseFile=function(r,s){wS.readFile(r,function(i,a){if(i){s(i);return}return s(null,e.parseString(a.toString()))})},so=e,so}var vS=AS();const SS=bt(vS);var ES=Object.defineProperty,TS=Object.defineProperties,kS=Object.getOwnPropertyDescriptors,Yd=Object.getOwnPropertySymbols,xS=Object.prototype.hasOwnProperty,IS=Object.prototype.propertyIsEnumerable,Xd=(t,e,n)=>e in t?ES(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OS=(t,e)=>{for(var n in e||(e={}))xS.call(e,n)&&Xd(t,n,e[n]);if(Yd)for(var n of Yd(e))IS.call(e,n)&&Xd(t,n,e[n]);return t},CS=(t,e)=>TS(t,kS(e)),Rr=(t,e,n)=>new Promise((r,s)=>{var i=u=>{try{c(n.next(u))}catch(d){s(d)}},a=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,a);c((n=n.apply(t,e)).next())});function RS(t){const e=console;Nn.alarms==null;const n=[];function r(g,y){n.forEach(b=>b(g,y))}const s=[];function i(g,y){s.forEach(b=>b(g,y))}const a={};function c(g){return Rr(this,null,function*(){const y=String(Math.floor(Math.random()*1e3)).padStart(3,"0");e==null||e.log(`[${y}] Executing job:`,g);const b=Date.now();let k="success";try{yield h(g);const T=yield g.execute();r(g,T)}catch(T){k="failure",i(g,T)}const v=Date.now(),A=v-b;e==null||e.log(`[${y}] Job ran in ${mS(A)}`,{startTime:new Date(b),endTime:new Date(v),durationInMs:A,status:k,job:g})})}function u(g){let y,b;switch(g.type){case"once":if(y=new Date(g.date).getTime(),y<Date.now())return;break;case"interval":y=Date.now(),g.immediate||(y+=g.duration),b=g.duration/6e4;break;case"cron":const k=SS.parseExpression(g.expression,CS(OS({},g),{currentDate:Date.now(),startDate:Date.now()}));if(!k.hasNext())return;y=k.next().getTime();break}return{name:g.id,scheduledTime:y,periodInMinutes:b}}function d(g){return Rr(this,null,function*(){e==null||e.debug("Scheduling job: ",g);const y=u(g);if(y==null){delete a[g.id];return}a[g.id]=g;const b=yield Nn.alarms.get(g.id);switch(g.type){case"cron":case"once":y.scheduledTime!==(b==null?void 0:b.scheduledTime)&&Nn.alarms.create(y.name,{when:y.scheduledTime});break;case"interval":(!b||y.periodInMinutes!==b.periodInMinutes)&&Nn.alarms.create(y.name,{delayInMinutes:g.immediate&&!b?0:y.periodInMinutes,periodInMinutes:y.periodInMinutes});break}})}function h(g){return Rr(this,null,function*(){switch(g.type){case"once":case"interval":break;case"cron":yield d(g);break}})}return Nn.alarms.onAlarm.addListener(g=>Rr(this,null,function*(){const y=a[g.name];y&&(yield c(y))})),{scheduleJob:d,removeJob(g){return Rr(this,null,function*(){delete a[g],yield Nn.alarms.clear(g)})},on(g,y){const b=g==="success"?n:s;return b.push(y),()=>{const k=b.indexOf(y);b.splice(k,1)}}}}function Qd(t){chrome.tabs.update(t,{active:!0}),chrome.windows.getCurrent(e=>{e.id&&chrome.windows.update(e.id,{focused:!0})})}async function PS(){await Ce.auth.signOut({scope:"local"}),await Xr.setValue(null),await Ut.setValue(null)}const MS=()=>{chrome.runtime.onMessageExternal.addListener(async(t,e,n)=>{var i;const{action:r,payload:s}=t;switch(r){case"token":{const{data:a,error:c}=await Ce.auth.verifyOtp({token_hash:s.token,type:"email"});if(c){console.error("Error verifying token:",c),n({success:!1,error:c.message});break}if(!a.session){console.error("Missing session"),n({success:!1,error:"Missing session"});break}await Xr.setValue(a.session),await Ut.setValue(a.user);const u=await wi.getValue();u&&(Qd(u),await wi.setValue(null));const d=(i=e.tab)==null?void 0:i.id;d&&chrome.tabs.remove(d),n({success:!0});break}case"ping":n("pong");break;case"logout":await PS(),n({success:!0});break;default:console.error("Unrecognized message external for background:",t);break}return!0})},$S=new Map,NS=RS(),DS=jt(()=>{console.log("background start"),um(),VS(),chrome.storage.session.setAccessLevel({accessLevel:"TRUSTED_AND_UNTRUSTED_CONTEXTS"}),MS(),jv(Ce),US(Ce);const t=Ks();iS(t),chrome.runtime.onMessage.addListener((e,n,r)=>{if(e.target==="background")switch(e.type){case"start-recording":return(async()=>{try{await FS(n.tab)}catch(i){console.error("Failed to start recording:",i),$n(i,Fa("handleMessage",{messageType:"start-recording"}))}})(),!0;case"update-video-status":(async()=>{var i;try{const{videoId:a,status:c}=e.data;await Ce.from("recordings").update({status:c}).eq("video_id",a)}catch(a){console.error("Failed to update video status:",a),$n(a,Fa("update-video-status",{videoId:(i=e.data)==null?void 0:i.videoId}))}})();return;default:const s=new Error(`Unrecognized message for background: ${e.type}`);throw $n(s,Fa("unrecognizedMessage",{messageType:e.type})),s}}),Ke.onMessage("initTriggerMediaPermissions",e=>{const n=e.sender.tab;if(!(n!=null&&n.id)){console.error("No sender tab found");return}Ke.sendMessage("triggerMediaPermissions",void 0,n.id)}),Ke.onMessage("onEnterMeetingPage",async e=>{const n=e.sender.tab;n!=null&&n.id&&await Ke.sendMessage("setEnterMeetingPage",!0,n.id)}),Ke.onMessage("saveSpeakersToDb",async e=>await ef(e.data)),Ke.onMessage("upgradePlan",async()=>{await BS(Ce)}),ss.onMessage("login",e=>{var n;if(!((n=e.sender.tab)!=null&&n.id)){console.error("No sender tab found");return}chrome.tabs.create({url:Ph}),wi.setValue(e.sender.tab.id)}),ss.onMessage("retryAllFailedRecordings",()=>{cS()}),chrome.runtime.onInstalled.addListener(async e=>{try{if(e.reason==="install"){const n=await chrome.tabs.query({});await Promise.all(n.map(async r=>{if(r.id&&io(r.url))try{await chrome.scripting.executeScript({target:{tabId:r.id},files:["content-scripts/content.js"]})}catch(s){console.error(`Failed to inject script in tab ${r.id}:`,s)}}))}}catch(n){console.error("Error in onInstalled listener:",n)}}),chrome.action.onClicked.addListener(async e=>{jS(e)}),chrome.runtime.onStartup.addListener(()=>{Xa("idle","onStartup.addListener"),Bh.setValue(!1)}),Xr.getValue().then(e=>{e&&(Ce.auth.setSession(e),Ut.setValue(e.user))}),chrome.notifications.onClosed.addListener((e,n)=>{$S.set(e,!0)}),chrome.tabs.onRemoved.addListener(async(e,n)=>{await Yr.getValue()===e&&(console.log("Recording tab was closed. Stopping recording..."),chrome.runtime.sendMessage({type:"stop-recording",target:"offscreen"}))}),Ce.auth.onAuthStateChange((e,n)=>{Xr.setValue(n),Ut.setValue((n==null?void 0:n.user)||null)}),chrome.tabs.onUpdated.addListener((e,n,r)=>{(n.url||n.title)&&ao(),r.active&&bi.setValue(r)}),chrome.tabs.onActivated.addListener(e=>{chrome.tabs.get(e.tabId,n=>{bi.setValue(n)})}),chrome.tabs.onRemoved.addListener((e,n)=>{ao()}),chrome.tabs.query({active:!0,currentWindow:!0},([e])=>{e&&bi.setValue(e)}),ao(),LS()});function LS(){NS.scheduleJob({id:"cleanupOldRecords",type:"interval",duration:864e5,immediate:!0,execute:async()=>{await Zs({storeName:"chunks",olderThanDays:7}),await Zs({storeName:"recordingSpeakers",olderThanDays:7})}})}function io(t){return t?t.startsWith("http://")||t.startsWith("https://"):!1}function ao(){chrome.tabs.query({},async t=>{try{const e=t.filter(n=>n.id&&n.url&&hv(n.url)).map(n=>({id:n.id,url:n.url,title:n.title||"Untitled Meeting"}));await Wh.setValue(e)}catch(e){console.error("Error updating meeting tabs:",e)}})}async function jS(t){try{if(!t.id)return;const n=await Yr.getValue(),r=await _i.getValue();if(n&&n!==t.id&&r==="recording"){Qd(n);return}if(!io(t.url)){chrome.tabs.create({url:Jr});return}Ke.sendMessage("onOpenChangeRecorderDialog",void 0,t.id);const i=(await chrome.tabs.query({})).filter(a=>a.id!==t.id);await Promise.all(i.map(async a=>{if(a.id&&io(a.url))try{await new Promise(c=>{Ke.sendMessage("onOpenChangeRecorderDialog",!1,a.id),c(!0)})}catch(c){console.error(`Error sending message to tab ${a.id}:`,c)}}))}catch(e){console.error("Error in triggerRecorderDialog:",e)}}const FS=async t=>{const e=t==null?void 0:t.id;if(!e)return;const{data:n,error:r}=await Ce.auth.getUser();if(r||!n.user){console.error("Error getting user:",r==null?void 0:r.message);return}(await chrome.runtime.getContexts({})).find(a=>a.contextType==="OFFSCREEN_DOCUMENT")||await chrome.offscreen.createDocument({url:"offscreen.html",reasons:[chrome.offscreen.Reason.USER_MEDIA],justification:"Recording from chrome.tabCapture API"}),chrome.tabCapture.getMediaStreamId({targetTabId:e},async a=>{Xa("idle","startRecording");const c=await Vh.getValue(),u=await qh.getValue(),d=await Hh.getValue(),h=zs[c]?c:"auto",g=ov.find(y=>y.type===u)?u:"auto";chrome.runtime.sendMessage({type:"start-recording",target:"offscreen",data:{streamId:a,tabId:e,tabURL:t.url,meetingName:t.title,language:h,template:g,recordingMode:d}})})};function US(t){we.onMessage("setRecordingStatus",e=>{Xa(e.data.status,e.data.pathLog)}),we.onMessage("saveVideoId",async e=>{if(Wo.setValue(e.data.videoId),!e.data.videoId)return;await Ud().create(e.data.videoId,e.data.meetingPlatform)}),we.onMessage("setRecordingTabId",e=>{Yr.setValue(e.data)}),we.onMessage("getRecordingTabId",async()=>await Yr.getValue()),we.onMessage("saveRecordingDurationToDb",async()=>{const e=await Wo.getValue(),n=await yi.getValue();if(Y("saveRecordingDurationToDb info",{startTime:n,videoId:e}),!n||!e)return!1;const r=aS(n);Y("saveRecordingDurationToDb durationSecond",{durationSecond:r});const{error:s}=await t.from("recordings").update({duration_seconds:r}).eq("video_id",e).select();return s?(Y("saveRecordingDurationToDb error",{error:s}),!1):!0}),we.onMessage("saveMeetSpeakersData",e=>{Uh.setValue(e.data)}),we.onMessage("closeRecorderDialog",e=>{Ke.sendMessage("onOpenChangeRecorderDialog",!1,e.data)}),we.onMessage("closeKluButton",e=>{Ke.sendMessage("onButtonExpandedChange",!1,e.data),Ke.sendMessage("onOpenChangeRecorderDialog",!0,e.data)}),we.onMessage("openRecording",e=>{chrome.tabs.create({url:`${Jr}/${e.data}?meetingCompleted=true`})}),we.onMessage("getSession",async()=>await oo(t)),we.onMessage("getUser",async()=>await Ut.getValue()),we.onMessage("getRecordingStatus",async()=>await _i.getValue()),we.onMessage("reuploadFailedChunks",async e=>{const n=await oo(t);await ef(e.data.recordingId),await Ya(e.data.recordingId,e.data.type)&&e.data.type==="audio"&&await Vd({videoId:e.data.recordingId,token:n==null?void 0:n.access_token})}),we.onMessage("setUploadFailedStatus",async e=>{e.data.type==="video"&&await Qr.setValue({...await Qr.getValue(),[e.data.videoId]:{error:e.data.error,timestamp:Date.now()}}),e.data.type==="audio"&&await es.setValue({...await es.getValue(),[e.data.videoId]:{error:e.data.error,timestamp:Date.now()}})})}async function oo(t){var e;try{if(!(t!=null&&t.auth))return console.warn("Supabase not initialized during getSession call"),null;const n=await t.auth.getUser();if(n.error||!((e=n.data)!=null&&e.user))return null;const{data:r,error:s}=await t.auth.getSession();return s||!r.session?null:r.session}catch(n){return console.error("Error in getSession:",n),null}}async function BS(t){var s;const{data:e,error:n}=await t.auth.getSession();if(n||!e.session){Y("handleUpgradePlan error",{error:n});return}const r=await xr.upgradePlan({authToken:(s=e.session)==null?void 0:s.access_token});await chrome.tabs.create({url:r.checkoutUrl})}async function ef(t){const n=await Ud().getOne(t);if(!n)return console.warn("Recording speaker not found"),!1;const r={meetingPlatform:n.meetingPlatform,speakers:n.speakers,mySelf:n.mySelf};if(r.speakers.length===0){const i=n.meetingPlatform;return console.warn("Speakers not found"),cv[i]&&$n(new Error(`Speakers not found in ${i}`),{platform:i,videoId:t,meetingType:i,errorType:"speakers_not_detected"}),!1}const s=await oo(Ce);return await xr.saveSpeakersStats({videoId:t,speakersStats:r,authToken:s==null?void 0:s.access_token}),!1}async function VS(){ss.onMessage("getManifest",e=>({name:chrome.runtime.getManifest().name,version:chrome.runtime.getManifest().version}));const t=await Ut.getValue();iv(t,"background"),av(),Ut.watch(e=>{hd(e),Hs("auth",e?"User logged in":"User logged out",{timestamp:new Date().toISOString()})}),Hs("lifecycle","Extension background script started",{timestamp:new Date().toISOString()}),Y("Sentry initialized for background context")}function v0(){}var Xs={exports:{}},qS=Xs.exports,tf;function WS(){return tf||(tf=1,function(t,e){(function(n,r){r(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:qS,function(n){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)n.exports=globalThis.browser;else{const r="The message port closed before a response was received.",s=i=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(N,_=void 0){super(_),this.createItem=N}get(N){return this.has(N)||this.set(N,this.createItem(N)),super.get(N)}}const u=R=>R&&typeof R=="object"&&typeof R.then=="function",d=(R,N)=>(..._)=>{i.runtime.lastError?R.reject(new Error(i.runtime.lastError.message)):N.singleCallbackArg||_.length<=1&&N.singleCallbackArg!==!1?R.resolve(_[0]):R.resolve(_)},h=R=>R==1?"argument":"arguments",g=(R,N)=>function(S,...I){if(I.length<N.minArgs)throw new Error(`Expected at least ${N.minArgs} ${h(N.minArgs)} for ${R}(), got ${I.length}`);if(I.length>N.maxArgs)throw new Error(`Expected at most ${N.maxArgs} ${h(N.maxArgs)} for ${R}(), got ${I.length}`);return new Promise((C,D)=>{if(N.fallbackToNoCallback)try{S[R](...I,d({resolve:C,reject:D},N))}catch(L){console.warn(`${R} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,L),S[R](...I),N.fallbackToNoCallback=!1,N.noCallback=!0,C()}else N.noCallback?(S[R](...I),C()):S[R](...I,d({resolve:C,reject:D},N))})},y=(R,N,_)=>new Proxy(N,{apply(S,I,C){return _.call(I,R,...C)}});let b=Function.call.bind(Object.prototype.hasOwnProperty);const k=(R,N={},_={})=>{let S=Object.create(null),I={has(D,L){return L in R||L in S},get(D,L,q){if(L in S)return S[L];if(!(L in R))return;let O=R[L];if(typeof O=="function")if(typeof N[L]=="function")O=y(R,R[L],N[L]);else if(b(_,L)){let W=g(L,_[L]);O=y(R,R[L],W)}else O=O.bind(R);else if(typeof O=="object"&&O!==null&&(b(N,L)||b(_,L)))O=k(O,N[L],_[L]);else if(b(_,"*"))O=k(O,N[L],_["*"]);else return Object.defineProperty(S,L,{configurable:!0,enumerable:!0,get(){return R[L]},set(W){R[L]=W}}),O;return S[L]=O,O},set(D,L,q,O){return L in S?S[L]=q:R[L]=q,!0},defineProperty(D,L,q){return Reflect.defineProperty(S,L,q)},deleteProperty(D,L){return Reflect.deleteProperty(S,L)}},C=Object.create(R);return new Proxy(C,I)},v=R=>({addListener(N,_,...S){N.addListener(R.get(_),...S)},hasListener(N,_){return N.hasListener(R.get(_))},removeListener(N,_){N.removeListener(R.get(_))}}),A=new c(R=>typeof R!="function"?R:function(_){const S=k(_,{},{getContent:{minArgs:0,maxArgs:0}});R(S)}),T=new c(R=>typeof R!="function"?R:function(_,S,I){let C=!1,D,L=new Promise(B=>{D=function(H){C=!0,B(H)}}),q;try{q=R(_,S,D)}catch(B){q=Promise.reject(B)}const O=q!==!0&&u(q);if(q!==!0&&!O&&!C)return!1;const W=B=>{B.then(H=>{I(H)},H=>{let oe;H&&(H instanceof Error||typeof H.message=="string")?oe=H.message:oe="An unexpected error occurred",I({__mozWebExtensionPolyfillReject__:!0,message:oe})}).catch(H=>{console.error("Failed to send onMessage rejected reply",H)})};return W(O?q:L),!0}),P=({reject:R,resolve:N},_)=>{i.runtime.lastError?i.runtime.lastError.message===r?N():R(new Error(i.runtime.lastError.message)):_&&_.__mozWebExtensionPolyfillReject__?R(new Error(_.message)):N(_)},$=(R,N,_,...S)=>{if(S.length<N.minArgs)throw new Error(`Expected at least ${N.minArgs} ${h(N.minArgs)} for ${R}(), got ${S.length}`);if(S.length>N.maxArgs)throw new Error(`Expected at most ${N.maxArgs} ${h(N.maxArgs)} for ${R}(), got ${S.length}`);return new Promise((I,C)=>{const D=P.bind(null,{resolve:I,reject:C});S.push(D),_.sendMessage(...S)})},U={devtools:{network:{onRequestFinished:v(A)}},runtime:{onMessage:v(T),onMessageExternal:v(T),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},F={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":F},services:{"*":F},websites:{"*":F}},k(i,U,a)};n.exports=s(chrome)}})}(Xs)),Xs.exports}WS();function Qs(t,...e){if(typeof e[0]=="string"){const n=e.shift();t(`[wxt] ${n}`,...e)}else t("[wxt]",...e)}const HS={debug:(...t)=>Qs(console.debug,...t),log:(...t)=>Qs(console.log,...t),warn:(...t)=>Qs(console.warn,...t),error:(...t)=>Qs(console.error,...t)};let co;try{co=DS.main(),co instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(t){throw HS.error("The background crashed on startup!"),t}const zS=co;var uo,nf;function GS(){return nf||(nf=1,uo=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),uo}var JS=GS();const KS=Object.freeze(Object.defineProperty({__proto__:null,default:bt(JS)},Symbol.toStringTag,{value:"Module"}));return zS}();
background;
