import{r as u,j as s}from"./react.CU-GxeNQ.js";/* empty css                       */import"./Header.astro_astro_type_script_index_0_lang.AXIbBUBV.js";if(typeof MessageChannel>"u"){class m{constructor(){this.onmessage=null}postMessage(n){const a={data:n};(typeof queueMicrotask=="function"?queueMicrotask:l=>setTimeout(l,0))(()=>this.onmessage&&this.onmessage(a))}start(){}close(){}}class p{constructor(){this.port1=new m,this.port2=new m;const n=(a,l)=>{const w={data:l};(typeof queueMicrotask=="function"?queueMicrotask:c=>setTimeout(c,0))(()=>a.onmessage&&a.onmessage(w))};this.port1.postMessage=a=>n(this.port2,a),this.port2.postMessage=a=>n(this.port1,a)}}globalThis.MessageChannel=p}const O=({className:m=""})=>{const[p,g]=u.useState(!1),[n,a]=u.useState(!1),[l,w]=u.useState(""),[c,y]=u.useState(!1),[b,f]=u.useState([]),d=u.useRef(null),r=u.useRef(null),i=["Witaj! Jestem POLACZEK, Twój polski asystent AI. System BONZO to nowoczesna platforma łącząca sztuczną inteligencję z automatyzacją.","BONZO wykorzystuje zaawansowane technologie jak BigQuery, Cloudflare Workers i Google AI APIs do analizy danych w czasie rzeczywistym.","Główne funkcje BONZO to: wizualizacje audio, analityka BigQuery, generator quizów AI i inteligentny chat. Wszystko zintegrowane w jednym systemie.","System BONZO oferuje wielojęzyczne wsparcie dzięki Google Translate API. Mogę odpowiadać po polsku, angielsku, niemiecku, hiszpańsku i francusku.","Wizualizatory BONZO synchronizują się z muzyką w czasie rzeczywistym, tworząc spektakularne efekty audiowizualne.","BONZO łączy Cloud Run, Cloudflare Workers i Google Cloud AI w spójną architekturę microservices dla maksymalnej wydajności.","Dzięki integracji z POLACZEK API możesz generować quizy, analizować dane i prowadzić konwersacje - wszystko głosowo!"],x=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.webkitSpeechRecognition||window.SpeechRecognition;r.current=new e,r.current.continuous=!1,r.current.interimResults=!1,r.current.lang="pl-PL",r.current.onstart=()=>{g(!0)},r.current.onresult=t=>{const o=t.results[0][0].transcript;f(h=>[...h,{type:"user",text:o}]),k(o)},r.current.onend=()=>{g(!1)},r.current.onerror=t=>{console.error("Speech recognition error:",t.error),g(!1)}}},k=e=>{let t=i[0];e.toLowerCase().includes("bigquery")||e.toLowerCase().includes("dane")?t=i[1]:e.toLowerCase().includes("funkcje")||e.toLowerCase().includes("możliwości")?t=i[2]:e.toLowerCase().includes("język")||e.toLowerCase().includes("tłumaczenie")?t=i[3]:e.toLowerCase().includes("muzyka")||e.toLowerCase().includes("wizualizator")?t=i[4]:e.toLowerCase().includes("architektura")||e.toLowerCase().includes("technologia")?t=i[5]:e.toLowerCase().includes("polaczek")||e.toLowerCase().includes("api")?t=i[6]:t=i[Math.floor(Math.random()*i.length)],f(o=>[...o,{type:"assistant",text:t}]),z(t)},z=async e=>{try{a(!0),w(e);const t=await fetch("/api/polaczek/quiz/speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,language:"pl"})});if(t.ok){const o=await t.blob(),h=URL.createObjectURL(o);d.current&&(d.current.src=h,d.current.onended=()=>{a(!1),w(""),URL.revokeObjectURL(h)},await d.current.play())}else{const o=new SpeechSynthesisUtterance(e);o.lang="pl-PL",o.rate=.9,o.pitch=1.1,o.onend=()=>{a(!1),w("")},speechSynthesis.speak(o)}}catch(t){console.error("TTS Error:",t),a(!1),w("")}},j=()=>{r.current&&!p&&r.current.start()},v=()=>{c?(y(!1),f([]),speechSynthesis.cancel(),d.current&&d.current.pause()):(y(!0),x(),z("Cześć! Jestem POLACZEK. Pytaj mnie o system BONZO!"))};return u.useEffect(()=>{if(n&&typeof window<"u"){const e=new CustomEvent("polaczek-speaking",{detail:{isActive:!0,message:l}});window.dispatchEvent(e)}else if(typeof window<"u"){const e=new CustomEvent("polaczek-speaking",{detail:{isActive:!1}});window.dispatchEvent(e)}},[n,l]),s.jsxs("div",{className:`voice-assistant-polaczek ${m}`,children:[s.jsx("audio",{ref:d,className:"audio-hidden"}),s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("button",{onClick:v,className:`
            relative w-20 h-20 rounded-full border-2 transition-all duration-300
            ${c?"bg-blue-500/20 border-blue-400 shadow-lg shadow-blue-500/30":"bg-gray-700/20 border-gray-500 hover:border-gray-400"}
            ${n?"animate-pulse":""}
          `,children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n?s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-1 h-8 bg-blue-400 animate-pulse rounded wave-bar-1"}),s.jsx("div",{className:"w-1 h-6 bg-blue-400 animate-pulse rounded wave-bar-2"}),s.jsx("div",{className:"w-1 h-8 bg-blue-400 animate-pulse rounded wave-bar-3"})]}):s.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-400/30 animate-ping"}),s.jsx("div",{className:"absolute inset-0 rounded-full border border-blue-400/20 animate-ping ping-ring-delayed"})]})]}),c&&s.jsx("button",{onClick:j,disabled:p||n,className:`
              px-6 py-2 rounded-full text-sm font-medium transition-all duration-200
              ${p?"bg-red-500/20 border border-red-400 text-red-300":"bg-blue-500/20 border border-blue-400 text-blue-300 hover:bg-blue-500/30"}
              disabled:opacity-50 disabled:cursor-not-allowed
            `,children:p?"🎤 Słucham...":"🎙️ Zapytaj o BONZO"}),c&&s.jsxs("div",{className:"text-center space-y-2",children:[n&&s.jsx("div",{className:"text-blue-300 text-sm animate-pulse",children:"🗣️ POLACZEK mówi..."}),l&&s.jsx("div",{className:"max-w-xs text-xs text-gray-400 bg-gray-800/50 rounded p-2 border border-gray-600",children:l})]}),c&&b.length>0&&s.jsx("div",{className:"w-full max-w-md space-y-2 max-h-40 overflow-y-auto",children:b.slice(-3).map((e,t)=>s.jsxs("div",{className:`
                  text-xs p-2 rounded border
                  ${e.type==="user"?"bg-green-900/20 border-green-600/50 text-green-300 ml-4":"bg-blue-900/20 border-blue-600/50 text-blue-300 mr-4"}
                `,children:[s.jsxs("strong",{children:[e.type==="user"?"👤":"🤖",":"]})," ",e.text]},t))})]})]})};export{O as default};
