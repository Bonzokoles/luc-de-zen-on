import{p as jt,G as At,g as t,e as T,i as It,t as _,s as o,c as a,b as M,B as Ut,a as K,h as q,j as b,k as Ft,v as y,n as e,C as Ot,A as tt,x as n,y as E,u as U,F as Et,z as Lt}from"./Header.astro_astro_type_script_index_0_lang.C3v9REYp.js";/* empty css                                    */import"./react.0nTXIzv_.js";if(typeof MessageChannel>"u"){class F{constructor(){this.onmessage=null}postMessage(f){const i={data:f};(typeof queueMicrotask=="function"?queueMicrotask:x=>setTimeout(x,0))(()=>this.onmessage&&this.onmessage(i))}start(){}close(){}}class L{constructor(){this.port1=new F,this.port2=new F;const f=(i,x)=>{const H={data:x};(typeof queueMicrotask=="function"?queueMicrotask:h=>setTimeout(h,0))(()=>i.onmessage&&i.onmessage(H))};this.port1.postMessage=i=>f(this.port2,i),this.port2.postMessage=i=>f(this.port1,i)}}globalThis.MessageChannel=L}var Bt=_(`<span class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </span>`),Dt=_(`<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Online</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-yellow-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Partial</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-red-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Offline</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Total Req/min</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Avg Response</div></div></div>`),Gt=_(`<div class="mb-6"><div class="flex justify-between text-sm mb-2"><span class="text-[#a0a0a0] font-['Kenyan_Coffee']">OgÃ³lny Stan Systemu</span> <span class="text-[#00ffff] font-['Neuropol']"> </span></div> <div class="w-full bg-[#333333] h-2 border border-[#555555]"><div></div></div></div>`),Zt=_(`<div class="mb-4 p-3 bg-red-500/10 border border-red-500/30 text-red-400"><div class="font-['Neuropol'] uppercase text-sm">Error</div> <div class="font-['Kenyan_Coffee'] text-sm"> </div></div>`),Jt=_(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Trwa sprawdzanie statusu workerÃ³w...</span>`),Qt=_('- System Health: <span class="text-[#00ffff]"> </span>',1),Vt=_(`<span class="text-[#e0e0e0] font-['Kenyan_Coffee']"><span class="text-green-400"> </span> / <span class="text-[#00ffff]"> </span> workerÃ³w
        online <!></span>`),Xt=_(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Brak danych o workerach</span>`),Yt=_(`<tr class="border-b border-[#333333]/50 hover:bg-[#111111] transition-colors duration-200"><td class="px-4 py-3"><div class="text-[#e0e0e0] font-['Kenyan_Coffee'] font-medium"> </div> <div class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </div></td><td class="px-4 py-3"><span> </span></td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#a0a0a0] font-['Kenyan_Coffee'] text-sm"> </td></tr>`),te=_(`<div class="w-full bg-[#111111] border border-[#333333] glass-effect p-6 svelte-18wsoh5"><div class="flex items-center justify-between mb-6"><div><h2 class="text-2xl font-bold text-[#00ffff] font-['Neuropol'] uppercase tracking-wider">ðŸ”§ Status WorkerÃ³w</h2> <p class="text-[#a0a0a0] font-['Kenyan_Coffee'] mt-1">Zaawansowany monitoring systemu AI funkcji w czasie rzeczywistym</p></div> <div class="flex items-center gap-3"><button> </button> <!></div></div> <!> <!> <div class="flex flex-wrap gap-3 mb-6"><button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm disabled:opacity-50"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm">ðŸ”§ API Status</button></div> <!> <div class="mb-4"><!></div> <div class="overflow-x-auto border border-[#333333]"><table class="min-w-full bg-[#0a0a0a]"><thead><tr class="border-b border-[#333333]"><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Nazwa Workera</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Status</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">CPU</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">RAM</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Req/min</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Response</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Uptime</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Last Check</th></tr></thead><tbody></tbody></table></div> <div class="mt-6 flex flex-col gap-3"><button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide disabled:opacity-50"> </button> <button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide"> </button></div> <!></div>`);function re(F,L){jt(L,!1);let S=T([]),f=T({}),i=T(!1),x=T(!1),H=T(null),h=T(!0),P;function dt(s){switch(s){case"online":return"text-green-400";case"partial":return"text-yellow-400";case"offline":return"text-red-400";default:return"text-gray-400"}}function vt(s){switch(s){case"online":return"bg-green-500/20 border-green-500/30";case"partial":return"bg-yellow-500/20 border-yellow-500/30";case"offline":return"bg-red-500/20 border-red-500/30";default:return"bg-gray-500/20 border-gray-500/30"}}async function z(){y(i,!0),y(H,null);try{console.log("ðŸ”„ Fetching workers status...");const s=await fetch("/api/workers-status");if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const r=await s.json();if(r.success)y(S,r.workers),y(f,r.metrics),console.log("âœ… Workers status fetched successfully",{workers:t(S).length,metrics:t(f)});else throw new Error(r.error||"Failed to fetch workers status")}catch(s){y(H,s.message),console.error("âŒ Error fetching workers status:",s)}finally{y(i,!1)}}function pt(){y(h,!t(h)),t(h)?P=setInterval(z,3e4):clearInterval(P)}function et(s){return new Date(s).toLocaleTimeString("pl-PL")}function ct(s){return s||"0%"}At(()=>(z(),t(h)&&(P=setInterval(z,3e4)),()=>{P&&clearInterval(P)})),It();var B=te(),D=a(B),at=o(a(D),2),R=a(at);let st;var ut=a(R);e(R);var xt=o(R,2);{var bt=s=>{var r=Bt(),l=a(r);e(r),K(d=>n(l,`Last: ${d??""}`),[()=>et(t(f).lastUpdate)],E),b(s,r)};M(xt,s=>{t(f).lastUpdate&&s(bt)})}e(at),e(D);var rt=o(D,2);{var _t=s=>{var r=Dt(),l=a(r),d=a(l),v=a(d,!0);e(d),U(2),e(l);var p=o(l,2),u=a(p),m=a(u,!0);e(u),U(2),e(p);var c=o(p,2),w=a(c),A=a(w,!0);e(w),U(2),e(c);var g=o(c,2),k=a(g),C=a(k,!0);e(k),U(2),e(g);var W=o(g,2),N=a(W),I=a(N);e(N),U(2),e(W),e(r),K(()=>{n(v,t(f).onlineWorkers),n(m,t(f).partialWorkers),n(A,t(f).offlineWorkers),n(C,t(f).totalRequests),n(I,`${t(f).avgResponseTime??""}ms`)}),b(s,r)};M(rt,s=>{t(f).totalWorkers&&s(_t)})}var ot=o(rt,2);{var ht=s=>{var r=Gt(),l=a(r),d=o(a(l),2),v=a(d);e(d),e(l);var p=o(l,2),u=a(p);let m;e(p),e(r),K(c=>{n(v,`${c??""}%`),m=tt(u,1,"h-full transition-all duration-500",null,m,{"bg-green-500":t(f).systemHealth>=80,"bg-yellow-500":t(f).systemHealth>=50&&t(f).systemHealth<80,"bg-red-500":t(f).systemHealth<50}),Et(u,"style",`width: ${t(f).systemHealth??""}%`)},[()=>Math.round(t(f).systemHealth)],E),b(s,r)};M(ot,s=>{t(f).systemHealth!==void 0&&s(ht)})}var G=o(ot,2),$=a(G),gt=a($,!0);e($);var O=o($,2),yt=a(O,!0);e(O);var mt=o(O,2);e(G);var ft=o(G,2);{var wt=s=>{var r=Zt(),l=o(a(r),2),d=a(l,!0);e(l),e(r),K(()=>n(d,t(H))),b(s,r)};M(ft,s=>{t(H)&&s(wt)})}var Z=o(ft,2),kt=a(Z);{var Ct=s=>{var r=Jt();b(s,r)},Nt=(s,r)=>{{var l=v=>{var p=Vt(),u=a(p),m=a(u,!0);e(u);var c=o(u,2),w=a(c,!0);e(c);var A=o(c,2);{var g=k=>{var C=Qt(),W=o(Lt(C)),N=a(W);e(W),K(I=>n(N,`${I??""}%`),[()=>Math.round(t(f).systemHealth)],E),b(k,C)};M(A,k=>{t(f).systemHealth&&k(g)})}e(p),K(()=>{n(m,t(f).onlineWorkers),n(w,t(f).totalWorkers)}),b(v,p)},d=v=>{var p=Xt();b(v,p)};M(s,v=>{t(S).length>0?v(l):v(d,!1)},r)}};M(kt,s=>{t(i)?s(Ct):s(Nt,!1)})}e(Z);var J=o(Z,2),nt=a(J),lt=o(a(nt));Ut(lt,5,()=>t(S),Ot,(s,r)=>{var l=Yt(),d=a(l),v=a(d),p=a(v,!0);e(v);var u=o(v,2),m=a(u,!0);e(u),e(d);var c=o(d),w=a(c),A=a(w,!0);e(w),e(c);var g=o(c),k=a(g,!0);e(g);var C=o(g),W=a(C,!0);e(C);var N=o(C),I=a(N,!0);e(N);var X=o(N),Ht=a(X,!0);e(X);var Y=o(X),zt=a(Y,!0);e(Y);var it=o(Y),Tt=a(it,!0);e(it),e(l),K((qt,Pt,Rt,$t)=>{n(p,t(r).name),n(m,t(r).endpoint),tt(w,1,`px-2 py-1 text-xs font-['Neuropol'] uppercase border ${qt??""} ${Pt??""}`,"svelte-18wsoh5"),n(A,t(r).status),n(k,t(r).cpu!==null?t(r).cpu+"%":"-"),n(W,t(r).ram!==null?t(r).ram+"%":"-"),n(I,t(r).requests||0),n(Ht,t(r).responseMs!==null?t(r).responseMs+"ms":"-"),n(zt,Rt),n(Tt,$t)},[()=>vt(t(r).status),()=>dt(t(r).status),()=>ct(t(r).uptime),()=>t(r).lastCheck?et(t(r).lastCheck):"-"],E),b(s,l)}),e(lt),e(nt),e(J);var Q=o(J,2),j=a(Q),Mt=a(j,!0);e(j);var V=o(j,2),Kt=a(V);e(V),e(Q);var St=o(Q,2);{var Wt=s=>{};M(St,s=>{t(x)&&t(S).length>0&&s(Wt)})}e(B),K(()=>{st=tt(R,1,"px-3 py-1 text-xs font-['Neuropol'] uppercase border transition-all duration-300 svelte-18wsoh5",null,st,{"auto-refresh-active":t(h),"auto-refresh-inactive":!t(h)}),n(ut,`Auto: ${(t(h)?"ON":"OFF")??""}`),$.disabled=t(i),n(gt,t(i)?"Sprawdzanie...":"ðŸ” Health Check"),n(yt,t(x)?"Ukryj Monitoring":"ðŸ“Š PokaÅ¼ Monitoring"),j.disabled=t(i),n(Mt,t(i)?"Sprawdzanie...":"SprawdÅº Wszystkie Workery"),n(Kt,`${(t(x)?"Ukryj":"PokaÅ¼")??""} SzczegÃ³Å‚owy Monitor`)}),q("click",R,pt),q("click",$,z),q("click",O,()=>y(x,!t(x))),q("click",mt,z),q("click",j,z),q("click",V,()=>y(x,!t(x))),b(F,B),Ft()}export{re as default};
