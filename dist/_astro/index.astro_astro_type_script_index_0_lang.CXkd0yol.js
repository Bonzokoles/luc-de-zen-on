import{_ as A}from"./babylon-core.CKU7Mwvm.js";if(typeof MessageChannel>"u"){class e{constructor(){this.onmessage=null}postMessage(t){const l={data:t};(typeof queueMicrotask=="function"?queueMicrotask:a=>setTimeout(a,0))(()=>this.onmessage&&this.onmessage(l))}start(){}close(){}}class o{constructor(){this.port1=new e,this.port2=new e;const t=(l,a)=>{const s={data:a};(typeof queueMicrotask=="function"?queueMicrotask:i=>setTimeout(i,0))(()=>l.onmessage&&l.onmessage(s))};this.port1.postMessage=l=>t(this.port2,l),this.port2.postMessage=l=>t(this.port1,l)}}globalThis.MessageChannel=o}window.apiTests=window.apiTests||{};window.openImageGenerator=window.openImageGenerator||function(){};window.openChatbot=window.openChatbot||function(){};window.openBigQuery=window.openBigQuery||function(){};window.openKaggle=window.openKaggle||function(){};window.openTavily=window.openTavily||function(){};window.testButtonFunction=window.testButtonFunction||function(){};window.checkDashboardLogin=window.checkDashboardLogin||function(){};window.addEventListener("DOMContentLoaded",async()=>{console.log("Loading API test functions...");try{const e=await A(()=>import("./apiTests.CnAhSYqp.js"),[]);window.apiTests=e,console.log("API Tests module loaded, available functions:",Object.keys(e))}catch(e){console.log("Failed to load API tests:",e)}});function d(){console.log("openImageGenerator() called");const e=document.getElementById("imagePrompt"),o=e?e.value.trim():"";console.log("Image prompt:",o),o&&(localStorage.setItem("quickPrompt",o),console.log("Prompt saved in localStorage")),console.log("Opening /image-generator"),window.open("/image-generator","_blank")}function u(){console.log("💬 openChatbot() wywołana");const e=document.getElementById("chatPrompt"),o=e?e.value.trim():"";console.log("Chat prompt:",o),o&&(localStorage.setItem("quickChatPrompt",o),console.log("Prompt saved in localStorage")),console.log("Opening /chatbot"),window.open("/chatbot","_blank")}function p(){console.log("📊 openBigQuery() wywołana");const e=document.getElementById("bigqueryPrompt"),o=e?e.value.trim():"";console.log("BigQuery prompt:",o),o&&(localStorage.setItem("quickSQLQuery",o),console.log("SQL Query saved in localStorage")),console.log("Opening /bigquery-analytics"),window.open("/bigquery-analytics","_blank")}function w(){console.log("🔍 openKaggle() wywołana");const e=document.getElementById("kagglePrompt"),o=e?e.value.trim():"";console.log("Kaggle prompt:",o),o&&(localStorage.setItem("quickKaggleSearch",o),console.log("Kaggle search saved in localStorage")),console.log("Opening /kaggle-datasets"),window.open("/kaggle-datasets","_blank")}function m(){console.log("🌐 openTavily() wywołana");const e=document.getElementById("tavilyPrompt"),o=e?e.value.trim():"";console.log("Tavily prompt:",o),o&&(localStorage.setItem("quickTavilySearch",o),console.log("Tavily search saved in localStorage")),console.log("Opening /tavily-search"),window.open("/tavily-search","_blank")}function k(e){return console.log(`🧪 TEST: Przycisk ${e} został kliknięty!`),alert(`Test udany! Przycisk ${e} działa.`),!1}async function h(){if(console.log("Rozpoczynam testy wszystkich API..."),window.apiTests&&window.apiTests.testAllAPIs)try{await window.apiTests.testAllAPIs(),console.log("All API tests completed")}catch(e){console.log("Error during API tests:",e)}else console.log("⏳ API tests nie są jeszcze załadowane, próbuję ponownie..."),setTimeout(h,1e3)}function C(){console.log("Opening API test console..."),console.log("Available API tests:"),console.log("- window.apiTests.testChatAPI()"),console.log("- window.apiTests.testImageGeneration()"),console.log("- window.apiTests.testAIBot()"),console.log("- window.apiTests.testAllAPIs()"),window.apiTests?console.log("API Tests module loaded, available functions:",Object.keys(window.apiTests)):console.log("API Tests module not loaded yet")}async function I(){const e=document.getElementById("overallStatus");if(!e)return;const o=e.querySelector(".status-dot"),n=e.querySelector("span:last-child");if(!(!o||!n)){n.textContent="Sprawdzanie...",o.className="status-dot";try{const t=["/api/generate-image","/api/chat","/api/bigquery","/api/kaggle","/api/tavi"],a=(await Promise.allSettled(t.map(i=>fetch(i).then(c=>({api:i,ok:c.ok}))))).filter(i=>i.status==="fulfilled"&&i.value.ok).length,s=t.length;a===s?(o.className="status-dot online",n.textContent=`Wszystkie online (${a}/${s})`):a>0?(o.className="status-dot",n.textContent=`Częściowo online (${a}/${s})`):(o.className="status-dot offline",n.textContent=`Offline (${a}/${s})`)}catch{o.className="status-dot offline",n.textContent="Błąd sprawdzania"}}}function P(){const e=document.getElementById("dashboardLogin"),o=document.getElementById("loginContainer"),n=document.getElementById("dashboardButtons");if(!e||!o||!n)return;const t=e.value.trim();console.log("Checking login:",t),t==="HAOS77"?(o.classList.add("hidden"),n.classList.remove("hidden"),console.log("Login successful, showing dashboard buttons")):(console.log("Invalid login"),e.style.borderColor="#ef4444",setTimeout(()=>{e.style.borderColor=""},2e3))}function g(e){console.log(`🎯 KLIKNIĘTO KAFELEK! Otwieranie funkcji: ${e}`),alert(`DEBUGOWANIE: Kliknięto w funkcję: ${e}`);const n={rekomendacje:"/ai-functions/personalized-recommendations","obsługa-klienta":"/ai-functions/customer-automation",monitorowanie:"/ai-functions/activity-monitoring",przypomnienia:"/ai-functions/reminders-calendar","faq-generator":"/ai-functions/dynamic-faq",edukacja:"/ai-functions/education-recommendations",tickety:"/ai-functions/ai-tickets",quizy:"/ai-functions/interactive-quizzes",marketing:"/ai-functions/marketing-content"}[e];n?(console.log(`Przekierowanie do: ${n}`),window.open(n,"_blank")):(console.error(`Nieznana funkcja: ${e}`),alert(`Funkcja "${e}" jest w trakcie implementacji. Spróbuj ponownie później.`))}document.addEventListener("DOMContentLoaded",function(){console.log("🚀 DOM załadowany, inicjalizacja funkcji"),console.log("🧪 Test funkcji openFunction:",typeof g),console.log("🧪 Test window.openFunction:",typeof window.openFunction),window.openFunction=g,console.log("✅ openFunction dodana do window scope");const e=document.querySelectorAll(".feature-tile[data-function]");console.log(`🎯 Znaleziono ${e.length} kafelków funkcji`),e.forEach((s,i)=>{const c=s.getAttribute("onclick")?.match(/openFunction\('(.+?)'\)/)?.[1];console.log(`🔗 Tile ${i}: ${c}`),s.addEventListener("click",function(r){r.preventDefault(),r.stopPropagation(),console.log(`🎯 BEZPOŚREDNI KLIK na tile: ${c}`),c&&g(c)})}),console.log("🧪 Test dostępności funkcji:"),console.log("- openImageGenerator:",typeof d),console.log("- openChatbot:",typeof u),console.log("- openBigQuery:",typeof p),console.log("- openKaggle:",typeof w),console.log("- openTavily:",typeof m),console.log("🧪 Test dostępności elementów input:"),console.log("- imagePrompt:",document.getElementById("imagePrompt")),console.log("- chatPrompt:",document.getElementById("chatPrompt")),console.log("- bigqueryPrompt:",document.getElementById("bigqueryPrompt")),console.log("- kagglePrompt:",document.getElementById("kagglePrompt")),console.log("- tavilyPrompt:",document.getElementById("tavilyPrompt")),document.querySelectorAll(".quick-prompt").forEach(s=>{const i=s;i.addEventListener("keydown",function(c){if(c.code==="Enter"||c.key==="Enter"){const r=i.id.replace("Prompt","");r==="image"?d():r==="chat"?u():r==="bigquery"?p():r==="kaggle"?w():r==="tavily"&&m()}})});const o=document.getElementById("dashboardLogin");o&&o.addEventListener("keydown",function(s){s.key==="Enter"&&P()}),console.log("🧹 Clearing component cache and resetting state..."),localStorage.getItem("components-working")==="true"?console.log("✅ Components were working, preserving state..."):(console.log("🧹 Components not working, clearing cache..."),delete window.MUSIC,delete window.POLACZEK,sessionStorage.removeItem("polaczek-status"),sessionStorage.removeItem("music-status")),localStorage.setItem("components-initialized","false");let t=0;const l=50,a=()=>{t++,console.log(`🔍 Component check attempt ${t}/${l}`);const s=window.MUSIC&&typeof window.MUSIC.ensureLoaded=="function",i=window.POLACZEK&&typeof window.POLACZEK.openAssistant=="function";if(console.log(`🎵 Music ready: ${s}, 🤖 POLACZEK ready: ${i}`),s&&i){console.log("✅ All components are ready!"),localStorage.setItem("components-initialized","true"),localStorage.setItem("components-working","true");return}t<l?setTimeout(a,100):(console.warn("❌ Components not all ready after 5 seconds, but continuing without forced reload"),localStorage.setItem("components-initialized","partial"))};I(),setTimeout(a,500),setTimeout(()=>{console.log("🔄 Auto-initializing components after page load..."),f(),y()},1e3),window.openImageGenerator=d,window.openChatbot=u,window.openBigQuery=p,window.openKaggle=w,window.openTavily=m,window.testButtonFunction=k,window.checkDashboardLogin=P,window.openFunction=g,window.toggleMusicPlayer=E,window.togglePolaczekAssistant=L,window.openMainChat=z,window.openRefresh=T,window.openFolder=v,window.openClose=O,window.checkAllStatus=I,window.runAllAPITests=h,window.openAPITestConsole=C,window.resetComponents=S,window.hardResetComponents=b,console.log("All functions assigned to window object"),console.log("🔧 Debug functions available:"),console.log("- resetComponents() - soft reset"),console.log("- hardResetComponents() - hard reset with page reload"),console.log("- checkAllStatus() - check API status"),console.log("- Check localStorage.getItem('components-working') for component status")});function E(){console.log("🎵 Toggling Music Player");const e=document.getElementById("musicPlayerBtn"),o=document.getElementById("musicPlayerWidget");e&&o&&(e.style.transform="scale(1.1) translateY(-2px)",setTimeout(()=>{e.style.transform=""},200),o.classList.toggle("hidden"),o.classList.contains("hidden")||setTimeout(()=>{if(console.log("🎵 Widget shown, checking Music API..."),window.MUSIC&&window.MUSIC.ensureLoaded){console.log("🎵 Music API available, calling ensureLoaded...");try{window.MUSIC.ensureLoaded()}catch(n){console.warn("Music ensureLoaded failed:",n)}}else console.log("🎵 Music API not available, waiting for initialization..."),f()},500),console.log("Music Player widget toggled"))}function L(){console.log("🤖 Toggling AI Assistant");const e=document.getElementById("polaczekBtn"),o=document.getElementById("polaczekWidget");e&&o&&(e.style.transform="scale(1.1) translateY(-2px)",setTimeout(()=>{e.style.transform=""},200),o.classList.toggle("hidden"),o.classList.contains("hidden")||setTimeout(()=>{if(console.log("🤖 Widget shown, checking POLACZEK API..."),window.POLACZEK&&window.POLACZEK.openAssistant){console.log("🤖 POLACZEK API available, opening assistant...");try{window.POLACZEK.openAssistant(),window.POLACZEK.forceReconnect&&window.POLACZEK.forceReconnect()}catch(n){console.warn("POLACZEK openAssistant failed:",n)}}else console.log("🤖 POLACZEK API not available, waiting for initialization..."),y()},500),console.log("AI Assistant widget toggled"))}function f(){console.log("🎵 Waiting for Music API...");let e=0;const o=100,n=()=>{if(e++,console.log(`🎵 Music API check attempt ${e}/${o}`),window.MUSIC&&window.MUSIC.ensureLoaded){console.log("🎵 Music API ready! Initializing...");try{window.MUSIC.ensureLoaded(),sessionStorage.setItem("music-status","ready"),localStorage.setItem("components-working","true"),console.log("🎵 Music player initialized successfully!")}catch(t){console.warn("Music ensureLoaded failed:",t),sessionStorage.setItem("music-status","error")}}else e<o?(console.log("🎵 Music API not ready yet, retrying..."),setTimeout(n,100)):(console.error("🎵 Music API not ready after 10 seconds - component may not be loaded"),sessionStorage.setItem("music-status","timeout"),console.log("🎵 Debug info:"),console.log("- window.MUSIC exists:",!!window.MUSIC),console.log("- window.MUSIC.ensureLoaded exists:",!!(window.MUSIC&&window.MUSIC.ensureLoaded)),console.log("- Music widget element exists:",!!document.getElementById("musicPlayerWidget")),console.log("🎵 Use resetComponents() or hardResetComponents() in console if needed"))};n()}function y(){console.log("🤖 Waiting for POLACZEK API...");let e=0;const o=100,n=()=>{if(e++,console.log(`🤖 POLACZEK API check attempt ${e}/${o}`),window.POLACZEK&&window.POLACZEK.openAssistant){console.log("🤖 POLACZEK API ready! Connecting...");try{if(window.POLACZEK.getStatus){const t=window.POLACZEK.getStatus();console.log("🤖 Current POLACZEK status:",t),t==="disconnected"&&(console.log("🤖 Triggering reconnection..."),window.dispatchEvent(new CustomEvent("polaczek-reconnect")))}sessionStorage.setItem("polaczek-status","ready"),localStorage.setItem("components-working","true"),console.log("🤖 POLACZEK assistant initialized successfully!")}catch(t){console.warn("POLACZEK initialization failed:",t),sessionStorage.setItem("polaczek-status","error")}}else e<o?(console.log("🤖 POLACZEK API not ready yet, retrying..."),setTimeout(n,100)):(console.error("🤖 POLACZEK API not ready after 10 seconds - component may not be loaded"),sessionStorage.setItem("polaczek-status","timeout"),console.log("🤖 Debug info:"),console.log("- window.POLACZEK exists:",!!window.POLACZEK),console.log("- window.POLACZEK.openAssistant exists:",!!(window.POLACZEK&&window.POLACZEK.openAssistant)),console.log("- POLACZEK widget element exists:",!!document.getElementById("polaczekWidget")),console.log("🤖 Use resetComponents() or hardResetComponents() in console if needed"))};n()}function S(){console.log("🔄 Manually resetting all components..."),delete window.MUSIC,delete window.POLACZEK,sessionStorage.clear(),localStorage.setItem("components-initialized","false"),localStorage.setItem("components-working","false"),setTimeout(()=>{console.log("🔄 Re-initializing components..."),f(),y()},500),console.log("🔄 Component reset completed!")}function b(){console.log("💣 Hard resetting - clearing everything and reloading page..."),localStorage.clear(),sessionStorage.clear(),delete window.MUSIC,delete window.POLACZEK,window.location.reload(!0)}function z(){console.log("💬 Opening Main Chat"),window.open("/chatbot","_blank")}function T(){console.log("🔄 Refreshing page"),window.location.reload()}function v(){console.log("📁 Opening folder"),alert("Otwieranie lokalnego folderu jest zablokowane przez przeglądarki ze względów bezpieczeństwa.")}function O(){console.log("❌ Closing tab");try{window.close()}catch{alert("Zamykanie karty może być zablokowane przez przeglądarkę.")}}
