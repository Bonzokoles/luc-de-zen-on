import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{o as ft}from"./index-client.CI4zVHyS.js";import{p as mt,g as e,a as m,h as s,m as A,f as C,k as gt,s as n,c as l,t as F,b as k,d as xt,r as i}from"./template.BqTI6ysn.js";import{s as S,e as h}from"./render.DLtPj5hE.js";import{i as N}from"./if.CL3_9eW_.js";import{e as ht,i as _t}from"./each.BgQDu70D.js";import{s as bt,r as yt}from"./attributes.CMoobVFc.js";import{s as Y}from"./class.Cwo7PGLY.js";import{s as Ne}from"./style.eybEfuFE.js";import{b as Ue}from"./this.zW9sjCU0.js";import{i as wt}from"./lifecycle.CZxN27Pe.js";/* empty css                                  */import"./index.DIeogL5L.js";import"./attributes.BJtm3mOD.js";var kt=C('<div class="visualizer-idle svelte-13sx5v7"><span class="svelte-13sx5v7">AUDIO MATRIX INACTIVE</span></div>'),St=C('<span class="btn-icon loading svelte-13sx5v7">‚ßó</span>'),Ct=C('<span class="btn-icon svelte-13sx5v7"> </span>'),Tt=C('<span class="working-indicator svelte-13sx5v7">‚óè</span>'),At=C('<span class="current-indicator svelte-13sx5v7">‚ô™</span>'),Mt=C('<button><div class="track-info svelte-13sx5v7"><div class="track-title svelte-13sx5v7"> </div> <div class="track-subtitle svelte-13sx5v7"> </div></div> <div class="track-indicators svelte-13sx5v7"><!> <!></div></button>'),Et=C('<div class="playlist-dropdown svelte-13sx5v7"><div class="playlist-header svelte-13sx5v7"><span class="playlist-title svelte-13sx5v7"> </span> <button class="close-btn svelte-13sx5v7">‚úï</button></div> <div class="playlist-content svelte-13sx5v7"></div></div>'),Lt=C('<audio preload="auto" crossorigin="anonymous" class="svelte-13sx5v7"></audio> <div class="cyberpunk-music-player svelte-13sx5v7"><div class="player-panel svelte-13sx5v7"><div class="player-header svelte-13sx5v7"><div class="player-title svelte-13sx5v7"><span class="title-text svelte-13sx5v7">CYBER MUSIC SYSTEM</span> <div class="status-indicators svelte-13sx5v7"><span>L1</span> <span>L2</span> <span>L3</span></div></div></div> <div class="visualizer-container svelte-13sx5v7"><canvas class="visualizer-canvas svelte-13sx5v7"></canvas> <div class="visualizer-overlay svelte-13sx5v7"><!></div></div> <div class="track-info-section svelte-13sx5v7"><div class="track-details svelte-13sx5v7"><div class="track-name svelte-13sx5v7"> </div> <div class="track-artist svelte-13sx5v7"> </div> <div class="track-time svelte-13sx5v7"> </div></div></div> <div class="player-controls svelte-13sx5v7"><button class="control-btn svelte-13sx5v7"><span class="btn-icon svelte-13sx5v7">‚èÆ</span></button> <button class="control-btn play-btn svelte-13sx5v7"><!></button> <button class="control-btn svelte-13sx5v7"><span class="btn-icon svelte-13sx5v7">‚è≠</span></button> <button class="control-btn playlist-btn svelte-13sx5v7"><span class="btn-icon svelte-13sx5v7">‚ò∞</span></button></div> <div class="progress-section svelte-13sx5v7"><div class="progress-bar svelte-13sx5v7" role="slider" tabindex="0" aria-label="Seek"><div class="progress-fill svelte-13sx5v7"></div> <div class="progress-glow svelte-13sx5v7"></div></div></div> <div class="volume-section svelte-13sx5v7"><div class="volume-control svelte-13sx5v7"><span class="volume-icon svelte-13sx5v7">üîä</span> <input type="range" min="0" max="100" class="volume-slider svelte-13sx5v7"/> <span class="volume-value svelte-13sx5v7"> </span></div></div></div> <!></div>',1);function Xt(De,He){mt(He,!1);let r=m(),_,x,oe,c=m([]),d=m(0),g=m(!1),b=m(.5),U=m(0),y=m(0),E=m(!1),q=m("No track selected"),w=m(!1),v=m(),u,G,L,M,I=m(!1),R=m(!1),P=m(!1),ce;ft(()=>{ue(),Ve(),typeof window<"u"&&(delete window.CYBER_MUSIC,window.CYBER_MUSIC={play:()=>{e(g)||z()},pause:()=>{e(g)&&z()},toggle:()=>z(),next:()=>D(),prev:()=>fe(),togglePlaylist:()=>ge(),setVolume:t=>{const a=Math.max(0,Math.min(1,Number(t)));s(b,a),e(r)&&A(r,e(r).volume=e(b))},getState:()=>({isPlaying:e(g),trackName:e(q),volume:e(b)}),getAnalyser:()=>x||null},console.log("üéµ CYBER MUSIC API registered"))});function Ve(){e(v)&&(u=e(v).getContext("2d"),A(v,e(v).width=300),A(v,e(v).height=150))}function de(){try{if(!e(r)||x)return;const t=window.AudioContext||window.webkitAudioContext;if(!t)return;_=new t,_.state==="suspended"&&_.resume().catch(()=>{}),oe=_.createMediaElementSource(e(r)),x=_.createAnalyser(),x.fftSize=256,x.smoothingTimeConstant=.8,M=x.frequencyBinCount,L=new Uint8Array(M),oe.connect(x),x.connect(_.destination),window.dispatchEvent(new CustomEvent("cyber-music-analyser-ready"))}catch(t){console.warn("setupAnalyser failed",t)}}function ue(){s(c,[{name:"Cyber Pulse",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",artist:"Digital Dreams",working:!0},{name:"Neon Nights",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",artist:"Synthwave",working:!0},{name:"Matrix Flow",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",artist:"Code Runner",working:!0},{name:"Electric Dreams",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3",artist:"Future Bass",working:!0},{name:"Data Stream",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",artist:"Binary Soul",working:!0}]),X()}function X(){e(c)[e(d)]&&(s(q,e(c)[e(d)].name),e(r)&&e(c)[e(d)].url&&(s(w,!0),A(r,e(r).src=e(c)[e(d)].url),A(r,e(r).volume=e(b)),e(r).addEventListener("loadeddata",()=>{s(w,!1),de()}),e(r).addEventListener("error",t=>{s(w,!1),console.error("Audio load error:",t),e(d)<e(c).length-1&&D()})))}function z(){if(!e(c)[e(d)]){ue();return}e(r).src||X(),e(g)?(e(r).pause(),s(g,!1),K()):(s(w,!0),de(),e(r).play().then(()=>{s(g,!0),s(w,!1),Fe(),pe();try{_&&_.state==="suspended"&&_.resume()}catch{}}).catch(t=>{console.error("Play error:",t),s(w,!1),s(g,!1),K()}))}function Fe(){clearTimeout(ce),s(I,!1),s(R,!1),s(P,!1),setTimeout(()=>{s(I,!0)},100),setTimeout(()=>{s(R,!0)},800),setTimeout(()=>{s(P,!0)},1600)}function K(){clearTimeout(ce),s(I,!1),s(R,!1),s(P,!1),G&&cancelAnimationFrame(G)}function pe(){if(!e(g)||!x||!u)return;x.getByteFrequencyData(L),u.clearRect(0,0,e(v).width,e(v).height);const t=e(v).width/M*2.5;let a,o=0;if(e(P)){u.globalAlpha=.4;for(let p=0;p<M;p+=3){a=L[p]/255*e(v).height*.8;const f=u.createLinearGradient(0,e(v).height-a,0,e(v).height);f.addColorStop(0,"rgba(0, 255, 255, 0.6)"),f.addColorStop(1,"rgba(0, 150, 255, 0.4)"),u.fillStyle=f,u.fillRect(o-t*.5,e(v).height-a,t*2,a),o+=t+2}}if(e(R)){u.globalAlpha=.7,o=0;for(let p=0;p<M;p+=2){a=L[p]/255*e(v).height*.9;const f=u.createLinearGradient(0,e(v).height-a,0,e(v).height);f.addColorStop(0,"rgba(0, 217, 255, 0.8)"),f.addColorStop(1,"rgba(0, 100, 200, 0.5)"),u.fillStyle=f,u.fillRect(o,e(v).height-a,t*1.2,a),o+=t+1}}if(e(I)){u.globalAlpha=1,o=0;for(let p=0;p<M;p++){a=L[p]/255*e(v).height;const f=u.createLinearGradient(0,e(v).height-a,0,e(v).height);f.addColorStop(0,"rgba(0, 255, 255, 1)"),f.addColorStop(.5,"rgba(0, 217, 255, 0.9)"),f.addColorStop(1,"rgba(0, 150, 255, 0.7)"),u.fillStyle=f,u.fillRect(o,e(v).height-a,t,a),o+=t+1}}G=requestAnimationFrame(pe)}function O(t){if(t>=0&&t<e(c).length){const a=e(g);e(g)&&(e(r).pause(),s(g,!1),K()),s(d,t),X(),a&&setTimeout(()=>{z()},500)}s(E,!1)}function fe(){e(c).length>0&&(s(d,(e(d)-1+e(c).length)%e(c).length),O(e(d)))}function D(){e(c).length>0&&(s(d,(e(d)+1)%e(c).length),O(e(d)))}function Ye(){e(r)&&(s(U,e(r).currentTime),s(y,e(r).duration||0))}function qe(){D()}function Ge(t){s(b,t.target.value/100),e(r)&&A(r,e(r).volume=e(b))}function Xe(t){if(e(r)&&e(y)){const a=t.currentTarget.getBoundingClientRect(),o=(t.clientX-a.left)/a.width;A(r,e(r).currentTime=o*e(y))}}function me(t){const a=Math.floor(t/60),o=Math.floor(t%60);return`${a}:${o.toString().padStart(2,"0")}`}function ge(){s(E,!e(E))}wt();var xe=Lt(),H=gt(xe);Ue(H,t=>s(r,t),()=>e(r));var he=n(H,2),W=l(he),j=l(W),_e=l(j),be=n(l(_e),2),ye=l(be),we=n(ye,2),Ke=n(we,2);i(be),i(_e),i(j);var J=n(j,2),ke=l(J);Ue(ke,t=>s(v,t),()=>e(v));var Se=n(ke,2),Oe=l(Se);{var We=t=>{var a=kt();k(t,a)};N(Oe,t=>{e(g)||t(We)})}i(Se),i(J);var Q=n(J,2),Ce=l(Q),Z=l(Ce),je=l(Z,!0);i(Z);var ee=n(Z,2),Je=l(ee,!0);i(ee);var Te=n(ee,2),Qe=l(Te);i(Te),i(Ce),i(Q);var te=n(Q,2),Ae=l(te),$=n(Ae,2),Ze=l($);{var et=t=>{var a=St();k(t,a)},tt=t=>{var a=Ct(),o=l(a,!0);i(a),F(()=>S(o,e(g)?"‚è∏":"‚ñ∂")),k(t,a)};N(Ze,t=>{e(w)?t(et):t(tt,!1)})}i($);var Me=n($,2),at=n(Me,2);i(te);var ae=n(te,2),se=l(ae),Ee=l(se),st=n(Ee,2);i(se),i(ae);var Le=n(ae,2),Ie=l(Le),V=n(l(Ie),2);yt(V);var Re=n(V,2),it=l(Re);i(Re),i(Ie),i(Le),i(W);var lt=n(W,2);{var rt=t=>{var a=Et(),o=l(a),p=l(o),f=l(p);i(p);var nt=n(p,2);i(o);var Pe=n(o,2);ht(Pe,5,()=>e(c),_t,(vt,ie,le)=>{var B=Mt(),re=l(B),ne=l(re),ot=l(ne,!0);i(ne);var ze=n(ne,2),ct=l(ze,!0);i(ze),i(re);var $e=n(re,2),Be=l($e);{var dt=T=>{var ve=Tt();k(T,ve)};N(Be,T=>{e(ie).working&&T(dt)})}var ut=n(Be,2);{var pt=T=>{var ve=At();k(T,ve)};N(ut,T=>{le===e(d)&&T(pt)})}i($e),i(B),F(()=>{Y(B,1,`playlist-item ${le===e(d)?"active":""}`,"svelte-13sx5v7"),S(ot,e(ie).name),S(ct,e(ie).artist)}),h("click",B,()=>O(le)),k(vt,B)}),i(Pe),i(a),F(()=>S(f,`TRACK LIST (${e(c).length??""})`)),h("click",nt,()=>s(E,!1)),k(t,a)};N(lt,t=>{e(E)&&t(rt)})}i(he),F((t,a,o)=>{Y(ye,1,`indicator ${e(I)?"active":""}`,"svelte-13sx5v7"),Y(we,1,`indicator ${e(R)?"active":""}`,"svelte-13sx5v7"),Y(Ke,1,`indicator ${e(P)?"active":""}`,"svelte-13sx5v7"),S(je,e(q)),S(Je,e(c)[e(d)]?.artist||"Unknown Artist"),S(Qe,`${t??""} / ${a??""}`),$.disabled=e(w),Ne(Ee,`width: ${e(y)?e(U)/e(y)*100:0}%`),Ne(st,`left: ${e(y)?e(U)/e(y)*100:0}%`),bt(V,e(b)*100),S(it,`${o??""}%`)},[()=>me(e(U)),()=>me(e(y)),()=>Math.round(e(b)*100)]),h("timeupdate",H,Ye),h("ended",H,qe),h("click",Ae,fe),h("click",$,z),h("click",Me,D),h("click",at,ge),h("click",se,Xe),h("input",V,Ge),k(De,xe),xt()}export{Xt as default};
