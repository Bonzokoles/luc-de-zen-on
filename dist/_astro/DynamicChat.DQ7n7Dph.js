import{p as S,Q as W,H as $,v as c,i as H,f as k,s as g,c as n,A as K,a as L,t as E,b as Q,g as e,d as w,h as I,j as M,k as R,n as d,B as U,q as F,x as A,E as y,R as G,z as B}from"./Header.astro_astro_type_script_index_0_lang.AXIbBUBV.js";/* empty css                           */import"./react.CU-GxeNQ.js";if(typeof MessageChannel>"u"){class m{constructor(){this.onmessage=null}postMessage(t){const s={data:t};(typeof queueMicrotask=="function"?queueMicrotask:r=>setTimeout(r,0))(()=>this.onmessage&&this.onmessage(s))}start(){}close(){}}class f{constructor(){this.port1=new m,this.port2=new m;const t=(s,r)=>{const b={data:r};(typeof queueMicrotask=="function"?queueMicrotask:v=>setTimeout(v,0))(()=>s.onmessage&&s.onmessage(b))};this.port1.postMessage=s=>t(this.port2,s),this.port2.postMessage=s=>t(this.port1,s)}}globalThis.MessageChannel=f}var V=k('<div><div><div class="message-text text-primary-foreground whitespace-pre-wrap"> </div></div></div>'),X=k('<div class="message assistant-message svelte-1s7eeir"><div class="message-content bg-cyan-600/20 border-cyan-400/30 rounded-lg p-3 svelte-1s7eeir"><div class="message-text text-primary-foreground">AI pisze odpowiedź...</div></div></div>'),Y=k('<div class="chat-container border border-edge rounded-lg overflow-hidden mt-8" style="background: rgba(0, 0, 0, 0.5);"><div class="chat-header border-b border-edge p-4 flex items-center justify-between" style="background: rgba(0, 0, 0, 0.3);"><div class="flex items-center gap-3"><div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div> <span class="text-primary-foreground font-semibold"> </span></div></div> <div class="chat-messages h-96 overflow-y-auto p-4 space-y-4"><!> <!></div> <div class="chat-input border-t border-edge p-4"><div class="flex gap-3"><textarea rows="2" placeholder="Napisz swoją wiadomość..." class="flex-1 p-3 border border-edge rounded-lg text-primary-foreground placeholder-gray-400 focus:border-cyan-400 focus:outline-none resize-none" style="background: rgba(0, 0, 0, 0.5);"></textarea> <button class="bg-cyan-600 hover:bg-cyan-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 disabled:opacity-50">Wyślij</button></div></div></div>');function te(m,f){S(f,!1);let l=W(f,"agent",8),t=w([]),s=w(""),r=w(!1);$(()=>{c(t,[{from:"assistant",text:l().prompt||"Witaj! Jestem gotowy do rozmowy."}])});async function b(){if(!e(s).trim()||e(r))return;const a={from:"user",text:e(s)};c(t,[...e(t),a]);const o=e(s);c(s,""),c(r,!0);try{const i=await fetch("/api/generic-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:o,system_prompt:l().prompt,model:l().model})});if(!i.ok)throw new Error(`Błąd serwera: ${i.statusText}`);const h={from:"assistant",text:(await i.json()).answer};c(t,[...e(t),h])}catch(i){const p={from:"assistant",text:`Przepraszam, wystąpił błąd: ${i.message}`};c(t,[...e(t),p])}finally{c(r,!1)}}H();var v=Y(),x=n(v),j=n(x),z=g(n(j),2),D=n(z,!0);d(z),d(j),d(x);var _=g(x,2),T=n(_);K(T,1,()=>e(t),U,(a,o)=>{var i=V(),p=n(i),h=n(p),O=n(h,!0);d(h),d(p),d(i),E(()=>{B(i,1,`message ${e(o),y(()=>e(o).from)??""}-message`,"svelte-1s7eeir"),B(p,1,`message-content ${e(o),y(()=>e(o).from==="user"?"bg-blue-600/20 border-blue-400/30":"bg-cyan-600/20 border-cyan-400/30")??""} rounded-lg p-3`,"svelte-1s7eeir"),A(O,(e(o),y(()=>e(o).text)))}),M(a,i)});var J=g(T,2);{var N=a=>{var o=X();M(a,o)};L(J,a=>{e(r)&&a(N)})}d(_);var q=g(_,2),C=n(q),u=n(C);F(u);var P=g(u,2);d(C),d(q),d(v),E(()=>{A(D,(G(l()),y(()=>l().name))),u.disabled=e(r),P.disabled=e(r)}),Q(u,()=>e(s),a=>c(s,a)),I("keydown",u,a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),b())}),I("click",P,b),M(m,v),R()}export{te as default};
