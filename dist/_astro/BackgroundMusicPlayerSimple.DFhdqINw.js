import{p as Me,H as Ce,g as e,d as g,v as o,m as w,i as Se,f as L,T as Ae,c as n,s as u,a as se,t as ne,h as p,j as T,k as Te,n as i,x as P,l as Ie,I as ie,U as Ue,F as xe,G as Ee,y as De,A as Pe,z as Le,B as Ne}from"./Header.astro_astro_type_script_index_0_lang.AXIbBUBV.js";/* empty css                       */import"./react.CU-GxeNQ.js";if(typeof MessageChannel>"u"){class N{constructor(){this.onmessage=null}postMessage(v){const r={data:v};(typeof queueMicrotask=="function"?queueMicrotask:_=>setTimeout(_,0))(()=>this.onmessage&&this.onmessage(r))}start(){}close(){}}class V{constructor(){this.port1=new N,this.port2=new N;const v=(r,_)=>{const l={data:_};(typeof queueMicrotask=="function"?queueMicrotask:d=>setTimeout(d,0))(()=>r.onmessage&&r.onmessage(l))};this.port1.postMessage=r=>v(this.port2,r),this.port2.postMessage=r=>v(this.port1,r)}}globalThis.MessageChannel=V}var Re=L('<div class="panel-content svelte-u12wbg"><div class="now-playing svelte-u12wbg"><div class="track-info svelte-u12wbg"><div class="track-name svelte-u12wbg"> </div> <div class="track-time svelte-u12wbg"> </div></div></div> <div class="player-controls svelte-u12wbg"><button class="control-btn svelte-u12wbg">â®</button> <button class="control-btn play-pause svelte-u12wbg"> </button> <button class="control-btn svelte-u12wbg">â­</button> <button class="control-btn svelte-u12wbg">ğŸ“‹</button></div> <div class="volume-control svelte-u12wbg"><span class="svelte-u12wbg">ğŸ”Š</span> <input type="range" min="0" max="100" class="volume-slider svelte-u12wbg"/></div> <div class="progress-container svelte-u12wbg"><div class="progress-bar svelte-u12wbg" role="slider" tabindex="0" aria-label="Seek"><div class="progress-fill svelte-u12wbg"></div></div></div></div>'),Oe=L('<div class="playlist-empty svelte-u12wbg">No tracks loaded</div>'),ze=L("<button> </button>"),Be=L('<div class="playlist-panel svelte-u12wbg"><div class="playlist-header svelte-u12wbg"><span>ğŸµ PLAYLIST</span> <button class="close-btn svelte-u12wbg">Ã—</button></div> <div class="playlist-content svelte-u12wbg"><!></div> <div class="playlist-actions svelte-u12wbg"><input type="file" webkitdirectory multiple accept="audio/*" style="display: none;" id="music-folder"/> <button class="action-btn svelte-u12wbg">ğŸ“ Load Folder</button> <button class="action-btn svelte-u12wbg">ğŸµ Demo Tracks</button></div></div>'),Fe=L('<div class="background-music-player in-flow svelte-u12wbg"><audio preload="metadata" crossorigin="anonymous"></audio> <div class="music-control-panel svelte-u12wbg"><div class="panel-header svelte-u12wbg"><span>ğŸµ MUSIC â€¢ POLACZEK</span> <button class="minimize-btn svelte-u12wbg"> </button></div> <!></div> <!></div>');function Ke(N,V){Me(V,!1);let a=g(),v,r,_,l=g([]),d=g(0),h=g(!1),R=g(!1),y=g(.5),O=g(0),f=g(0),I=g(!1),Y=g("No track selected");Ce(()=>{z(),typeof window<"u"&&(delete window.MUSIC,window.MUSIC={play:()=>{e(h)||B()},pause:()=>{e(h)&&B()},toggle:()=>B(),next:()=>j(),prev:()=>oe(),togglePlaylist:()=>ce(),setVolume:t=>{const s=Math.max(0,Math.min(1,Number(t)));o(y,s),e(a)&&w(a,e(a).volume=e(y))},getState:()=>({isPlaying:e(h),trackName:e(Y),volume:e(y)}),ensureLoaded:()=>{e(l).length?U():z()},getAnalyser:()=>r||window.MUSIC_ANALYSER||null,openFolderPicker:()=>{console.log("ğŸµ Opening music library folder picker...");try{const t=document.getElementById("music-folder");t&&typeof t.click=="function"?(t.click(),console.log("âœ… Music library folder picker opened successfully")):(console.warn("âŒ Music folder picker element not found"),alert("BÅ‚Ä…d: Nie moÅ¼na otworzyÄ‡ selektora folderÃ³w z muzykÄ…"))}catch(t){console.warn("Folder picker not available:",t),alert("BÅ‚Ä…d: Selektor folderÃ³w niedostÄ™pny - "+t.message)}}},console.log("ğŸµ MUSIC API registered and ready"))});function le(){try{if(!e(a)||r)return;const t=window.AudioContext||window.webkitAudioContext;if(!t)return;v=window.MUSIC_AUDIO_CTX||new t,v.state==="suspended"&&v.resume().catch(()=>{}),window.MUSIC_MEDIA_SOURCE?_=window.MUSIC_MEDIA_SOURCE:(_=v.createMediaElementSource(e(a)),window.MUSIC_MEDIA_SOURCE=_),r=window.MUSIC_ANALYSER||v.createAnalyser(),r.fftSize=1024,r.smoothingTimeConstant=.85;try{_.connect(r),r.connect(v.destination)}catch{}window.MUSIC_AUDIO_CTX=v,window.MUSIC_ANALYSER=r,window.dispatchEvent(new CustomEvent("music-analyser-ready"));try{const s=window.MIC_AUDIO_CTX;s&&s.state==="suspended"&&s.resume().catch(()=>{})}catch{}}catch(t){console.warn("setupAnalyser failed",t)}}function z(){o(l,[{name:"MERKABA",url:"https://assets.codepen.io/7558/Merkaba.mp3"},{name:"DHAMIKA",url:"https://assets.codepen.io/7558/Dhamika.mp3"},{name:"VACANT",url:"https://assets.codepen.io/7558/Vacant.mp3"},{name:"LXSTNGHT",url:"https://assets.codepen.io/7558/lxstnght-back_1.mp3"}]),U()}function U(){e(l)[e(d)]&&(o(Y,e(l)[e(d)].name),e(a)&&e(l)[e(d)].url&&(w(a,e(a).src=e(l)[e(d)].url),w(a,e(a).volume=e(y)),le()))}function B(){if(!e(l)[e(d)]){z();return}e(a).src||U(),e(h)?(e(a).pause(),o(h,!1)):(le(),e(a).play().then(()=>{o(h,!0);try{v&&v.state==="suspended"&&v.resume()}catch{}}).catch(console.error))}function $(t){t>=0&&t<e(l).length&&(o(d,t),U(),e(h)&&e(a).play())}function oe(){e(l).length>0&&(o(d,(e(d)-1+e(l).length)%e(l).length),$(e(d)))}function j(){e(l).length>0&&(o(d,(e(d)+1)%e(l).length),$(e(d)))}function ue(){e(a)&&(o(O,e(a).currentTime),o(f,e(a).duration||0))}function de(){j()}function ve(t){o(y,t.target.value/100),e(a)&&w(a,e(a).volume=e(y))}function pe(t){if(e(a)&&e(f)){const s=t.currentTarget.getBoundingClientRect(),c=(t.clientX-s.left)/s.width;w(a,e(a).currentTime=c*e(f))}}function fe(t){if(!e(a)||!e(f))return;const s=5;t.key==="ArrowRight"?(w(a,e(a).currentTime=Math.min(e(f),e(a).currentTime+s)),t.preventDefault()):t.key==="ArrowLeft"?(w(a,e(a).currentTime=Math.max(0,e(a).currentTime-s)),t.preventDefault()):t.key==="Home"?(w(a,e(a).currentTime=0),t.preventDefault()):t.key==="End"?(w(a,e(a).currentTime=e(f)),t.preventDefault()):(t.key==="Enter"||t.key===" ")&&t.preventDefault()}function re(t){const s=Math.floor(t/60),c=Math.floor(t%60);return`${s}:${c.toString().padStart(2,"0")}`}function me(t){const s=Array.from(t.target.files).filter(c=>c.type.startsWith("audio/"));o(l,s.map(c=>({name:c.name.replace(/\.[^/.]+$/,""),file:c,url:URL.createObjectURL(c)}))),o(d,0),U(),o(I,!0)}function ce(){o(I,!e(I))}function ge(){o(R,!e(R))}Se();var G=Fe(),F=n(G);Ae(F,t=>o(a,t),()=>e(a));var W=u(F,2),Z=n(W),J=u(n(Z),2),be=n(J,!0);i(J),i(Z);var we=u(Z,2);{var _e=t=>{var s=Re(),c=n(s),X=n(c),k=n(X),Q=n(k,!0);i(k);var q=u(k,2),ee=n(q);i(q),i(X),i(c);var S=u(c,2),x=n(S),M=u(x,2),te=n(M,!0);i(M);var b=u(M,2),A=u(b,2);i(S);var E=u(S,2),D=u(n(E),2);Ie(D),i(E);var H=u(E,2),m=n(H);ie(m,"aria-valuemin",0);var C=n(m);i(m),i(H),i(s),ne((K,ae)=>{P(Q,e(Y)),P(ee,`${K??""} / ${ae??""}`),P(te,e(h)?"â¸":"â–¶"),Ue(D,e(y)*100),ie(m,"aria-valuemax",e(f)||0),ie(m,"aria-valuenow",e(O)||0),xe(C,`width: ${e(f)?e(O)/e(f)*100:0}%`)},[()=>re(e(O)),()=>re(e(f))]),p("click",x,oe),p("click",M,B),p("click",b,j),p("click",A,ce),p("input",D,ve),p("click",m,pe),p("keydown",m,fe),T(t,s)};se(we,t=>{e(R)||t(_e)})}i(W);var he=u(W,2);{var ye=t=>{var s=Be(),c=n(s),X=u(n(c),2);i(c);var k=u(c,2),Q=n(k);{var q=b=>{var A=Oe();T(b,A)},ee=b=>{var A=Ee(),E=De(A);Pe(E,1,()=>e(l),Ne,(D,H,m)=>{var C=ze();let K;var ae=n(C,!0);i(C),ne(ke=>{K=Le(C,1,"playlist-item svelte-u12wbg",null,K,ke),P(ae,e(H).name)},[()=>({active:m===e(d)})]),p("click",C,()=>$(m)),T(D,C)}),T(b,A)};se(Q,b=>{e(l).length===0?b(q):b(ee,!1)})}i(k);var S=u(k,2),x=n(S),M=u(x,2),te=u(M,2);i(S),i(s),p("click",X,()=>o(I,!1)),p("change",x,me),p("click",M,()=>document.getElementById("music-folder").click()),p("click",te,z),T(t,s)};se(he,t=>{e(I)&&t(ye)})}i(G),ne(()=>P(be,e(R)?"+":"âˆ’")),p("timeupdate",F,ue),p("ended",F,de),p("click",J,ge),T(N,G),Te()}export{Ke as default};
