import{j as e}from"./jsx-runtime.DQGZxW1v.js";import{r as t}from"./index.yhVXtIVG.js";import{m as N}from"./proxy.CX60CZKS.js";const H=()=>{const[g,p]=t.useState(!1),[i,M]=t.useState(0),[b,S]=t.useState(70),[j,w]=t.useState("bars"),[d,v]=t.useState(!1),o=t.useRef(null),R=t.useRef(null),x=t.useRef(null),l=t.useRef();t.useRef(null);const k=t.useRef(null),u=t.useRef(null),n=[{title:"Muzyka do pracy 1",artist:"Focus Beats",duration:"3:45",genre:"Lo-fi",src:""},{title:"Ambient dla produktywnoÅ›ci",artist:"Chill Vibes",duration:"4:12",genre:"Ambient",src:""},{title:"Koncentracja i flow",artist:"Study Music",duration:"5:20",genre:"Electronic",src:""}];t.useEffect(()=>()=>{l.current&&cancelAnimationFrame(l.current),u.current&&u.current.getTracks().forEach(s=>s.stop())},[]);const V=(s,r,a)=>{const c=s.frequencyBinCount,m=new Uint8Array(c),z=()=>{l.current=requestAnimationFrame(z),s.getByteFrequencyData(m),a.fillStyle="rgba(15, 23, 42, 0.2)",a.fillRect(0,0,r.width,r.height);const P=r.height/2;a.strokeStyle="#10b981",a.lineWidth=2,a.beginPath();const $=r.width/c;let y=0;for(let f=0;f<c;f++){const W=m[f]/255,C=P+(W-.5)*r.height;f===0?a.moveTo(y,C):a.lineTo(y,C),y+=$}a.stroke()};z()},A=async()=>{try{const s=await navigator.mediaDevices.getUserMedia({audio:!0});u.current=s;const r=new(window.AudioContext||window.webkitAudioContext),a=r.createMediaStreamSource(s),c=r.createAnalyser();if(c.fftSize=256,a.connect(c),x.current){const m=x.current.getContext("2d");m&&V(c,x.current,m)}}catch(s){console.error("Error accessing microphone:",s),alert("Nie moÅ¼na uzyskaÄ‡ dostÄ™pu do mikrofonu"),v(!1)}},B=()=>{l.current&&cancelAnimationFrame(l.current),u.current&&(u.current.getTracks().forEach(s=>s.stop()),u.current=null)},T=()=>{o.current&&(k.current?.state==="suspended"&&k.current.resume(),g?(o.current.pause(),l.current&&cancelAnimationFrame(l.current)):alert("ðŸŽµ To jest wersja demo. W peÅ‚nej wersji zaÅ‚aduj pliki MP3 do folderu /public/music/"),p(!g))},E=async()=>{d?(B(),v(!1)):(await A(),v(!0))},h=s=>{M(s),p(!1),o.current&&(o.current.currentTime=0)},F=s=>{const r=parseInt(s.target.value);S(r),o.current&&(o.current.volume=r/100)};return e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"card",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"ðŸŽµ Music Player & Wizualizator"}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[e.jsx("button",{onClick:E,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d?"bg-green-600 text-white shadow-glow":"bg-business-dark text-business-text-dim border border-business-border hover:border-business-accent"}`,children:d?"ðŸŽ¤ Mowa wÅ‚Ä…czona":"ðŸŽ¤ Wizualizator mowy"}),!d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w("bars"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${j==="bars"?"bg-primary-600 text-white":"bg-business-dark text-business-text-dim border border-business-border hover:border-business-accent"}`,children:"ðŸ“Š SÅ‚upki"}),e.jsx("button",{onClick:()=>w("wave"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${j==="wave"?"bg-primary-600 text-white":"bg-business-dark text-business-text-dim border border-business-border hover:border-business-accent"}`,children:"ã€°ï¸ Fala"}),e.jsx("button",{onClick:()=>w("circular"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${j==="circular"?"bg-primary-600 text-white":"bg-business-dark text-business-text-dim border border-business-border hover:border-business-accent"}`,children:"â­• OkrÄ…gÅ‚y"})]})]}),!d&&e.jsx(N.div,{initial:{scale:.95},animate:{scale:1},className:"mb-6 bg-business-dark rounded-lg overflow-hidden border border-business-border",children:e.jsx("canvas",{ref:R,width:800,height:200,className:"w-full h-48 md:h-64"})}),d&&e.jsxs(N.div,{initial:{scale:.95},animate:{scale:1},className:"mb-6 bg-business-dark rounded-lg overflow-hidden border-2 border-green-600/50",children:[e.jsx("canvas",{ref:x,width:800,height:200,className:"w-full h-48 md:h-64"}),e.jsx("div",{className:"px-4 py-2 bg-green-900/30 text-center text-sm text-green-300",children:"ðŸŽ¤ MÃ³w do mikrofonu, aby zobaczyÄ‡ wizualizacjÄ™"})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary-900/30 to-business-surface border border-primary-700 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-primary-600 to-primary-700 flex items-center justify-center text-3xl",children:"ðŸŽ§"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-lg",children:n[i].title}),e.jsx("p",{className:"text-sm text-business-text-dim",children:n[i].artist}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"badge badge-info text-xs",children:n[i].genre}),e.jsx("span",{className:"text-xs text-business-text-dim",children:n[i].duration})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>h(Math.max(0,i-1)),disabled:i===0,className:"w-12 h-12 rounded-full bg-business-surface border border-business-border hover:border-business-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx("svg",{className:"w-6 h-6 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),e.jsx("button",{onClick:T,className:"w-16 h-16 rounded-full bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-700 hover:to-primary-600 shadow-glow transition-all",children:g?e.jsx("svg",{className:"w-8 h-8 mx-auto text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):e.jsx("svg",{className:"w-8 h-8 mx-auto text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx("button",{onClick:()=>h(Math.min(n.length-1,i+1)),disabled:i===n.length-1,className:"w-12 h-12 rounded-full bg-business-surface border border-business-border hover:border-business-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx("svg",{className:"w-6 h-6 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),e.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:F,className:"flex-grow h-2 bg-business-dark rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #00d9ff 0%, #00d9ff ${b}%, #1e2a52 ${b}%, #1e2a52 100%)`}}),e.jsxs("span",{className:"text-sm text-business-text-dim w-12 text-right",children:[b,"%"]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-bold mb-3",children:"ðŸ“š Biblioteka"}),e.jsx("div",{className:"space-y-2",children:n.map((s,r)=>e.jsx("button",{onClick:()=>h(r),className:`w-full text-left p-3 rounded-lg transition-all ${i===r?"bg-primary-600/20 border border-primary-600":"bg-business-dark border border-business-border hover:border-business-accent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"font-medium text-sm",children:s.title}),e.jsx("div",{className:"text-xs text-business-text-dim",children:s.artist})]}),e.jsx("div",{className:"text-xs text-business-text-dim",children:s.duration})]})},r))})]}),e.jsx("audio",{ref:o,src:n[i].src,onEnded:()=>{p(!1),i<n.length-1&&h(i+1)}}),e.jsx("div",{className:"mt-6 p-4 bg-business-dark border border-business-border rounded-lg",children:e.jsxs("p",{className:"text-xs text-business-text-dim",children:["ðŸ’¡ ",e.jsx("strong",{children:"Dla developerÃ³w:"})," Dodaj pliki MP3 do ",e.jsx("code",{className:"bg-business-surface px-2 py-1 rounded",children:"/public/music/"}),"i zaktualizuj Å›cieÅ¼ki w ",e.jsx("code",{className:"bg-business-surface px-2 py-1 rounded",children:"tracks.src"})]})})]})};export{H as default};
