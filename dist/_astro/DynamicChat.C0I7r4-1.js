import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{o as $}from"./index-client.CI4zVHyS.js";import{au as C,av as U,g as a,O as Y,aw as J,h as m,ax as W,a7 as q,ay as G,az as K,aA as F,at as H,aB as Q,p as V,f as A,s as P,c as d,t as M,a as j,b as k,d as X,r as l,e as Z,u as D,ai as ee}from"./template.BqTI6ysn.js";import{e as R,s as B}from"./render.DLtPj5hE.js";import{i as ae}from"./if.CL3_9eW_.js";import{e as re,i as te}from"./each.BgQDu70D.js";import{s as L}from"./class.Cwo7PGLY.js";import{b as se}from"./input.BDyfk_mK.js";import{i as ie}from"./lifecycle.CZxN27Pe.js";import{c as ne}from"./store.C20eorhD.js";import{l as oe}from"./index.DIeogL5L.js";/* empty css                           */import"./attributes.BJtm3mOD.js";function de(t,v,f,s){var i=!oe||(f&K)!==0,g=(f&F)!==0,c=s,_=!0,w=()=>(_&&(_=!1,c=s),c),y;{var E=H in t||Q in t;y=C(t,v)?.set??(E&&v in t?e=>t[v]=e:void 0)}var I,h=!1;[I,h]=ne(()=>t[v]);var u;if(i?u=()=>{var e=t[v];return e===void 0?w():(_=!0,e)}:u=()=>{var e=t[v];return e!==void 0&&(c=void 0),e===void 0?c:e},i&&(f&U)===0)return u;if(y){var T=t.$$legacy;return(function(e,b){return arguments.length>0?((!i||!b||T||h)&&y(b?u():e),e):u()})}var S=!1,p=Y(()=>(S=!1,u()));a(p);var O=q;return(function(e,b){if(arguments.length>0){const r=b?a(p):i&&g?J(e):e;return m(p,r),S=!0,c!==void 0&&(c=r),e}return W&&S||(O.f&G)!==0?p.v:a(p)})}var le=A('<div><div><div class="message-text text-primary-foreground whitespace-pre-wrap"> </div></div></div>'),ve=A('<div class="message assistant-message svelte-1s7eeir"><div class="message-content bg-cyan-600/20 border-cyan-400/30 rounded-lg p-3 svelte-1s7eeir"><div class="message-text text-primary-foreground">AI pisze odpowiedź...</div></div></div>'),fe=A('<div class="chat-container border border-edge rounded-lg overflow-hidden mt-8" style="background: rgba(0, 0, 0, 0.5);"><div class="chat-header border-b border-edge p-4 flex items-center justify-between" style="background: rgba(0, 0, 0, 0.3);"><div class="flex items-center gap-3"><div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div> <span class="text-primary-foreground font-semibold"> </span></div></div> <div class="chat-messages h-96 overflow-y-auto p-4 space-y-4"><!> <!></div> <div class="chat-input border-t border-edge p-4"><div class="flex gap-3"><textarea rows="2" placeholder="Napisz swoją wiadomość..." class="flex-1 p-3 border border-edge rounded-lg text-primary-foreground placeholder-gray-400 focus:border-cyan-400 focus:outline-none resize-none" style="background: rgba(0, 0, 0, 0.5);"></textarea> <button class="bg-cyan-600 hover:bg-cyan-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 disabled:opacity-50">Wyślij</button></div></div></div>');function Oe(t,v){V(v,!1);let f=de(v,"agent",8),s=j([]),i=j(""),g=j(!1);$(()=>{m(s,[{from:"assistant",text:f().prompt||"Witaj! Jestem gotowy do rozmowy."}])});async function c(){if(!a(i).trim()||a(g))return;const r={from:"user",text:a(i)};m(s,[...a(s),r]);const n=a(i);m(i,""),m(g,!0);try{const o=await fetch("/api/generic-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:n,system_prompt:f().prompt,model:f().model})});if(!o.ok)throw new Error(`Błąd serwera: ${o.statusText}`);const z={from:"assistant",text:(await o.json()).answer};m(s,[...a(s),z])}catch(o){const x={from:"assistant",text:`Przepraszam, wystąpił błąd: ${o.message}`};m(s,[...a(s),x])}finally{m(g,!1)}}ie();var _=fe(),w=d(_),y=d(w),E=P(d(y),2),I=d(E,!0);l(E),l(y),l(w);var h=P(w,2),u=d(h);re(u,1,()=>a(s),te,(r,n)=>{var o=le(),x=d(o),z=d(x),N=d(z,!0);l(z),l(x),l(o),M(()=>{L(o,1,`message ${a(n),D(()=>a(n).from)??""}-message`,"svelte-1s7eeir"),L(x,1,`message-content ${a(n),D(()=>a(n).from==="user"?"bg-blue-600/20 border-blue-400/30":"bg-cyan-600/20 border-cyan-400/30")??""} rounded-lg p-3`,"svelte-1s7eeir"),B(N,(a(n),D(()=>a(n).text)))}),k(r,o)});var T=P(u,2);{var S=r=>{var n=ve();k(r,n)};ae(T,r=>{a(g)&&r(S)})}l(h);var p=P(h,2),O=d(p),e=d(O);Z(e);var b=P(e,2);l(O),l(p),l(_),M(()=>{B(I,(ee(f()),D(()=>f().name))),e.disabled=a(g),b.disabled=a(g)}),se(e,()=>a(i),r=>m(i,r)),R("keydown",e,r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),c())}),R("click",b,c),k(t,_),X()}export{Oe as default};
