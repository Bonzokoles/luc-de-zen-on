import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{o as Ut}from"./index-client.CI4zVHyS.js";import{p as jt,g as t,a as z,f as b,s as o,c as a,t as w,b as u,d as At,h,r as e,n as q,q as qt,k as nt}from"./template.BqTI6ysn.js";import{s as f,e as M}from"./render.DLtPj5hE.js";import{i as k}from"./if.CL3_9eW_.js";import{e as Ot,i as Et}from"./each.BgQDu70D.js";import{s as V}from"./class.Cwo7PGLY.js";import{s as Ft}from"./style.eybEfuFE.js";import{i as Lt}from"./lifecycle.CZxN27Pe.js";/* empty css                                   */import"./index.DIeogL5L.js";import"./attributes.BJtm3mOD.js";var Bt=b(`<span class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </span>`),Dt=b(`<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Online</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-yellow-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Partial</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-red-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Offline</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Total Req/min</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Avg Response</div></div></div>`),Zt=b(`<div class="mb-6"><div class="flex justify-between text-sm mb-2"><span class="text-[#a0a0a0] font-['Kenyan_Coffee']">OgÃ³lny Stan Systemu</span> <span class="text-[#00ffff] font-['Neuropol']"> </span></div> <div class="w-full bg-[#333333] h-2 border border-[#555555]"><div></div></div></div>`),Gt=b(`<div class="mb-4 p-3 bg-red-500/10 border border-red-500/30 text-red-400"><div class="font-['Neuropol'] uppercase text-sm">Error</div> <div class="font-['Kenyan_Coffee'] text-sm"> </div></div>`),Jt=b(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Trwa sprawdzanie statusu workerÃ³w...</span>`),Qt=b('- System Health: <span class="text-[#00ffff]"> </span>',1),Vt=b(`<span class="text-[#e0e0e0] font-['Kenyan_Coffee']"><span class="text-green-400"> </span> / <span class="text-[#00ffff]"> </span> workerÃ³w
        online <!></span>`),Xt=b(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Brak danych o workerach</span>`),Yt=b(`<tr class="border-b border-[#333333]/50 hover:bg-[#111111] transition-colors duration-200"><td class="px-4 py-3"><div class="text-[#e0e0e0] font-['Kenyan_Coffee'] font-medium"> </div> <div class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </div></td><td class="px-4 py-3"><span> </span></td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#a0a0a0] font-['Kenyan_Coffee'] text-sm"> </td></tr>`),te=b(`<div class="w-full bg-[#111111] border border-[#333333] glass-effect p-6 svelte-9s5lrx"><div class="flex items-center justify-between mb-6"><div><h2 class="text-2xl font-bold text-[#00ffff] font-['Neuropol'] uppercase tracking-wider">ðŸ”§ Status WorkerÃ³w</h2> <p class="text-[#a0a0a0] font-['Kenyan_Coffee'] mt-1">Zaawansowany monitoring systemu AI funkcji w czasie rzeczywistym</p></div> <div class="flex items-center gap-3"><button> </button> <!></div></div> <!> <!> <div class="flex flex-wrap gap-3 mb-6"><button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm disabled:opacity-50"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm">ðŸ”§ API Status</button></div> <!> <div class="mb-4"><!></div> <div class="overflow-x-auto border border-[#333333]"><table class="min-w-full bg-[#0a0a0a]"><thead><tr class="border-b border-[#333333]"><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Nazwa Workera</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Status</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">CPU</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">RAM</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Req/min</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Response</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Uptime</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Last Check</th></tr></thead><tbody></tbody></table></div> <div class="mt-6 flex flex-col gap-3"><button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide disabled:opacity-50"> </button> <button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide"> </button></div> <!></div>`);function ue(lt,it){jt(it,!1);let R=z([]),n=z({}),N=z(!1),C=z(!1),O=z(null),K=z(!0),$;function dt(r){switch(r){case"online":return"text-green-400";case"partial":return"text-yellow-400";case"offline":return"text-red-400";default:return"text-gray-400"}}function vt(r){switch(r){case"online":return"bg-green-500/20 border-green-500/30";case"partial":return"bg-yellow-500/20 border-yellow-500/30";case"offline":return"bg-red-500/20 border-red-500/30";default:return"bg-gray-500/20 border-gray-500/30"}}async function W(){h(N,!0),h(O,null);try{console.log("ðŸ”„ Fetching workers status...");const r=await fetch("/api/workers-status");if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const s=await r.json();if(s.success)h(R,s.workers),h(n,s.metrics),console.log("âœ… Workers status fetched successfully",{workers:t(R).length,metrics:t(n)});else throw new Error(s.error||"Failed to fetch workers status")}catch(r){h(O,r.message),console.error("âŒ Error fetching workers status:",r)}finally{h(N,!1)}}function pt(){h(K,!t(K)),t(K)?$=setInterval(W,3e4):clearInterval($)}function X(r){return new Date(r).toLocaleTimeString("pl-PL")}function ct(r){return r||"0%"}Ut(()=>(W(),t(K)&&($=setInterval(W,3e4)),()=>{$&&clearInterval($)})),Lt();var F=te(),L=a(F),Y=o(a(L),2),T=a(Y);let tt;var ut=a(T);e(T);var xt=o(T,2);{var bt=r=>{var s=Bt(),l=a(s);e(s),w(i=>f(l,`Last: ${i??""}`),[()=>X(t(n).lastUpdate)]),u(r,s)};k(xt,r=>{t(n).lastUpdate&&r(bt)})}e(Y),e(L);var et=o(L,2);{var _t=r=>{var s=Dt(),l=a(s),i=a(l),_=a(i,!0);e(i),q(2),e(l);var d=o(l,2),v=a(d),x=a(v,!0);e(v),q(2),e(d);var c=o(d,2),p=a(c),U=a(p,!0);e(p),q(2),e(c);var m=o(c,2),H=a(m),g=a(H,!0);e(H),q(2),e(m);var S=o(m,2),y=a(S),j=a(y);e(y),q(2),e(S),e(s),w(()=>{f(_,t(n).onlineWorkers),f(x,t(n).partialWorkers),f(U,t(n).offlineWorkers),f(g,t(n).totalRequests),f(j,`${t(n).avgResponseTime??""}ms`)}),u(r,s)};k(et,r=>{t(n).totalWorkers&&r(_t)})}var at=o(et,2);{var mt=r=>{var s=Zt(),l=a(s),i=o(a(l),2),_=a(i);e(i),e(l);var d=o(l,2),v=a(d);let x;e(d),e(s),w((c,p)=>{f(_,`${c??""}%`),x=V(v,1,"h-full transition-all duration-500",null,x,p),Ft(v,`width: ${t(n).systemHealth??""}%`)},[()=>Math.round(t(n).systemHealth),()=>({"bg-green-500":t(n).systemHealth>=80,"bg-yellow-500":t(n).systemHealth>=50&&t(n).systemHealth<80,"bg-red-500":t(n).systemHealth<50})]),u(r,s)};k(at,r=>{t(n).systemHealth!==void 0&&r(mt)})}var B=o(at,2),I=a(B),gt=a(I,!0);e(I);var E=o(I,2),yt=a(E,!0);e(E);var ht=o(E,2);e(B);var rt=o(B,2);{var wt=r=>{var s=Gt(),l=o(a(s),2),i=a(l,!0);e(l),e(s),w(()=>f(i,t(O))),u(r,s)};k(rt,r=>{t(O)&&r(wt)})}var D=o(rt,2),kt=a(D);{var Nt=r=>{var s=Jt();u(r,s)},Ct=r=>{var s=qt(),l=nt(s);{var i=d=>{var v=Vt(),x=a(v),c=a(x,!0);e(x);var p=o(x,2),U=a(p,!0);e(p);var m=o(p,2);{var H=g=>{var S=Qt(),y=o(nt(S)),j=a(y);e(y),w(A=>f(j,`${A??""}%`),[()=>Math.round(t(n).systemHealth)]),u(g,S)};k(m,g=>{t(n).systemHealth&&g(H)})}e(v),w(()=>{f(c,t(n).onlineWorkers),f(U,t(n).totalWorkers)}),u(d,v)},_=d=>{var v=Xt();u(d,v)};k(l,d=>{t(R).length>0?d(i):d(_,!1)},!0)}u(r,s)};k(kt,r=>{t(N)?r(Nt):r(Ct,!1)})}e(D);var Z=o(D,2),st=a(Z),ot=o(a(st));Ot(ot,5,()=>t(R),Et,(r,s)=>{var l=Yt(),i=a(l),_=a(i),d=a(_,!0);e(_);var v=o(_,2),x=a(v,!0);e(v),e(i);var c=o(i),p=a(c),U=a(p,!0);e(p),e(c);var m=o(c),H=a(m,!0);e(m);var g=o(m),S=a(g,!0);e(g);var y=o(g),j=a(y,!0);e(y);var A=o(y),zt=a(A,!0);e(A);var Q=o(A),Mt=a(Q,!0);e(Q);var ft=o(Q),Rt=a(ft,!0);e(ft),e(l),w(($t,Tt,It,Pt)=>{f(d,t(s).name),f(x,t(s).endpoint),V(p,1,`px-2 py-1 text-xs font-['Neuropol'] uppercase border ${$t??""} ${Tt??""}`,"svelte-9s5lrx"),f(U,t(s).status),f(H,t(s).cpu!==null?t(s).cpu+"%":"-"),f(S,t(s).ram!==null?t(s).ram+"%":"-"),f(j,t(s).requests||0),f(zt,t(s).responseMs!==null?t(s).responseMs+"ms":"-"),f(Mt,It),f(Rt,Pt)},[()=>vt(t(s).status),()=>dt(t(s).status),()=>ct(t(s).uptime),()=>t(s).lastCheck?X(t(s).lastCheck):"-"]),u(r,l)}),e(ot),e(st),e(Z);var G=o(Z,2),P=a(G),Kt=a(P,!0);e(P);var J=o(P,2),St=a(J);e(J),e(G);var Wt=o(G,2);{var Ht=r=>{};k(Wt,r=>{t(C)&&t(R).length>0&&r(Ht)})}e(F),w(r=>{tt=V(T,1,"px-3 py-1 text-xs font-['Neuropol'] uppercase border transition-all duration-300 svelte-9s5lrx",null,tt,r),f(ut,`Auto: ${t(K)?"ON":"OFF"}`),I.disabled=t(N),f(gt,t(N)?"Sprawdzanie...":"ðŸ” Health Check"),f(yt,t(C)?"Ukryj Monitoring":"ðŸ“Š PokaÅ¼ Monitoring"),P.disabled=t(N),f(Kt,t(N)?"Sprawdzanie...":"SprawdÅº Wszystkie Workery"),f(St,`${t(C)?"Ukryj":"PokaÅ¼"} SzczegÃ³Å‚owy Monitor`)},[()=>({"auto-refresh-active":t(K),"auto-refresh-inactive":!t(K)})]),M("click",T,pt),M("click",I,W),M("click",E,()=>h(C,!t(C))),M("click",ht,W),M("click",P,W),M("click",J,()=>h(C,!t(C))),u(lt,F),At()}export{ue as default};
