import{p as jt,H as At,g as t,d as T,i as It,f as h,s as o,c as a,a as N,A as Ut,t as M,z as Y,x as n,h as P,j as b,k as Ft,v as C,n as e,B as Ot,u as F,F as Et,G as Lt,y as it}from"./Header.astro_astro_type_script_index_0_lang.AXIbBUBV.js";/* empty css                                    */import"./react.CU-GxeNQ.js";if(typeof MessageChannel>"u"){class O{constructor(){this.onmessage=null}postMessage(f){const i={data:f};(typeof queueMicrotask=="function"?queueMicrotask:u=>setTimeout(u,0))(()=>this.onmessage&&this.onmessage(i))}start(){}close(){}}class L{constructor(){this.port1=new O,this.port2=new O;const f=(i,u)=>{const H={data:u};(typeof queueMicrotask=="function"?queueMicrotask:g=>setTimeout(g,0))(()=>i.onmessage&&i.onmessage(H))};this.port1.postMessage=i=>f(this.port2,i),this.port2.postMessage=i=>f(this.port1,i)}}globalThis.MessageChannel=L}var Bt=h(`<span class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </span>`),Dt=h(`<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Online</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-yellow-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Partial</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-red-400 font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Offline</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Total Req/min</div></div> <div class="p-3 bg-[#0a0a0a] border border-[#333333] text-center"><div class="text-lg font-bold text-[#00ffff] font-['Neuropol']"> </div> <div class="text-xs text-[#a0a0a0] uppercase">Avg Response</div></div></div>`),Gt=h(`<div class="mb-6"><div class="flex justify-between text-sm mb-2"><span class="text-[#a0a0a0] font-['Kenyan_Coffee']">OgÃ³lny Stan Systemu</span> <span class="text-[#00ffff] font-['Neuropol']"> </span></div> <div class="w-full bg-[#333333] h-2 border border-[#555555]"><div></div></div></div>`),Zt=h(`<div class="mb-4 p-3 bg-red-500/10 border border-red-500/30 text-red-400"><div class="font-['Neuropol'] uppercase text-sm">Error</div> <div class="font-['Kenyan_Coffee'] text-sm"> </div></div>`),Jt=h(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Trwa sprawdzanie statusu workerÃ³w...</span>`),Qt=h('- System Health: <span class="text-[#00ffff]"> </span>',1),Vt=h(`<span class="text-[#e0e0e0] font-['Kenyan_Coffee']"><span class="text-green-400"> </span> / <span class="text-[#00ffff]"> </span> workerÃ³w
        online <!></span>`),Xt=h(`<span class="text-[#a0a0a0] font-['Kenyan_Coffee']">Brak danych o workerach</span>`),Yt=h(`<tr class="border-b border-[#333333]/50 hover:bg-[#111111] transition-colors duration-200"><td class="px-4 py-3"><div class="text-[#e0e0e0] font-['Kenyan_Coffee'] font-medium"> </div> <div class="text-xs text-[#666666] font-['Kenyan_Coffee']"> </div></td><td class="px-4 py-3"><span> </span></td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#e0e0e0] font-['Kenyan_Coffee']"> </td><td class="px-4 py-3 text-[#a0a0a0] font-['Kenyan_Coffee'] text-sm"> </td></tr>`),te=h(`<div class="w-full bg-[#111111] border border-[#333333] glass-effect p-6 svelte-9s5lrx"><div class="flex items-center justify-between mb-6"><div><h2 class="text-2xl font-bold text-[#00ffff] font-['Neuropol'] uppercase tracking-wider">ðŸ”§ Status WorkerÃ³w</h2> <p class="text-[#a0a0a0] font-['Kenyan_Coffee'] mt-1">Zaawansowany monitoring systemu AI funkcji w czasie rzeczywistym</p></div> <div class="flex items-center gap-3"><button> </button> <!></div></div> <!> <!> <div class="flex flex-wrap gap-3 mb-6"><button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm disabled:opacity-50"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm"> </button> <button class="px-4 py-2 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase text-sm">ðŸ”§ API Status</button></div> <!> <div class="mb-4"><!></div> <div class="overflow-x-auto border border-[#333333]"><table class="min-w-full bg-[#0a0a0a]"><thead><tr class="border-b border-[#333333]"><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Nazwa Workera</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Status</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">CPU</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">RAM</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Req/min</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Response</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Uptime</th><th class="px-4 py-3 text-left text-[#00ffff] font-['Neuropol'] uppercase text-sm">Last Check</th></tr></thead><tbody></tbody></table></div> <div class="mt-6 flex flex-col gap-3"><button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide disabled:opacity-50"> </button> <button class="w-full p-3 bg-[#00ffff]/10 border border-[#00ffff]/30 text-[#00ffff] hover:bg-[#00ffff]/20 transition-all duration-300 font-['Neuropol'] uppercase tracking-wide"> </button></div> <!></div>`);function re(O,L){jt(L,!1);let K=T([]),f=T({}),i=T(!1),u=T(!1),H=T(null),g=T(!0),R;function dt(s){switch(s){case"online":return"text-green-400";case"partial":return"text-yellow-400";case"offline":return"text-red-400";default:return"text-gray-400"}}function vt(s){switch(s){case"online":return"bg-green-500/20 border-green-500/30";case"partial":return"bg-yellow-500/20 border-yellow-500/30";case"offline":return"bg-red-500/20 border-red-500/30";default:return"bg-gray-500/20 border-gray-500/30"}}async function W(){C(i,!0),C(H,null);try{console.log("ðŸ”„ Fetching workers status...");const s=await fetch("/api/workers-status");if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const r=await s.json();if(r.success)C(K,r.workers),C(f,r.metrics),console.log("âœ… Workers status fetched successfully",{workers:t(K).length,metrics:t(f)});else throw new Error(r.error||"Failed to fetch workers status")}catch(s){C(H,s.message),console.error("âŒ Error fetching workers status:",s)}finally{C(i,!1)}}function pt(){C(g,!t(g)),t(g)?R=setInterval(W,3e4):clearInterval(R)}function tt(s){return new Date(s).toLocaleTimeString("pl-PL")}function ct(s){return s||"0%"}At(()=>(W(),t(g)&&(R=setInterval(W,3e4)),()=>{R&&clearInterval(R)})),It();var B=te(),D=a(B),et=o(a(D),2),$=a(et);let at;var ut=a($);e($);var xt=o($,2);{var bt=s=>{var r=Bt(),l=a(r);e(r),M(d=>n(l,`Last: ${d??""}`),[()=>tt(t(f).lastUpdate)]),b(s,r)};N(xt,s=>{t(f).lastUpdate&&s(bt)})}e(et),e(D);var st=o(D,2);{var _t=s=>{var r=Dt(),l=a(r),d=a(l),y=a(d,!0);e(d),F(2),e(l);var v=o(l,2),p=a(v),_=a(p,!0);e(p),F(2),e(v);var x=o(v,2),c=a(x),A=a(c,!0);e(c),F(2),e(x);var m=o(x,2),z=a(m),w=a(z,!0);e(z),F(2),e(m);var S=o(m,2),k=a(S),I=a(k);e(k),F(2),e(S),e(r),M(()=>{n(y,t(f).onlineWorkers),n(_,t(f).partialWorkers),n(A,t(f).offlineWorkers),n(w,t(f).totalRequests),n(I,`${t(f).avgResponseTime??""}ms`)}),b(s,r)};N(st,s=>{t(f).totalWorkers&&s(_t)})}var rt=o(st,2);{var ht=s=>{var r=Gt(),l=a(r),d=o(a(l),2),y=a(d);e(d),e(l);var v=o(l,2),p=a(v);let _;e(v),e(r),M((x,c)=>{n(y,`${x??""}%`),_=Y(p,1,"h-full transition-all duration-500",null,_,c),Et(p,`width: ${t(f).systemHealth??""}%`)},[()=>Math.round(t(f).systemHealth),()=>({"bg-green-500":t(f).systemHealth>=80,"bg-yellow-500":t(f).systemHealth>=50&&t(f).systemHealth<80,"bg-red-500":t(f).systemHealth<50})]),b(s,r)};N(rt,s=>{t(f).systemHealth!==void 0&&s(ht)})}var G=o(rt,2),q=a(G),gt=a(q,!0);e(q);var E=o(q,2),yt=a(E,!0);e(E);var mt=o(E,2);e(G);var ot=o(G,2);{var wt=s=>{var r=Zt(),l=o(a(r),2),d=a(l,!0);e(l),e(r),M(()=>n(d,t(H))),b(s,r)};N(ot,s=>{t(H)&&s(wt)})}var Z=o(ot,2),kt=a(Z);{var Ct=s=>{var r=Jt();b(s,r)},Nt=s=>{var r=Lt(),l=it(r);{var d=v=>{var p=Vt(),_=a(p),x=a(_,!0);e(_);var c=o(_,2),A=a(c,!0);e(c);var m=o(c,2);{var z=w=>{var S=Qt(),k=o(it(S)),I=a(k);e(k),M(U=>n(I,`${U??""}%`),[()=>Math.round(t(f).systemHealth)]),b(w,S)};N(m,w=>{t(f).systemHealth&&w(z)})}e(p),M(()=>{n(x,t(f).onlineWorkers),n(A,t(f).totalWorkers)}),b(v,p)},y=v=>{var p=Xt();b(v,p)};N(l,v=>{t(K).length>0?v(d):v(y,!1)},!0)}b(s,r)};N(kt,s=>{t(i)?s(Ct):s(Nt,!1)})}e(Z);var J=o(Z,2),ft=a(J),nt=o(a(ft));Ut(nt,5,()=>t(K),Ot,(s,r)=>{var l=Yt(),d=a(l),y=a(d),v=a(y,!0);e(y);var p=o(y,2),_=a(p,!0);e(p),e(d);var x=o(d),c=a(x),A=a(c,!0);e(c),e(x);var m=o(x),z=a(m,!0);e(m);var w=o(m),S=a(w,!0);e(w);var k=o(w),I=a(k,!0);e(k);var U=o(k),Wt=a(U,!0);e(U);var X=o(U),zt=a(X,!0);e(X);var lt=o(X),Tt=a(lt,!0);e(lt),e(l),M((Pt,Rt,$t,qt)=>{n(v,t(r).name),n(_,t(r).endpoint),Y(c,1,`px-2 py-1 text-xs font-['Neuropol'] uppercase border ${Pt??""} ${Rt??""}`,"svelte-9s5lrx"),n(A,t(r).status),n(z,t(r).cpu!==null?t(r).cpu+"%":"-"),n(S,t(r).ram!==null?t(r).ram+"%":"-"),n(I,t(r).requests||0),n(Wt,t(r).responseMs!==null?t(r).responseMs+"ms":"-"),n(zt,$t),n(Tt,qt)},[()=>vt(t(r).status),()=>dt(t(r).status),()=>ct(t(r).uptime),()=>t(r).lastCheck?tt(t(r).lastCheck):"-"]),b(s,l)}),e(nt),e(ft),e(J);var Q=o(J,2),j=a(Q),Mt=a(j,!0);e(j);var V=o(j,2),Kt=a(V);e(V),e(Q);var St=o(Q,2);{var Ht=s=>{};N(St,s=>{t(u)&&t(K).length>0&&s(Ht)})}e(B),M(s=>{at=Y($,1,"px-3 py-1 text-xs font-['Neuropol'] uppercase border transition-all duration-300 svelte-9s5lrx",null,at,s),n(ut,`Auto: ${t(g)?"ON":"OFF"}`),q.disabled=t(i),n(gt,t(i)?"Sprawdzanie...":"ðŸ” Health Check"),n(yt,t(u)?"Ukryj Monitoring":"ðŸ“Š PokaÅ¼ Monitoring"),j.disabled=t(i),n(Mt,t(i)?"Sprawdzanie...":"SprawdÅº Wszystkie Workery"),n(Kt,`${t(u)?"Ukryj":"PokaÅ¼"} SzczegÃ³Å‚owy Monitor`)},[()=>({"auto-refresh-active":t(g),"auto-refresh-inactive":!t(g)})]),P("click",$,pt),P("click",q,W),P("click",E,()=>C(u,!t(u))),P("click",mt,W),P("click",j,W),P("click",V,()=>C(u,!t(u))),b(O,B),Ft()}export{re as default};
