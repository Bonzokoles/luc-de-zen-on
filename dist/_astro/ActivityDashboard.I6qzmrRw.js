import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{o as $e}from"./index-client.CI4zVHyS.js";import{p as Ce,f as x,s,c as e,t as y,h as p,g as r,a as w,b as v,d as De,i as He,r as t,n as z,q as ne,k as le,j as Ke}from"./template.BqTI6ysn.js";import{e as ce,s as i}from"./render.DLtPj5hE.js";import{i as _}from"./if.CL3_9eW_.js";import{e as Re}from"./each.BgQDu70D.js";import{s as pe}from"./class.Cwo7PGLY.js";import{b as Fe}from"./select.CpkoEXAE.js";import{i as Je}from"./lifecycle.CZxN27Pe.js";/* empty css                                     */import"./index.DIeogL5L.js";import"./attributes.BJtm3mOD.js";var Pe=x('<div class="mb-6 p-4 bg-red-900/20 border border-red-500/50 rounded-lg"><div class="flex items-center space-x-2"><span class="text-red-400 text-xl">üö®</span> <span class="font-semibold text-red-400">ANOMALIE WYKRYTE</span></div> <p class="text-red-300 mt-2">Wykryto nietypowƒÖ liczbƒô b≈Çƒôd√≥w w systemie. Sprawd≈∫ logi poni≈ºej.</p></div>'),Ue=x('<div class="mb-6 p-4 bg-red-900/20 border border-red-500/50 rounded-lg"><p class="text-red-300"> </p></div>'),Ge=x('<div class="text-center py-8"><div class="animate-spin w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4"></div> <p class="text-gray-400">≈Åadowanie log√≥w...</p></div>'),Qe=x('<div class="text-center py-8"><p class="text-gray-400">Brak log√≥w do wy≈õwietlenia</p></div>'),Ve=x('<div class="mt-3 p-2 bg-gray-800/50 rounded text-xs"><div class="text-gray-400 mb-1">Szczeg√≥≈Çy:</div> <pre class="text-cyan-200 whitespace-pre-wrap"> </pre></div>'),Xe=x('<div class="bg-gray-900/30 border border-gray-700/50 rounded-lg p-4 hover:border-cyan-500/50 transition-colors"><div class="flex items-start justify-between"><div class="flex items-center space-x-3"><span class="text-lg"> </span> <div><div class="flex items-center space-x-2"><span> </span> <span class="text-xs bg-gray-700 px-2 py-1 rounded text-gray-300"> </span></div> <div class="text-sm text-gray-400 mt-1"> <!></div></div></div> <div> </div></div> <!></div>'),Ze=x('<div class="bg-black/80 backdrop-blur-sm border border-cyan-500/30 rounded-xl p-6 text-cyan-300 max-h-[800px] overflow-hidden"><div class="flex items-center justify-between mb-6"><div class="flex items-center space-x-3"><div class="w-3 h-3 bg-cyan-400 rounded-full animate-pulse"></div> <h2 class="text-2xl font-bold text-cyan-400">MONITOR AKTYWNO≈öCI</h2></div> <div class="flex items-center space-x-4"><select class="bg-gray-900 border border-cyan-500/50 rounded px-3 py-1 text-cyan-300 focus:border-cyan-400 focus:outline-none"><option>Wszystkie</option><option>Info</option><option>Ostrze≈ºenia</option><option>B≈Çƒôdy</option></select> <button class="px-4 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded text-sm font-semibold transition-colors"> </button></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"><div class="bg-gray-900/50 border border-cyan-500/20 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-cyan-400"> </div> <div class="text-sm text-gray-400">≈ÅƒÖcznie</div></div> <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-red-400"> </div> <div class="text-sm text-gray-400">B≈Çƒôdy</div></div> <div class="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-yellow-400"> </div> <div class="text-sm text-gray-400">Ostrze≈ºenia</div></div> <div class="bg-cyan-900/20 border border-cyan-500/30 rounded-lg p-4 text-center"><div class="text-2xl font-bold text-cyan-400"> </div> <div class="text-sm text-gray-400">Ostatnia godzina</div></div></div> <!> <!> <div class="space-y-3 max-h-96 overflow-y-auto custom-scrollbar svelte-q35g7j"><!></div></div>');function xt(xe,ue){Ce(ue,!1);let T=w([]),u=w({total:0,errors:0,warnings:0,info:0,lastHour:0,sources:[],anomalies:!1}),b=w(!0),h=w(""),f=w("all"),N;const P={info:"text-cyan-400",warning:"text-yellow-400",error:"text-red-400"};async function O(){try{p(b,!0);const a=r(f)==="all"?"/api/activity-monitor":`/api/activity-monitor?type=${r(f)}`,n=await(await fetch(a)).json();n.success?(p(T,n.logs),p(u,n.stats)):p(h,n.message||"Failed to fetch logs")}catch(a){p(h,"Network error occurred"),console.error("Error fetching logs:",a)}finally{p(b,!1)}}function me(a){return new Date(a).toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function ye(a){switch(a){case"error":return"‚ö†Ô∏è";case"warning":return"‚ö°";case"info":return"‚ÑπÔ∏è";default:return"üìù"}}$e(()=>(O(),N=setInterval(O,3e4),()=>{N&&clearInterval(N)})),Je();var q=Ze(),A=e(q),U=s(e(A),2),g=e(U);y(()=>{r(f),He(()=>{})});var L=e(g);L.value=L.__value="all";var S=s(L);S.value=S.__value="info";var W=s(S);W.value=W.__value="warning";var G=s(W);G.value=G.__value="error",t(g);var k=s(g,2),_e=e(k,!0);t(k),t(U),t(A);var B=s(A,2),E=e(B),Q=e(E),be=e(Q,!0);t(Q),z(2),t(E);var M=s(E,2),V=e(M),fe=e(V,!0);t(V),z(2),t(M);var Y=s(M,2),X=e(Y),ge=e(X,!0);t(X),z(2),t(Y);var Z=s(Y,2),ee=e(Z),we=e(ee,!0);t(ee),z(2),t(Z),t(B);var te=s(B,2);{var he=a=>{var o=Pe();v(a,o)};_(te,a=>{r(u).anomalies&&a(he)})}var re=s(te,2);{var Oe=a=>{var o=Ue(),n=e(o),$=e(n);t(n),t(o),y(()=>i($,`‚ùå ${r(h)??""}`)),v(a,o)};_(re,a=>{r(h)&&a(Oe)})}var ae=s(re,2),ke=e(ae);{var Ie=a=>{var o=Ge();v(a,o)},je=a=>{var o=ne(),n=le(o);{var $=m=>{var I=Qe();v(m,I)},ze=m=>{var I=ne(),Te=le(I);Re(Te,1,()=>r(T),C=>C.id,(C,d)=>{var D=Xe(),H=e(D),K=e(H),R=e(K),Ne=e(R,!0);t(R);var se=s(R,2),F=e(se),j=e(F),qe=e(j,!0);t(j);var ie=s(j,2),Ae=e(ie,!0);t(ie),t(F);var oe=s(F,2),de=e(oe),Le=s(de);{var Se=l=>{var c=Ke();y(()=>i(c,`‚Ä¢ User: ${r(d).userId??""}`)),v(l,c)};_(Le,l=>{r(d).userId&&l(Se)})}t(oe),t(se),t(K);var J=s(K,2),We=e(J,!0);t(J),t(H);var Be=s(H,2);{var Ee=l=>{var c=Ve(),ve=s(e(c),2),Me=e(ve,!0);t(ve),t(c),y(Ye=>i(Me,Ye),[()=>JSON.stringify(r(d).details,null,2)]),v(l,c)};_(Be,l=>{Object.keys(r(d).details).length>0&&l(Ee)})}t(D),y((l,c)=>{i(Ne,l),pe(j,1,`font-semibold ${P[r(d).type]??""}`,"svelte-q35g7j"),i(qe,r(d).action),i(Ae,r(d).source),i(de,`${c??""} `),pe(J,1,`text-xs ${P[r(d).type]??""} font-semibold uppercase`,"svelte-q35g7j"),i(We,r(d).type)},[()=>ye(r(d).type),()=>me(r(d).timestamp)]),v(C,D)}),v(m,I)};_(n,m=>{r(T).length===0?m($):m(ze,!1)},!0)}v(a,o)};_(ke,a=>{r(b)?a(Ie):a(je,!1)})}t(ae),t(q),y(()=>{k.disabled=r(b),i(_e,r(b)?"Od≈õwie≈ºanie...":"üîÑ Od≈õwie≈º"),i(be,r(u).total),i(fe,r(u).errors),i(ge,r(u).warnings),i(we,r(u).lastHour)}),Fe(g,()=>r(f),a=>p(f,a)),ce("change",g,O),ce("click",k,O),v(xe,q),De()}export{xt as default};
