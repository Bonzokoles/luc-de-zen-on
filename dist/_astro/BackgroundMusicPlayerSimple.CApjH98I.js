import{p as we,G as Me,g as e,e as m,v as l,m as h,i as Ce,t as L,P as Ae,c as n,s as u,b as ne,a as ie,h as f,j as T,k as Se,n as i,x as P,l as Te,F as Y,y as Ie,Q as Ue,R as xe,z as Ee,B as De,A as Pe,C as Le}from"./Header.astro_astro_type_script_index_0_lang.C3v9REYp.js";/* empty css                       */import"./react.0nTXIzv_.js";if(typeof MessageChannel>"u"){class R{constructor(){this.onmessage=null}postMessage(v){const o={data:v};(typeof queueMicrotask=="function"?queueMicrotask:y=>setTimeout(y,0))(()=>this.onmessage&&this.onmessage(o))}start(){}close(){}}class ${constructor(){this.port1=new R,this.port2=new R;const v=(o,y)=>{const r={data:y};(typeof queueMicrotask=="function"?queueMicrotask:d=>setTimeout(d,0))(()=>o.onmessage&&o.onmessage(r))};this.port1.postMessage=o=>v(this.port2,o),this.port2.postMessage=o=>v(this.port1,o)}}globalThis.MessageChannel=$}var Re=L('<div class="panel-content svelte-1r14kfk"><div class="now-playing svelte-1r14kfk"><div class="track-info svelte-1r14kfk"><div class="track-name svelte-1r14kfk"> </div> <div class="track-time svelte-1r14kfk"> </div></div></div> <div class="player-controls svelte-1r14kfk"><button class="control-btn svelte-1r14kfk">â®</button> <button class="control-btn play-pause svelte-1r14kfk"> </button> <button class="control-btn svelte-1r14kfk">â­</button> <button class="control-btn svelte-1r14kfk">ğŸ“‹</button></div> <div class="volume-control svelte-1r14kfk"><span class="svelte-1r14kfk">ğŸ”Š</span> <input type="range" min="0" max="100" class="volume-slider svelte-1r14kfk"></div> <div class="progress-container svelte-1r14kfk"><div class="progress-bar svelte-1r14kfk" role="slider" tabindex="0" aria-label="Seek"><div class="progress-fill svelte-1r14kfk"></div></div></div></div>'),Ne=L('<div class="playlist-empty svelte-1r14kfk">No tracks loaded</div>'),Oe=L("<button> </button>"),Be=L('<div class="playlist-panel svelte-1r14kfk"><div class="playlist-header svelte-1r14kfk"><span>ğŸµ PLAYLIST</span> <button class="close-btn svelte-1r14kfk">Ã—</button></div> <div class="playlist-content svelte-1r14kfk"><!></div> <div class="playlist-actions svelte-1r14kfk"><input type="file" webkitdirectory multiple accept="audio/*" style="display: none;" id="music-folder"> <button class="action-btn svelte-1r14kfk">ğŸ“ Load Folder</button> <button class="action-btn svelte-1r14kfk">ğŸµ Demo Tracks</button></div></div>'),qe=L('<div class="background-music-player in-flow svelte-1r14kfk"><audio preload="metadata" crossorigin="anonymous"></audio> <div class="music-control-panel svelte-1r14kfk"><div class="panel-header svelte-1r14kfk"><span>ğŸµ MUSIC â€¢ POLACZEK</span> <button class="minimize-btn svelte-1r14kfk"> </button></div> <!></div> <!></div>');function Ke(R,$){we($,!1);let a=m(),v,o,y,r=m([]),d=m(0),g=m(!1),N=m(!1),b=m(.5),O=m(0),k=m(0),I=m(!1),H=m("No track selected");Me(()=>{B(),typeof window<"u"&&(delete window.MUSIC,window.MUSIC={play:()=>{e(g)||q()},pause:()=>{e(g)&&q()},toggle:()=>q(),next:()=>G(),prev:()=>le(),togglePlaylist:()=>ce(),setVolume:t=>{const s=Math.max(0,Math.min(1,Number(t)));l(b,s),e(a)&&h(a,e(a).volume=e(b))},getState:()=>({isPlaying:e(g),trackName:e(H),volume:e(b)}),ensureLoaded:()=>{e(r).length?U():B()},getAnalyser:()=>o||window.MUSIC_ANALYSER||null,openFolderPicker:()=>{try{const t=document.getElementById("music-folder");t&&typeof t.click=="function"&&t.click()}catch(t){console.warn("Folder picker not available:",t)}}},console.log("ğŸµ MUSIC API registered and ready"))});function re(){try{if(!e(a)||o)return;const t=window.AudioContext||window.webkitAudioContext;if(!t)return;v=window.MUSIC_AUDIO_CTX||new t,v.state==="suspended"&&v.resume().catch(()=>{}),window.MUSIC_MEDIA_SOURCE?y=window.MUSIC_MEDIA_SOURCE:(y=v.createMediaElementSource(e(a)),window.MUSIC_MEDIA_SOURCE=y),o=window.MUSIC_ANALYSER||v.createAnalyser(),o.fftSize=1024,o.smoothingTimeConstant=.85;try{y.connect(o),o.connect(v.destination)}catch{}window.MUSIC_AUDIO_CTX=v,window.MUSIC_ANALYSER=o,window.dispatchEvent(new CustomEvent("music-analyser-ready"));try{const s=window.MIC_AUDIO_CTX;s&&s.state==="suspended"&&s.resume().catch(()=>{})}catch{}}catch(t){console.warn("setupAnalyser failed",t)}}function B(){l(r,[{name:"MERKABA",url:"https://assets.codepen.io/7558/Merkaba.mp3"},{name:"DHAMIKA",url:"https://assets.codepen.io/7558/Dhamika.mp3"},{name:"VACANT",url:"https://assets.codepen.io/7558/Vacant.mp3"},{name:"LXSTNGHT",url:"https://assets.codepen.io/7558/lxstnght-back_1.mp3"}]),U()}function U(){e(r)[e(d)]&&(l(H,e(r)[e(d)].name),e(a)&&e(r)[e(d)].url&&(h(a,e(a).src=e(r)[e(d)].url),h(a,e(a).volume=e(b)),re()))}function q(){if(!e(r)[e(d)]){B();return}e(a).src||U(),e(g)?(e(a).pause(),l(g,!1)):(re(),e(a).play().then(()=>{l(g,!0);try{v&&v.state==="suspended"&&v.resume()}catch{}}).catch(console.error))}function j(t){t>=0&&t<e(r).length&&(l(d,t),U(),e(g)&&e(a).play())}function le(){e(r).length>0&&(l(d,(e(d)-1+e(r).length)%e(r).length),j(e(d)))}function G(){e(r).length>0&&(l(d,(e(d)+1)%e(r).length),j(e(d)))}function ue(){e(a)&&(l(O,e(a).currentTime),l(k,e(a).duration||0))}function de(){G()}function ve(t){l(b,t.target.value/100),e(a)&&h(a,e(a).volume=e(b))}function fe(t){if(e(a)&&e(k)){const s=t.currentTarget.getBoundingClientRect(),c=(t.clientX-s.left)/s.width;h(a,e(a).currentTime=c*e(k))}}function ke(t){if(!e(a)||!e(k))return;const s=5;t.key==="ArrowRight"?(h(a,e(a).currentTime=Math.min(e(k),e(a).currentTime+s)),t.preventDefault()):t.key==="ArrowLeft"?(h(a,e(a).currentTime=Math.max(0,e(a).currentTime-s)),t.preventDefault()):t.key==="Home"?(h(a,e(a).currentTime=0),t.preventDefault()):t.key==="End"?(h(a,e(a).currentTime=e(k)),t.preventDefault()):(t.key==="Enter"||t.key===" ")&&t.preventDefault()}function oe(t){const s=Math.floor(t/60),c=Math.floor(t%60);return`${s}:${c.toString().padStart(2,"0")}`}function pe(t){const s=Array.from(t.target.files).filter(c=>c.type.startsWith("audio/"));l(r,s.map(c=>({name:c.name.replace(/\.[^/.]+$/,""),file:c,url:URL.createObjectURL(c)}))),l(d,0),U(),l(I,!0)}function ce(){l(I,!e(I))}function me(){l(N,!e(N))}Ce();var Q=qe(),z=n(Q);Ae(z,t=>l(a,t),()=>e(a));var W=u(z,2),Z=n(W),J=u(n(Z),2),_e=n(J,!0);i(J),i(Z);var he=u(Z,2);{var ye=t=>{var s=Re(),c=n(s),F=n(c),w=n(F),ee=n(w,!0);i(w);var X=u(w,2),te=n(X);i(X),i(F),i(c);var A=u(c,2),x=n(A),M=u(x,2),ae=n(M,!0);i(M);var _=u(M,2),S=u(_,2);i(A);var E=u(A,2),D=u(n(E),2);Te(D),i(E);var K=u(E,2),p=n(K);Y(p,"aria-valuemin",0);var C=n(p);i(p),i(K),i(s),ie((V,se)=>{P(ee,e(H)),P(te,`${V??""} / ${se??""}`),P(ae,e(g)?"â¸":"â–¶"),Ue(D,e(b)*100),Y(p,"aria-valuemax",e(k)||0),Y(p,"aria-valuenow",e(O)||0),Y(C,"style",`width: ${(e(k)?e(O)/e(k)*100:0)??""}%`)},[()=>oe(e(O)),()=>oe(e(k))],Ie),f("click",x,le),f("click",M,q),f("click",_,G),f("click",S,ce),f("input",D,ve),f("click",p,fe),f("keydown",p,ke),T(t,s)};ne(he,t=>{e(N)||t(ye)})}i(W);var ge=u(W,2);{var be=t=>{var s=Be(),c=n(s),F=u(n(c),2);i(c);var w=u(c,2),ee=n(w);{var X=_=>{var S=Ne();T(_,S)},te=_=>{var S=xe(),E=Ee(S);De(E,1,()=>e(r),Le,(D,K,p)=>{var C=Oe();let V;var se=n(C,!0);i(C),ie(()=>{V=Pe(C,1,"playlist-item svelte-1r14kfk",null,V,{active:p===e(d)}),P(se,e(K).name)}),f("click",C,()=>j(p)),T(D,C)}),T(_,S)};ne(ee,_=>{e(r).length===0?_(X):_(te,!1)})}i(w);var A=u(w,2),x=n(A),M=u(x,2),ae=u(M,2);i(A),i(s),f("click",F,()=>l(I,!1)),f("change",x,pe),f("click",M,()=>document.getElementById("music-folder").click()),f("click",ae,B),T(t,s)};ne(ge,t=>{e(I)&&t(be)})}i(Q),ie(()=>P(_e,e(N)?"+":"âˆ’")),f("timeupdate",z,ue),f("ended",z,de),f("click",J,me),T(R,Q),Se()}export{Ke as default};
