import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{p as Zt,f as x,s as t,c as e,t as y,m as Z,g as s,a as j,b as p,d as $t,r as a,i as ht,e as qt,n as ct,h as l,j as Lt,k as Ft}from"./template.BqTI6ysn.js";import{e as $,s as u}from"./render.DLtPj5hE.js";import{i as f}from"./if.CL3_9eW_.js";import{e as Ht,i as Jt}from"./each.BgQDu70D.js";import{r as Rt}from"./attributes.CMoobVFc.js";import{s as Gt}from"./class.Cwo7PGLY.js";import{b as wt}from"./input.BDyfk_mK.js";import{b as zt}from"./select.CpkoEXAE.js";import{i as Mt}from"./lifecycle.CZxN27Pe.js";/* empty css                            */import"./index.DIeogL5L.js";import"./attributes.BJtm3mOD.js";var Qt=x('<div class="animate-spin rounded-full h-4 w-4 border-2 border-cyan-300 border-t-transparent svelte-s2lxog"></div> Tworzę ticket...',1),Vt=x('<div class="error-container svelte-s2lxog"><p class="error-text svelte-s2lxog"> </p></div>'),Xt=x('<div><p class="text-sm text-gray-400 mb-1">Przypisane do zespołu:</p> <p class="text-cyan-300 font-medium"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Priorytet:</p> <p> </p></div>',1),Yt=x('<div class="bg-gray-900 p-3 rounded-lg mb-3"><p class="text-sm text-gray-400 mb-1">Podsumowanie AI:</p> <p class="text-cyan-100"> </p></div>'),te=x('<div class="animate-spin rounded-full h-3 w-3 border-2 border-blue-300 border-t-transparent svelte-s2lxog"></div>'),ee=x('<div class="result-container svelte-s2lxog"><div class="result-header svelte-s2lxog"><h3 class="result-title svelte-s2lxog">✅ Zgłoszenie zostało utworzone</h3></div> <div class="result-content svelte-s2lxog"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><p class="text-sm text-gray-400 mb-1">Numer zgłoszenia:</p> <p class="font-mono text-cyan-300 font-bold"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Status:</p> <p class="text-green-400 font-medium">Utworzone</p></div> <!></div> <!> <div class="flex gap-2"><button class="bg-blue-700 hover:bg-blue-600 disabled:bg-gray-700 px-4 py-2 rounded text-sm transition-colors duration-200 flex items-center gap-2"><!> 📊 Sprawdź status</button> <button class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition-colors duration-200">📋 Kopiuj ID</button></div></div></div>'),ae=x('<div class="text-sm mb-2 last:mb-0"><span class="text-gray-400"> </span> <span class="text-cyan-100 ml-2"> </span></div>'),se=x('<div class="bg-gray-900 p-3 rounded-lg"><p class="text-sm text-gray-400 mb-2">Historia aktualizacji:</p> <!></div>'),ie=x('<div class="bg-blue-900/30 border border-blue-500 rounded-lg"><div class="bg-blue-800/50 px-4 py-2 rounded-t-lg border-b border-blue-500"><h3 class="font-medium text-blue-300">📊 Status zgłoszenia</h3></div> <div class="p-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><p class="text-sm text-gray-400 mb-1">Numer:</p> <p class="font-mono text-cyan-300"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Status:</p> <p class="text-green-400 capitalize font-medium"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Zespół:</p> <p class="text-cyan-300"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Ostatnia aktualizacja:</p> <p class="text-gray-300 text-sm"> </p></div></div> <!></div></div>'),re=x(`<div class="ticket-widget-container svelte-s2lxog"><h2 class="widget-title svelte-s2lxog">🎫 System zgłoszeń i ticketów</h2> <div class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2">Email *</label> <input type="email" placeholder="twoj.email@example.com" class="widget-input svelte-s2lxog"/></div> <div><label class="block text-sm font-medium mb-2">Priorytet</label> <select class="widget-select svelte-s2lxog"><option class="svelte-s2lxog">🟢 Niski</option><option class="svelte-s2lxog">🟡 Średni</option><option class="svelte-s2lxog">🟠 Wysoki</option><option class="svelte-s2lxog">🔴 Krytyczny</option></select></div></div> <div><label class="block text-sm font-medium mb-2">Kategoria (opcjonalna)</label> <select class="widget-select svelte-s2lxog"><option class="svelte-s2lxog">Wybierz kategorię</option><option class="svelte-s2lxog">🐛 Błąd w systemie</option><option class="svelte-s2lxog">✨ Prośba o funkcję</option><option class="svelte-s2lxog">❓ Pytanie</option><option class="svelte-s2lxog">💰 Płatności/Faktury</option><option class="svelte-s2lxog">🔗 Integracje</option><option class="svelte-s2lxog">⚡ Wydajność</option><option class="svelte-s2lxog">🤔 Inne</option></select></div> <div><label class="block text-sm font-medium mb-2">Opis problemu *</label> <textarea rows="6" placeholder="Opisz szczegółowo swój problem lub zapytanie. Im więcej informacji podasz, tym szybciej będziemy mogli pomóc..." class="widget-textarea svelte-s2lxog"></textarea></div> <div class="flex gap-3"><button class="action-btn primary svelte-s2lxog"><!></button> <button class="action-btn secondary svelte-s2lxog">🗑️ Wyczyść</button></div> <!> <!> <!> <div class="text-xs text-gray-400 italic">💡 Tip: Podanie szczegółowego opisu problemu pomoże naszemu systemowi AI
      lepiej sklasyfikować zgłoszenie</div></div></div>`);function fe(kt,jt){Zt(jt,!1);let o=j({description:"",email:"",priority:"medium",category:""}),n=j(null),N=j(!1),h=j(""),m=j(null),A=j(!1);async function St(){if(!s(o).description||!s(o).email){l(h,"Opis problemu i email są wymagane");return}l(N,!0),l(h,""),l(n,null);try{const i=await fetch("/api/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s(o))}),r=await i.json();if(!i.ok)throw new Error(r.error||"Błąd podczas tworzenia ticket");l(n,r)}catch(i){l(h,i.message),console.error("Ticket submission error:",i)}finally{l(N,!1)}}async function It(i){l(A,!0),l(m,null);try{const r=await fetch(`/api/tickets?id=${encodeURIComponent(i)}`),d=await r.json();if(!r.ok)throw new Error(d.error||"Błąd podczas pobierania statusu");l(m,d)}catch(r){l(h,r.message),console.error("Status check error:",r)}finally{l(A,!1)}}function Pt(){l(o,{description:"",email:"",priority:"medium",category:""}),l(n,null),l(h,""),l(m,null)}function Tt(i){switch(i){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"critical":return"text-red-400";default:return"text-cyan-400"}}function dt(i){switch(i){case"tech-support":return"Wsparcie Techniczne";case"billing":return"Dział Płatności";case"sales":return"Dział Sprzedaży";case"other":return"Zespół Ogólny";default:return i}}Mt();var q=re(),pt=t(e(q),2),L=e(pt),F=e(L),ut=t(e(F),2);Rt(ut),a(F);var mt=t(F,2),H=t(e(mt),2);y(()=>{s(o),ht(()=>{})});var J=e(H);J.value=J.__value="low";var R=t(J);R.value=R.__value="medium";var G=t(R);G.value=G.__value="high";var gt=t(G);gt.value=gt.__value="critical",a(H),a(mt),a(L);var M=t(L,2),Q=t(e(M),2);y(()=>{s(o),ht(()=>{})});var V=e(Q);V.value=V.__value="";var X=t(V);X.value=X.__value="bug";var Y=t(X);Y.value=Y.__value="feature-request";var tt=t(Y);tt.value=tt.__value="question";var et=t(tt);et.value=et.__value="billing";var at=t(et);at.value=at.__value="integration";var st=t(at);st.value=st.__value="performance";var _t=t(st);_t.value=_t.__value="other",a(Q),a(M);var it=t(M,2),xt=t(e(it),2);qt(xt),a(it);var rt=t(it,2),S=e(rt),Ot=e(S);{var Wt=i=>{var r=Qt();ct(),p(i,r)},Dt=i=>{var r=Lt("🎫 Wyślij zgłoszenie");p(i,r)};f(Ot,i=>{s(N)?i(Wt):i(Dt,!1)})}a(S);var Nt=t(S,2);a(rt);var bt=t(rt,2);{var At=i=>{var r=Vt(),d=e(r),b=e(d);a(d),a(r),y(()=>u(b,`❌ ${s(h)??""}`)),p(i,r)};f(bt,i=>{s(h)&&i(At)})}var yt=t(bt,2);{var Bt=i=>{var r=ee(),d=t(e(r),2),b=e(d),w=e(b),I=t(e(w),2),ot=e(I,!0);a(I),a(w);var P=t(w,4);{var B=v=>{var g=Xt(),c=Ft(g),_=t(e(c),2),nt=e(_,!0);a(_),a(c);var U=t(c,2),k=t(e(U),2),W=e(k,!0);a(k),a(U),y((D,vt)=>{u(nt,D),Gt(k,1,`${vt??""} font-medium capitalize`,"svelte-s2lxog"),u(W,s(n).classification.priority)},[()=>dt(s(n).classification.team),()=>Tt(s(n).classification.priority)]),p(v,g)};f(P,v=>{s(n).classification&&v(B)})}a(b);var C=t(b,2);{var T=v=>{var g=Yt(),c=t(e(g),2),_=e(c,!0);a(c),a(g),y(()=>u(_,s(n).classification.summary)),p(v,g)};f(C,v=>{s(n).classification?.summary&&v(T)})}var O=t(C,2),z=e(O),E=e(z);{var K=v=>{var g=te();p(v,g)};f(E,v=>{s(A)&&v(K)})}ct(),a(z);var lt=t(z,2);a(O),a(d),a(r),y(()=>{u(ot,s(n).ticketId),z.disabled=s(A)}),$("click",z,()=>It(s(n).ticketId)),$("click",lt,()=>navigator.clipboard.writeText(s(n).ticketId)),p(i,r)};f(yt,i=>{s(n)&&i(Bt)})}var Ct=t(yt,2);{var Et=i=>{var r=ie(),d=t(e(r),2),b=e(d),w=e(b),I=t(e(w),2),ot=e(I,!0);a(I),a(w);var P=t(w,2),B=t(e(P),2),C=e(B,!0);a(B),a(P);var T=t(P,2),O=t(e(T),2),z=e(O,!0);a(O),a(T);var E=t(T,2),K=t(e(E),2),lt=e(K,!0);a(K),a(E),a(b);var v=t(b,2);{var g=c=>{var _=se(),nt=t(e(_),2);Ht(nt,1,()=>s(m).updates,Jt,(U,k)=>{var W=ae(),D=e(W),vt=e(D,!0);a(D);var ft=t(D,2),Kt=e(ft);a(ft),a(W),y(Ut=>{u(vt,Ut),u(Kt,`→ ${s(k).message??""}`)},[()=>new Date(s(k).timestamp).toLocaleString()]),p(U,W)}),a(_),p(c,_)};f(v,c=>{s(m).updates?.length&&c(g)})}a(d),a(r),y((c,_)=>{u(ot,s(m).ticketId),u(C,s(m).status),u(z,c),u(lt,_)},[()=>dt(s(m).team),()=>new Date(s(m).lastUpdate).toLocaleString()]),p(i,r)};f(Ct,i=>{s(m)&&i(Et)})}ct(2),a(pt),a(q),y(()=>S.disabled=s(N)||!s(o).description||!s(o).email),wt(ut,()=>s(o).email,i=>Z(o,s(o).email=i)),zt(H,()=>s(o).priority,i=>Z(o,s(o).priority=i)),zt(Q,()=>s(o).category,i=>Z(o,s(o).category=i)),wt(xt,()=>s(o).description,i=>Z(o,s(o).description=i)),$("click",S,St),$("click",Nt,Pt),p(kt,q),$t()}export{fe as default};
