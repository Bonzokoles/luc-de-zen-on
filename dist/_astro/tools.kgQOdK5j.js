import{E as d,O as p}from"./math.vector.C8FsJn6B.js";import{L as u,F as K,T as F,I as v,f as b,g as y,h as m,i as L,_ as A,R as j,j as T,D as E,P as S,k as D,W as w,G as R,M as x,l as O}from"./decorators.serialization.DTWIlLMH.js";import{I as U}from"./instantiationTools.DpJ04vA6.js";const C=(c,e,t)=>!c||c.getClassName&&c.getClassName()==="Mesh"?null:c.getClassName&&(c.getClassName()==="SubMesh"||c.getClassName()==="PhysicsBody")?c.clone(e):c.clone?c.clone():Array.isArray(c)?c.slice():t&&typeof c=="object"?{...c}:null;function q(c){const e=[];do{const t=Object.getOwnPropertyNames(c);for(const r of t)e.indexOf(r)===-1&&e.push(r)}while(c=Object.getPrototypeOf(c));return e}class I{static DeepCopy(e,t,r,o,a=!1){const s=q(e);for(const n of s){if(n[0]==="_"&&(!o||o.indexOf(n)===-1)||n.endsWith("Observable")||r&&r.indexOf(n)!==-1)continue;const l=e[n],f=typeof l;if(f!=="function")try{if(f==="object")if(l instanceof Uint8Array)t[n]=Uint8Array.from(l);else if(l instanceof Array){if(t[n]=[],l.length>0)if(typeof l[0]=="object")for(let g=0;g<l.length;g++){const P=C(l[g],t,a);t[n].indexOf(P)===-1&&t[n].push(P)}else t[n]=l.slice(0)}else t[n]=C(l,t,a);else t[n]=l}catch(g){u.Warn(g.message)}}}}class i{static get BaseUrl(){return K.BaseUrl}static set BaseUrl(e){K.BaseUrl=e}static get CleanUrl(){return K.CleanUrl}static set CleanUrl(e){K.CleanUrl=e}static IsAbsoluteUrl(e){return e.indexOf("//")===0?!0:e.indexOf("://")===-1||e.indexOf(".")===-1||e.indexOf("/")===-1||e.indexOf(":")>e.indexOf("/")?!1:e.indexOf("://")<e.indexOf(".")||e.indexOf("data:")===0||e.indexOf("blob:")===0}static set ScriptBaseUrl(e){K.ScriptBaseUrl=e}static get ScriptBaseUrl(){return K.ScriptBaseUrl}static set CDNBaseUrl(e){i.ScriptBaseUrl=e,i.AssetBaseUrl=e}static set ScriptPreprocessUrl(e){K.ScriptPreprocessUrl=e}static get ScriptPreprocessUrl(){return K.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return K.DefaultRetryStrategy}static set DefaultRetryStrategy(e){K.DefaultRetryStrategy=e}static get CorsBehavior(){return K.CorsBehavior}static set CorsBehavior(e){K.CorsBehavior=e}static get UseFallbackTexture(){return d.UseFallbackTexture}static set UseFallbackTexture(e){d.UseFallbackTexture=e}static get RegisteredExternalClasses(){return U.RegisteredExternalClasses}static set RegisteredExternalClasses(e){U.RegisteredExternalClasses=e}static get fallbackTexture(){return d.FallbackTexture}static set fallbackTexture(e){d.FallbackTexture=e}static FetchToRef(e,t,r,o,a,s){const n=Math.abs(e)*r%r|0,l=Math.abs(t)*o%o|0,f=(n+l*r)*4;s.r=a[f]/255,s.g=a[f+1]/255,s.b=a[f+2]/255,s.a=a[f+3]/255}static Mix(e,t,r){return 0}static Instantiate(e){return U.Instantiate(e)}static SetImmediate(e){F.SetImmediate(e)}static IsExponentOfTwo(e){return!0}static FloatRound(e){return Math.fround(e)}static GetFilename(e){const t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)}static GetFolderPath(e,t=!1){const r=e.lastIndexOf("/");return r<0?t?e:"":e.substring(0,r+1)}static ToDegrees(e){return e*180/Math.PI}static ToRadians(e){return e*Math.PI/180}static SmoothAngleChange(e,t,r=.9){const o=this.ToRadians(e),a=this.ToRadians(t);return this.ToDegrees(Math.atan2((1-r)*Math.sin(a)+r*Math.sin(o),(1-r)*Math.cos(a)+r*Math.cos(o)))}static MakeArray(e,t){return t!==!0&&(e===void 0||e==null)?null:Array.isArray(e)?e:[e]}static GetPointerPrefix(e){return v()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(e,t){b(e,t)}static SetReferrerPolicyBehavior(e,t){t.referrerPolicy=e}static get PreprocessUrl(){return K.PreprocessUrl}static set PreprocessUrl(e){K.PreprocessUrl=e}static LoadImage(e,t,r,o,a,s){return y(e,t,r,o,a,s)}static LoadFile(e,t,r,o,a,s){return m(e,t,r,o,a,s)}static async LoadFileAsync(e,t=!0){return await new Promise((r,o)=>{m(e,a=>{r(a)},void 0,void 0,t,(a,s)=>{o(s)})})}static GetAssetUrl(e){if(!e)return"";if(i.AssetBaseUrl&&e.startsWith(i._DefaultAssetsUrl)){const t=i.AssetBaseUrl[i.AssetBaseUrl.length-1]==="/"?i.AssetBaseUrl.substring(0,i.AssetBaseUrl.length-1):i.AssetBaseUrl;return e.replace(i._DefaultAssetsUrl,t)}return e}static GetBabylonScriptURL(e,t){if(!e)return"";if(i.ScriptBaseUrl&&e.startsWith(i._DefaultCdnUrl)){const r=i.ScriptBaseUrl[i.ScriptBaseUrl.length-1]==="/"?i.ScriptBaseUrl.substring(0,i.ScriptBaseUrl.length-1):i.ScriptBaseUrl;e=e.replace(i._DefaultCdnUrl,r)}return e=i.ScriptPreprocessUrl(e),t&&!i.IsAbsoluteUrl(e)&&(e=i.GetAbsoluteUrl(e)),e}static LoadBabylonScript(e,t,r,o){e=i.GetBabylonScriptURL(e),i.LoadScript(e,t,r)}static async LoadBabylonScriptAsync(e){return e=i.GetBabylonScriptURL(e),await i.LoadScriptAsync(e)}static LoadScript(e,t,r,o,a=!1){if(typeof importScripts=="function"){try{importScripts(e),t&&t()}catch(l){r?.(`Unable to load script '${e}' in worker`,l)}return}else if(!v()){r?.(`Cannot load script '${e}' outside of a window or a worker`);return}const s=document.getElementsByTagName("head")[0],n=document.createElement("script");a?(n.setAttribute("type","module"),n.innerText=e):(n.setAttribute("type","text/javascript"),n.setAttribute("src",e)),o&&(n.id=o),n.onload=()=>{t&&t()},n.onerror=l=>{r&&r(`Unable to load script '${e}'`,l)},s.appendChild(n)}static async LoadScriptAsync(e,t){return await new Promise((r,o)=>{this.LoadScript(e,()=>{r()},(a,s)=>{o(s||new Error(a))},t)})}static ReadFileAsDataURL(e,t,r){const o=new FileReader,a={onCompleteObservable:new p,abort:()=>o.abort()};return o.onloadend=()=>{a.onCompleteObservable.notifyObservers(a)},o.onload=s=>{t(s.target.result)},o.onprogress=r,o.readAsDataURL(e),a}static ReadFile(e,t,r,o,a){return L(e,t,r,o,a)}static FileAsURL(e){const t=new Blob([e]);return window.URL.createObjectURL(t)}static Format(e,t=2){return e.toFixed(t)}static DeepCopy(e,t,r,o){I.DeepCopy(e,t,r,o)}static IsEmpty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}static RegisterTopRootEvents(e,t){for(let r=0;r<t.length;r++){const o=t[r];e.addEventListener(o.name,o.handler,!1);try{window.parent&&window.parent.addEventListener(o.name,o.handler,!1)}catch{}}}static UnregisterTopRootEvents(e,t){for(let r=0;r<t.length;r++){const o=t[r];e.removeEventListener(o.name,o.handler);try{e.parent&&e.parent.removeEventListener(o.name,o.handler)}catch{}}}static async DumpFramebuffer(e,t,r,o,a="image/png",s,n){throw A("DumpTools")}static DumpData(e,t,r,o,a="image/png",s,n=!1,l=!1,f){throw A("DumpTools")}static async DumpDataAsync(e,t,r,o="image/png",a,s=!1,n=!1,l){throw A("DumpTools")}static _IsOffScreenCanvas(e){return e.convertToBlob!==void 0}static ToBlob(e,t,r="image/png",o){!i._IsOffScreenCanvas(e)&&!e.toBlob&&(e.toBlob=function(a,s,n){setTimeout(()=>{const l=atob(this.toDataURL(s,n).split(",")[1]),f=l.length,g=new Uint8Array(f);for(let P=0;P<f;P++)g[P]=l.charCodeAt(P);a(new Blob([g]))})}),i._IsOffScreenCanvas(e)?e.convertToBlob({type:r,quality:o}).then(a=>t(a)):e.toBlob(function(a){t(a)},r,o)}static DownloadBlob(e,t){if("download"in document.createElement("a")){if(!t){const r=new Date;t="screenshot_"+((r.getFullYear()+"-"+(r.getMonth()+1)).slice(2)+"-"+r.getDate()+"_"+r.getHours()+"-"+("0"+r.getMinutes()).slice(-2))+".png"}i.Download(e,t)}else if(e&&typeof URL<"u"){const r=URL.createObjectURL(e),o=window.open("");if(!o)return;const a=o.document.createElement("img");a.onload=function(){URL.revokeObjectURL(r)},a.src=r,o.document.body.appendChild(a)}}static EncodeScreenshotCanvasData(e,t,r="image/png",o,a){if(typeof o=="string"||!t)this.ToBlob(e,function(s){s&&i.DownloadBlob(s,o),t&&t("")},r,a);else if(t){if(i._IsOffScreenCanvas(e)){e.convertToBlob({type:r,quality:a}).then(n=>{const l=new FileReader;l.readAsDataURL(n),l.onloadend=()=>{const f=l.result;t(f)}});return}const s=e.toDataURL(r,a);t(s)}}static Download(e,t){if(typeof URL>"u")return;const r=window.URL.createObjectURL(e),o=document.createElement("a");document.body.appendChild(o),o.style.display="none",o.href=r,o.download=t,o.addEventListener("click",()=>{o.parentElement&&o.parentElement.removeChild(o)}),o.click(),window.URL.revokeObjectURL(r)}static BackCompatCameraNoPreventDefault(e){return typeof e[0]=="boolean"?e[0]:typeof e[1]=="boolean"?e[1]:!1}static CreateScreenshot(e,t,r,o,a="image/png",s=!1,n){throw A("ScreenshotTools")}static async CreateScreenshotAsync(e,t,r,o="image/png",a){throw A("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(e,t,r,o,a="image/png",s=1,n=!1,l,f=!1,g=!1,P=!0,B,X){throw A("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(e,t,r,o="image/png",a=1,s=!1,n,l=!1,f=!1,g=!0,P,B){throw A("ScreenshotTools")}static RandomId(){return j()}static IsBase64(e){return T(e)}static DecodeBase64(e){return E(e)}static get errorsCount(){return u.errorsCount}static Log(e){u.Log(e)}static Warn(e){u.Warn(e)}static Error(e){u.Error(e)}static get LogCache(){return u.LogCache}static ClearLogCache(){u.ClearLogCache()}static set LogLevels(e){u.LogLevels=e}static set PerformanceLogLevel(e){if((e&i.PerformanceUserMarkLogLevel)===i.PerformanceUserMarkLogLevel){i.StartPerformanceCounter=i._StartUserMark,i.EndPerformanceCounter=i._EndUserMark;return}if((e&i.PerformanceConsoleLogLevel)===i.PerformanceConsoleLogLevel){i.StartPerformanceCounter=i._StartPerformanceConsole,i.EndPerformanceCounter=i._EndPerformanceConsole;return}i.StartPerformanceCounter=i._StartPerformanceCounterDisabled,i.EndPerformanceCounter=i._EndPerformanceCounterDisabled}static _StartPerformanceCounterDisabled(e,t){}static _EndPerformanceCounterDisabled(e,t){}static _StartUserMark(e,t=!0){if(!i._Performance){if(!v())return;i._Performance=window.performance}!t||!i._Performance.mark||i._Performance.mark(e+"-Begin")}static _EndUserMark(e,t=!0){!t||!i._Performance.mark||(i._Performance.mark(e+"-End"),i._Performance.measure(e,e+"-Begin",e+"-End"))}static _StartPerformanceConsole(e,t=!0){t&&(i._StartUserMark(e,t),console.time&&console.time(e))}static _EndPerformanceConsole(e,t=!0){t&&(i._EndUserMark(e,t),console.timeEnd(e))}static get Now(){return S.Now}static GetClassName(e,t=!1){let r=null;return!t&&e.getClassName?r=e.getClassName():(e instanceof Object&&(r=(t?e:Object.getPrototypeOf(e)).constructor.__bjsclassName__),r||(r=typeof e)),r}static First(e,t){for(const r of e)if(t(r))return r;return null}static getFullClassName(e,t=!1){let r=null,o=null;if(!t&&e.getClassName)r=e.getClassName();else{if(e instanceof Object){const a=t?e:Object.getPrototypeOf(e);r=a.constructor.__bjsclassName__,o=a.constructor.__bjsmoduleName__}r||(r=typeof e)}return r?(o!=null?o+".":"")+r:null}static async DelayAsync(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}static IsSafari(){return D()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}}i.AssetBaseUrl="";i.UseCustomRequestHeaders=!1;i.CustomRequestHeaders=w.CustomRequestHeaders;i.GetDOMTextContent=R;i._DefaultCdnUrl="https://cdn.babylonjs.com";i._DefaultAssetsUrl="https://assets.babylonjs.com/core";i.GetAbsoluteUrl=typeof document=="object"?c=>{const e=document.createElement("a");return e.href=c,e.href}:typeof URL=="function"&&typeof location=="object"?c=>new URL(c,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")};i.NoneLogLevel=u.NoneLogLevel;i.MessageLogLevel=u.MessageLogLevel;i.WarningLogLevel=u.WarningLogLevel;i.ErrorLogLevel=u.ErrorLogLevel;i.AllLogLevel=u.AllLogLevel;i.IsWindowObjectExist=v;i.PerformanceNoneLogLevel=0;i.PerformanceUserMarkLogLevel=1;i.PerformanceConsoleLogLevel=2;i.StartPerformanceCounter=i._StartPerformanceCounterDisabled;i.EndPerformanceCounter=i._EndPerformanceCounterDisabled;class h{constructor(e,t,r,o=0){this.iterations=e,this.index=o-1,this._done=!1,this._fn=t,this._successCallback=r}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(e,t,r,o=0){const a=new h(e,t,r,o);return a.executeNext(),a}static SyncAsyncForLoop(e,t,r,o,a,s=0){return h.Run(Math.ceil(e/t),n=>{a&&a()?n.breakLoop():setTimeout(()=>{for(let l=0;l<t;++l){const f=n.index*t+l;if(f>=e)break;if(r(f),a&&a()){n.breakLoop();break}}n.executeNext()},s)},o)}}i.Mix=x;i.IsExponentOfTwo=O;d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z";export{h as A,I as D,i as T};
