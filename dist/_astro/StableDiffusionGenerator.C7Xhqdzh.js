import{r as o,j as e}from"./react.BKEw5ZbO.js";import"./ClientRouter.astro_astro_type_script_index_0_lang.DtH6aRN_.js";if(typeof MessageChannel>"u"){class r{constructor(){this.onmessage=null}postMessage(c){const n={data:c};(typeof queueMicrotask=="function"?queueMicrotask:d=>setTimeout(d,0))(()=>this.onmessage&&this.onmessage(n))}start(){}close(){}}class h{constructor(){this.port1=new r,this.port2=new r;const c=(n,d)=>{const m={data:d};(typeof queueMicrotask=="function"?queueMicrotask:u=>setTimeout(u,0))(()=>n.onmessage&&n.onmessage(m))};this.port1.postMessage=n=>c(this.port2,n),this.port2.postMessage=n=>c(this.port1,n)}}globalThis.MessageChannel=h}function C(){const[r,h]=o.useState(""),[p,c]=o.useState(""),[n,d]=o.useState(null),[m,u]=o.useState(!1),[a,x]=o.useState({width:512,height:512,steps:20,guidance:7.5,seed:-1}),[S,N]=o.useState([]),f=o.useRef(null),[b,y]=o.useState({artists:[],styles:[],subjects:[]});o.useEffect(()=>{Promise.all([fetch("/artists-data.js").then(s=>s.text()),fetch("/styles-data-converted.js").then(s=>s.text())]).then(([s,t])=>{try{const l=s.match(/name:\s*"([^"]+)"/g)?.map(i=>i.match(/"([^"]+)"/)[1])||[],g=t.match(/name:\s*"([^"]+)"/g)?.map(i=>i.match(/"([^"]+)"/)[1])||[];y({artists:l.slice(0,50),styles:g.slice(0,50),subjects:["portrait","landscape","abstract","sci-fi","fantasy","cyberpunk","digital art"]})}catch(l){console.error("Error loading wildcards:",l)}})},[]);const v=async()=>{if(!r.trim()){alert("Wprowadź prompt przed generowaniem!");return}u(!0);try{await new Promise(i=>setTimeout(i,3e3));const s=f.current,t=s.getContext("2d"),l=t.createLinearGradient(0,0,a.width,a.height);l.addColorStop(0,"#001122"),l.addColorStop(.5,"#003344"),l.addColorStop(1,"#001122"),t.fillStyle=l,t.fillRect(0,0,a.width,a.height),t.strokeStyle="#00ffff",t.lineWidth=2;for(let i=0;i<10;i++)t.beginPath(),t.arc(Math.random()*a.width,Math.random()*a.height,Math.random()*50+10,0,Math.PI*2),t.stroke();t.fillStyle="#00ffff",t.font="bold 24px Orbitron",t.textAlign="center",t.fillText("AI GENERATED",a.width/2,a.height/2),t.font="bold 16px Orbitron",t.fillText(r.slice(0,30)+"...",a.width/2,a.height/2+30);const g=s.toDataURL();d(g),N(i=>[{prompt:r,negativePrompt:p,image:g,settings:{...a},timestamp:new Date().toISOString()},...i.slice(0,9)])}catch(s){console.error("Error generating image:",s),alert("Błąd podczas generowania obrazu")}finally{u(!1)}},j=(s,t)=>{h(l=>l+(l?", ":"")+t)},w=()=>{x({width:[512,768,1024][Math.floor(Math.random()*3)],height:[512,768,1024][Math.floor(Math.random()*3)],steps:Math.floor(Math.random()*30)+10,guidance:Math.random()*10+5,seed:Math.floor(Math.random()*1e6)})};return e.jsxs("div",{className:"square-grid",children:[e.jsxs("div",{className:"square-half",children:[e.jsxs("div",{className:"panel main-frame",children:[e.jsx("h2",{className:"neon-cyan sci-fi-type text-xl font-bold mb-4",children:"GENERATOR PROMPTS"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2 sci-fi-type neon-white",children:"POSITIVE PROMPT"}),e.jsx("textarea",{className:"input-glossy w-full h-24 resize-none",value:r,onChange:s=>h(s.target.value),placeholder:"Opisz obraz który chcesz wygenerować..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2 sci-fi-type neon-white",children:"NEGATIVE PROMPT"}),e.jsx("textarea",{className:"input-glossy w-full h-20 resize-none",value:p,onChange:s=>c(s.target.value),placeholder:"Czego nie chcesz w obrazie..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsx("button",{className:"scifi-btn text-sm py-2",onClick:()=>h(""),children:"WYCZYŚĆ"}),e.jsx("button",{className:"scifi-btn text-sm py-2",onClick:w,children:"LOSUJ USTAWIENIA"})]}),e.jsx("button",{className:"scifi-btn w-full py-3 text-lg font-bold",onClick:v,disabled:m,children:m?"GENEROWANIE...":"GENERUJ OBRAZ"})]}),e.jsxs("div",{className:"panel main-frame",children:[e.jsx("h3",{className:"neon-magenta sci-fi-type text-lg font-bold mb-3",children:"WILDCARDS"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold mb-2 neon-white",children:"ARTYŚCI:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.artists.slice(0,6).map((s,t)=>e.jsx("button",{className:"text-xs px-2 py-1 bg-black/50 border border-cyan-400 rounded hover:bg-cyan-400/20 transition-colors",onClick:()=>j("artist",s),children:s},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold mb-2 neon-white",children:"STYLE:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.subjects.map((s,t)=>e.jsx("button",{className:"text-xs px-2 py-1 bg-black/50 border border-magenta-400 rounded hover:bg-magenta-400/20 transition-colors",onClick:()=>j("subject",s),children:s},t))})]})]})]})]}),e.jsxs("div",{className:"square-half",children:[e.jsxs("div",{className:"panel main-frame",children:[e.jsx("h2",{className:"neon-cyan sci-fi-type text-xl font-bold mb-4",children:"WYGENEROWANY OBRAZ"}),e.jsx("div",{className:"relative bg-black/30 border border-white/20 rounded-lg aspect-square flex items-center justify-center",children:m?e.jsxs("div",{className:"loading-pulse neon-cyan sci-fi-type text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"●"}),e.jsx("div",{children:"PROCESSING..."})]}):n?e.jsx("img",{src:n,alt:"Wygenerowany obraz",className:"max-w-full max-h-full rounded-lg"}):e.jsxs("div",{className:"text-center neon-white opacity-60",children:[e.jsx("div",{className:"text-6xl mb-4",children:"◯"}),e.jsx("div",{className:"sci-fi-type",children:"BRAK OBRAZU"})]})}),n&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("a",{href:n,download:"ai-generated-image.png",className:"scifi-btn flex-1 text-center py-2",children:"POBIERZ"}),e.jsx("button",{className:"scifi-btn flex-1 py-2",onClick:()=>d(null),children:"USUŃ"})]})]}),e.jsxs("div",{className:"panel main-frame",children:[e.jsx("h3",{className:"neon-magenta sci-fi-type text-lg font-bold mb-3",children:"USTAWIENIA"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 neon-white",children:"SZEROKOŚĆ"}),e.jsxs("select",{className:"input-glossy w-full text-sm",value:a.width,onChange:s=>x({...a,width:Number(s.target.value)}),children:[e.jsx("option",{value:512,children:"512px"}),e.jsx("option",{value:768,children:"768px"}),e.jsx("option",{value:1024,children:"1024px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 neon-white",children:"WYSOKOŚĆ"}),e.jsxs("select",{className:"input-glossy w-full text-sm",value:a.height,onChange:s=>x({...a,height:Number(s.target.value)}),children:[e.jsx("option",{value:512,children:"512px"}),e.jsx("option",{value:768,children:"768px"}),e.jsx("option",{value:1024,children:"1024px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 neon-white",children:"KROKI"}),e.jsx("input",{type:"number",className:"input-glossy w-full text-sm",min:"10",max:"50",value:a.steps,onChange:s=>x({...a,steps:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 neon-white",children:"GUIDANCE"}),e.jsx("input",{type:"number",className:"input-glossy w-full text-sm",min:"1",max:"20",step:"0.5",value:a.guidance,onChange:s=>x({...a,guidance:Number(s.target.value)})})]})]})]})]}),e.jsx("canvas",{ref:f,width:a.width,height:a.height,style:{display:"none"}})]})}export{C as default};
