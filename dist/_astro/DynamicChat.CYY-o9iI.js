import{p as O,N as S,G as W,v as d,i as $,t as M,s as u,c as i,B as G,b as K,a as P,d as L,g as s,e as _,h as I,j as w,k as U,n,C as F,q as H,x as N,A}from"./Header.astro_astro_type_script_index_0_lang.C3v9REYp.js";/* empty css                           */import"./react.0nTXIzv_.js";if(typeof MessageChannel>"u"){class m{constructor(){this.onmessage=null}postMessage(t){const e={data:t};(typeof queueMicrotask=="function"?queueMicrotask:r=>setTimeout(r,0))(()=>this.onmessage&&this.onmessage(e))}start(){}close(){}}class f{constructor(){this.port1=new m,this.port2=new m;const t=(e,r)=>{const b={data:r};(typeof queueMicrotask=="function"?queueMicrotask:v=>setTimeout(v,0))(()=>e.onmessage&&e.onmessage(b))};this.port1.postMessage=e=>t(this.port2,e),this.port2.postMessage=e=>t(this.port1,e)}}globalThis.MessageChannel=f}var Q=M('<div><div><div class="message-text text-primary-foreground whitespace-pre-wrap"> </div></div></div>'),R=M('<div class="message assistant-message svelte-o5q56m"><div class="message-content bg-cyan-600/20 border-cyan-400/30 rounded-lg p-3 svelte-o5q56m"><div class="message-text text-primary-foreground">AI pisze odpowiedź...</div></div></div>'),V=M('<div class="chat-container border border-edge rounded-lg overflow-hidden mt-8" style="background: rgba(0, 0, 0, 0.5);"><div class="chat-header border-b border-edge p-4 flex items-center justify-between" style="background: rgba(0, 0, 0, 0.3);"><div class="flex items-center gap-3"><div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div> <span class="text-primary-foreground font-semibold"> </span></div></div> <div class="chat-messages h-96 overflow-y-auto p-4 space-y-4"><!> <!></div> <div class="chat-input border-t border-edge p-4"><div class="flex gap-3"><textarea rows="2" placeholder="Napisz swoją wiadomość..." class="flex-1 p-3 border border-edge rounded-lg text-primary-foreground placeholder-gray-400 focus:border-cyan-400 focus:outline-none resize-none" style="background: rgba(0, 0, 0, 0.5);"></textarea> <button class="bg-cyan-600 hover:bg-cyan-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 disabled:opacity-50">Wyślij</button></div></div></div>');function ee(m,f){O(f,!1);let c=S(f,"agent",8),t=_([]),e=_(""),r=_(!1);W(()=>{d(t,[{from:"assistant",text:c().prompt||"Witaj! Jestem gotowy do rozmowy."}])});async function b(){if(!s(e).trim()||s(r))return;const a={from:"user",text:s(e)};d(t,[...s(t),a]);const l=s(e);d(e,""),d(r,!0);try{const o=await fetch("/api/generic-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:l,system_prompt:c().prompt,model:c().model})});if(!o.ok)throw new Error(`Błąd serwera: ${o.statusText}`);const h={from:"assistant",text:(await o.json()).answer};d(t,[...s(t),h])}catch(o){const p={from:"assistant",text:`Przepraszam, wystąpił błąd: ${o.message}`};d(t,[...s(t),p])}finally{d(r,!1)}}$();var v=V(),y=i(v),k=i(y),q=u(i(k),2),B=i(q,!0);n(q),n(k),n(y);var x=u(y,2),j=i(x);G(j,1,()=>s(t),F,(a,l)=>{var o=Q(),p=i(o),h=i(p),J=i(h,!0);n(h),n(p),n(o),P(()=>{A(o,1,`message ${s(l).from??""}-message`,"svelte-o5q56m"),A(p,1,`message-content ${(s(l).from==="user"?"bg-blue-600/20 border-blue-400/30":"bg-cyan-600/20 border-cyan-400/30")??""} rounded-lg p-3`,"svelte-o5q56m"),N(J,s(l).text)}),w(a,o)});var D=u(j,2);{var E=a=>{var l=R();w(a,l)};K(D,a=>{s(r)&&a(E)})}n(x);var z=u(x,2),C=i(z),g=i(C);H(g);var T=u(g,2);n(C),n(z),n(v),P(()=>{N(B,c().name),g.disabled=s(r),T.disabled=s(r)}),L(g,()=>s(e),a=>d(e,a)),I("keydown",g,a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),b())}),I("click",T,b),w(m,v),U()}export{ee as default};
