import{p as Ke,i as Ue,f as y,s as e,c as t,t as h,a as w,b as ke,m as U,g as s,d as T,e as ze,h as Z,j as g,k as Ze,l as $e,n as a,o as je,q as Le,u as pe,v as n,w as Fe,x as _,y as He,z as Je,A as Re,B as Ge}from"./Header.astro_astro_type_script_index_0_lang.AXIbBUBV.js";/* empty css                            */import"./react.CU-GxeNQ.js";if(typeof MessageChannel>"u"){class D{constructor(){this.onmessage=null}postMessage(l){const v={data:l};(typeof queueMicrotask=="function"?queueMicrotask:u=>setTimeout(u,0))(()=>this.onmessage&&this.onmessage(v))}start(){}close(){}}class ${constructor(){this.port1=new D,this.port2=new D;const l=(v,u)=>{const d={data:u};(typeof queueMicrotask=="function"?queueMicrotask:j=>setTimeout(j,0))(()=>v.onmessage&&v.onmessage(d))};this.port1.postMessage=v=>l(this.port2,v),this.port2.postMessage=v=>l(this.port1,v)}}globalThis.MessageChannel=$}var Qe=y('<div class="animate-spin rounded-full h-4 w-4 border-2 border-cyan-300 border-t-transparent svelte-s2lxog"></div> Tworzę ticket...',1),Ve=y('<div class="error-container svelte-s2lxog"><p class="error-text svelte-s2lxog"> </p></div>'),Xe=y('<div><p class="text-sm text-gray-400 mb-1">Przypisane do zespołu:</p> <p class="text-cyan-300 font-medium"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Priorytet:</p> <p> </p></div>',1),Ye=y('<div class="bg-gray-900 p-3 rounded-lg mb-3"><p class="text-sm text-gray-400 mb-1">Podsumowanie AI:</p> <p class="text-cyan-100"> </p></div>'),et=y('<div class="animate-spin rounded-full h-3 w-3 border-2 border-blue-300 border-t-transparent svelte-s2lxog"></div>'),tt=y('<div class="result-container svelte-s2lxog"><div class="result-header svelte-s2lxog"><h3 class="result-title svelte-s2lxog">✅ Zgłoszenie zostało utworzone</h3></div> <div class="result-content svelte-s2lxog"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><p class="text-sm text-gray-400 mb-1">Numer zgłoszenia:</p> <p class="font-mono text-cyan-300 font-bold"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Status:</p> <p class="text-green-400 font-medium">Utworzone</p></div> <!></div> <!> <div class="flex gap-2"><button class="bg-blue-700 hover:bg-blue-600 disabled:bg-gray-700 px-4 py-2 rounded text-sm transition-colors duration-200 flex items-center gap-2"><!> 📊 Sprawdź status</button> <button class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition-colors duration-200">📋 Kopiuj ID</button></div></div></div>'),at=y('<div class="text-sm mb-2 last:mb-0"><span class="text-gray-400"> </span> <span class="text-cyan-100 ml-2"> </span></div>'),st=y('<div class="bg-gray-900 p-3 rounded-lg"><p class="text-sm text-gray-400 mb-2">Historia aktualizacji:</p> <!></div>'),it=y('<div class="bg-blue-900/30 border border-blue-500 rounded-lg"><div class="bg-blue-800/50 px-4 py-2 rounded-t-lg border-b border-blue-500"><h3 class="font-medium text-blue-300">📊 Status zgłoszenia</h3></div> <div class="p-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><p class="text-sm text-gray-400 mb-1">Numer:</p> <p class="font-mono text-cyan-300"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Status:</p> <p class="text-green-400 capitalize font-medium"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Zespół:</p> <p class="text-cyan-300"> </p></div> <div><p class="text-sm text-gray-400 mb-1">Ostatnia aktualizacja:</p> <p class="text-gray-300 text-sm"> </p></div></div> <!></div></div>'),ot=y(`<div class="ticket-widget-container svelte-s2lxog"><h2 class="widget-title svelte-s2lxog">🎫 System zgłoszeń i ticketów</h2> <div class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2">Email *</label> <input type="email" placeholder="twoj.email@example.com" class="widget-input svelte-s2lxog"/></div> <div><label class="block text-sm font-medium mb-2">Priorytet</label> <select class="widget-select svelte-s2lxog"><option class="svelte-s2lxog">🟢 Niski</option><option class="svelte-s2lxog">🟡 Średni</option><option class="svelte-s2lxog">🟠 Wysoki</option><option class="svelte-s2lxog">🔴 Krytyczny</option></select></div></div> <div><label class="block text-sm font-medium mb-2">Kategoria (opcjonalna)</label> <select class="widget-select svelte-s2lxog"><option class="svelte-s2lxog">Wybierz kategorię</option><option class="svelte-s2lxog">🐛 Błąd w systemie</option><option class="svelte-s2lxog">✨ Prośba o funkcję</option><option class="svelte-s2lxog">❓ Pytanie</option><option class="svelte-s2lxog">💰 Płatności/Faktury</option><option class="svelte-s2lxog">🔗 Integracje</option><option class="svelte-s2lxog">⚡ Wydajność</option><option class="svelte-s2lxog">🤔 Inne</option></select></div> <div><label class="block text-sm font-medium mb-2">Opis problemu *</label> <textarea rows="6" placeholder="Opisz szczegółowo swój problem lub zapytanie. Im więcej informacji podasz, tym szybciej będziemy mogli pomóc..." class="widget-textarea svelte-s2lxog"></textarea></div> <div class="flex gap-3"><button class="action-btn primary svelte-s2lxog"><!></button> <button class="action-btn secondary svelte-s2lxog">🗑️ Wyczyść</button></div> <!> <!> <!> <div class="text-xs text-gray-400 italic">💡 Tip: Podanie szczegółowego opisu problemu pomoże naszemu systemowi AI
      lepiej sklasyfikować zgłoszenie</div></div></div>`);function vt(D,$){Ke($,!1);let r=T({description:"",email:"",priority:"medium",category:""}),l=T(null),v=T(!1),u=T(""),d=T(null),j=T(!1);async function Se(){if(!s(r).description||!s(r).email){n(u,"Opis problemu i email są wymagane");return}n(v,!0),n(u,""),n(l,null);try{const i=await fetch("/api/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s(r))}),o=await i.json();if(!i.ok)throw new Error(o.error||"Błąd podczas tworzenia ticket");n(l,o)}catch(i){n(u,i.message),console.error("Ticket submission error:",i)}finally{n(v,!1)}}async function Te(i){n(j,!0),n(d,null);try{const o=await fetch(`/api/tickets?id=${encodeURIComponent(i)}`),m=await o.json();if(!o.ok)throw new Error(m.error||"Błąd podczas pobierania statusu");n(d,m)}catch(o){n(u,o.message),console.error("Status check error:",o)}finally{n(j,!1)}}function Pe(){n(r,{description:"",email:"",priority:"medium",category:""}),n(l,null),n(u,""),n(d,null)}function Ie(i){switch(i){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"critical":return"text-red-400";default:return"text-cyan-400"}}function ue(i){switch(i){case"tech-support":return"Wsparcie Techniczne";case"billing":return"Dział Płatności";case"sales":return"Dział Sprzedaży";case"other":return"Zespół Ogólny";default:return i}}Ue();var L=ot(),me=e(t(L),2),F=t(me),H=t(F),ge=e(t(H),2);$e(ge),a(H);var _e=e(H,2),J=e(t(_e),2);h(()=>{s(r),je(()=>{})});var R=t(J);R.value=R.__value="low";var G=e(R);G.value=G.__value="medium";var Q=e(G);Q.value=Q.__value="high";var xe=e(Q);xe.value=xe.__value="critical",a(J),a(_e),a(F);var V=e(F,2),X=e(t(V),2);h(()=>{s(r),je(()=>{})});var Y=t(X);Y.value=Y.__value="";var ee=e(Y);ee.value=ee.__value="bug";var te=e(ee);te.value=te.__value="feature-request";var ae=e(te);ae.value=ae.__value="question";var se=e(ae);se.value=se.__value="billing";var ie=e(se);ie.value=ie.__value="integration";var oe=e(ie);oe.value=oe.__value="performance";var be=e(oe);be.value=be.__value="other",a(X),a(V);var re=e(V,2),ye=e(t(re),2);Le(ye),a(re);var le=e(re,2),P=t(le),Me=t(P);{var qe=i=>{var o=Qe();pe(),g(i,o)},Oe=i=>{var o=Fe("🎫 Wyślij zgłoszenie");g(i,o)};w(Me,i=>{s(v)?i(qe):i(Oe,!1)})}a(P);var We=e(P,2);a(le);var fe=e(le,2);{var Ce=i=>{var o=Ve(),m=t(o),f=t(m);a(m),a(o),h(()=>_(f,`❌ ${s(u)??""}`)),g(i,o)};w(fe,i=>{s(u)&&i(Ce)})}var he=e(fe,2);{var De=i=>{var o=tt(),m=e(t(o),2),f=t(m),k=t(f),I=e(t(k),2),ne=t(I,!0);a(I),a(k);var M=e(k,4);{var N=c=>{var x=Xe(),p=He(x),b=e(t(p),2),ce=t(b,!0);a(b),a(p);var K=e(p,2),S=e(t(K),2),W=t(S,!0);a(S),a(K),h((C,de)=>{_(ce,C),Je(S,1,`${de??""} font-medium capitalize`,"svelte-s2lxog"),_(W,s(l).classification.priority)},[()=>ue(s(l).classification.team),()=>Ie(s(l).classification.priority)]),g(c,x)};w(M,c=>{s(l).classification&&c(N)})}a(f);var A=e(f,2);{var q=c=>{var x=Ye(),p=e(t(x),2),b=t(p,!0);a(p),a(x),h(()=>_(b,s(l).classification.summary)),g(c,x)};w(A,c=>{s(l).classification?.summary&&c(q)})}var O=e(A,2),z=t(O),B=t(z);{var E=c=>{var x=et();g(c,x)};w(B,c=>{s(j)&&c(E)})}pe(),a(z);var ve=e(z,2);a(O),a(m),a(o),h(()=>{_(ne,s(l).ticketId),z.disabled=s(j)}),Z("click",z,()=>Te(s(l).ticketId)),Z("click",ve,()=>navigator.clipboard.writeText(s(l).ticketId)),g(i,o)};w(he,i=>{s(l)&&i(De)})}var Ne=e(he,2);{var Ae=i=>{var o=it(),m=e(t(o),2),f=t(m),k=t(f),I=e(t(k),2),ne=t(I,!0);a(I),a(k);var M=e(k,2),N=e(t(M),2),A=t(N,!0);a(N),a(M);var q=e(M,2),O=e(t(q),2),z=t(O,!0);a(O),a(q);var B=e(q,2),E=e(t(B),2),ve=t(E,!0);a(E),a(B),a(f);var c=e(f,2);{var x=p=>{var b=st(),ce=e(t(b),2);Re(ce,1,()=>s(d).updates,Ge,(K,S)=>{var W=at(),C=t(W),de=t(C,!0);a(C);var we=e(C,2),Be=t(we);a(we),a(W),h(Ee=>{_(de,Ee),_(Be,`→ ${s(S).message??""}`)},[()=>new Date(s(S).timestamp).toLocaleString()]),g(K,W)}),a(b),g(p,b)};w(c,p=>{s(d).updates?.length&&p(x)})}a(m),a(o),h((p,b)=>{_(ne,s(d).ticketId),_(A,s(d).status),_(z,p),_(ve,b)},[()=>ue(s(d).team),()=>new Date(s(d).lastUpdate).toLocaleString()]),g(i,o)};w(Ne,i=>{s(d)&&i(Ae)})}pe(2),a(me),a(L),h(()=>P.disabled=s(v)||!s(r).description||!s(r).email),ke(ge,()=>s(r).email,i=>U(r,s(r).email=i)),ze(J,()=>s(r).priority,i=>U(r,s(r).priority=i)),ze(X,()=>s(r).category,i=>U(r,s(r).category=i)),ke(ye,()=>s(r).description,i=>U(r,s(r).description=i)),Z("click",P,Se),Z("click",We,Pe),g(D,L),Ze()}export{vt as default};
