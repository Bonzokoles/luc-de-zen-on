import{aF as c,u as p,aG as g,aa as m,aH as h,a as y,g as q,h as w}from"./template.BqTI6ysn.js";function _(e,u,s){if(e==null)return u(void 0),c;const n=p(()=>e.subscribe(u,s));return n.unsubscribe?()=>n.unsubscribe():n}const o=[];function z(e,u=c){let s=null;const n=new Set;function i(t){if(g(e,t)&&(e=t,s)){const a=!o.length;for(const r of n)r[1](),o.push(r,e);if(a){for(let r=0;r<o.length;r+=2)o[r][0](o[r+1]);o.length=0}}}function f(t){i(t(e))}function d(t,a=c){const r=[t,a];return n.add(r),n.size===1&&(s=u(i,f)||c),t(e),()=>{n.delete(r),n.size===0&&s&&(s(),s=null)}}return{set:i,update:f,subscribe:d}}function S(e){let u;return _(e,s=>u=s)(),u}let b=!1,l=Symbol();function N(e,u,s){const n=s[u]??={store:null,source:y(void 0),unsubscribe:c};if(n.store!==e&&!(l in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=c;else{var i=!0;n.unsubscribe=_(e,f=>{i?n.source.v=f:w(n.source,f)}),i=!1}return e&&l in s?S(e):q(n.source)}function U(){const e={};function u(){m(()=>{for(var s in e)e[s].unsubscribe();h(e,l,{enumerable:!1,value:!0})})}return[e,u]}function x(e,u,s){return e.set(s),u}function D(e){var u=b;try{return b=!1,[e(),b]}finally{b=u}}export{x as a,U as b,D as c,N as s,z as w};
