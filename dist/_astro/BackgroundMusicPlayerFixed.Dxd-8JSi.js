import"./disclose-version.DsnmJJEf.js";import"./legacy.kkaBD5aU.js";import{o as wt}from"./index-client.CI4zVHyS.js";import{p as gt,g as e,a as p,h as n,m as E,f as x,$ as Xe,c as s,s as l,t as te,b as f,d as _t,r as i,q as pe,k as he,j as Ge}from"./template.BqTI6ysn.js";import{e as u,s as g}from"./render.DLtPj5hE.js";import{i as z}from"./if.CL3_9eW_.js";import{e as kt,i as bt}from"./each.BgQDu70D.js";import{r as yt,s as zt}from"./attributes.CMoobVFc.js";import{s as He}from"./class.Cwo7PGLY.js";import{s as Ve}from"./style.eybEfuFE.js";import{b as Fe}from"./this.zW9sjCU0.js";import{i as xt}from"./lifecycle.CZxN27Pe.js";/* empty css                                   */import"./index.DIeogL5L.js";import"./attributes.BJtm3mOD.js";var At=x('<div class="track-status svelte-eczhuw">‚úÖ Working</div>'),Mt=x('<div class="track-status svelte-eczhuw">‚ö†Ô∏è CORS Blocked</div>'),St=x('<div class="panel-content svelte-eczhuw"><div class="now-playing svelte-eczhuw"><div class="track-info svelte-eczhuw"><div class="track-name svelte-eczhuw"> </div> <div class="track-time svelte-eczhuw"> </div> <!></div></div> <div class="player-controls svelte-eczhuw"><button class="control-btn svelte-eczhuw">‚èÆ</button> <button class="control-btn play-pause svelte-eczhuw"><!></button> <button class="control-btn svelte-eczhuw">‚è≠</button> <button class="control-btn svelte-eczhuw">üìã</button> <button class="control-btn emergency svelte-eczhuw" title="Emergency Fix">üö®</button></div> <div class="volume-control svelte-eczhuw"><span class="svelte-eczhuw">üîä</span> <input type="range" min="0" max="100" class="volume-slider svelte-eczhuw"/> <span class="volume-value svelte-eczhuw"> </span></div> <div class="progress-container svelte-eczhuw"><div class="progress-bar svelte-eczhuw"><div class="progress-fill svelte-eczhuw"></div></div></div> <div class="status-info svelte-eczhuw"><div class="status-item svelte-eczhuw"><span class="status-label svelte-eczhuw">Status:</span> <span> </span></div> <div class="status-item svelte-eczhuw"><span class="status-label svelte-eczhuw">Track:</span> <span class="status-value svelte-eczhuw"> </span></div></div></div>'),Tt=x('<div class="playlist-empty svelte-eczhuw">No tracks loaded</div>'),Ct=x('<div class="track-status-indicator svelte-eczhuw">‚úÖ</div>'),It=x('<div class="track-status-indicator svelte-eczhuw">‚ö†Ô∏è</div>'),Et=x('<button><div class="track-title svelte-eczhuw"> </div> <div class="track-artist svelte-eczhuw"> </div> <!></button>'),Pt=x('<div class="playlist-panel svelte-eczhuw"><div class="playlist-header svelte-eczhuw"><span class="svelte-eczhuw"> </span> <button class="close-btn svelte-eczhuw">√ó</button></div> <div class="playlist-content svelte-eczhuw"><!></div> <div class="playlist-actions svelte-eczhuw"><input type="file" webkitdirectory multiple accept="audio/*" style="display: none;" id="music-folder-revived" class="svelte-eczhuw"/> <button class="action-btn svelte-eczhuw">üìÅ Load Folder</button> <button class="action-btn svelte-eczhuw">üéµ Demo Tracks</button> <button class="action-btn svelte-eczhuw">üö® Emergency Fix</button></div></div>'),Lt=x('<canvas class="mini-visualizer svelte-eczhuw" width="200" height="60"></canvas>'),Ft=x('<div class="background-music-player svelte-eczhuw"><audio preload="metadata" crossorigin="anonymous" class="svelte-eczhuw"></audio> <div class="music-control-panel svelte-eczhuw"><div class="panel-header svelte-eczhuw"><span class="svelte-eczhuw"> </span> <button class="minimize-btn svelte-eczhuw"> </button></div> <!></div> <!> <!></div>');function jt(We,qe){gt(qe,!1);let a=p(),o=p([]),c=p(0),d=p(!1),ae=p(!1),A=p(.5),se=p(0),P=p(0),X=p(!1),we=p("No track selected"),ie=null,L=p(!1),$=null,_=null,B=null,ne=null,M=p(),ge,Ke=!0,_e=!0,ke=!1,Ue=0,Ne=0,be=p(20),ye=p(20);wt(()=>(G(),typeof window<"u"&&(delete window.MUSIC,window.MUSIC={play:()=>{e(d)||D()},pause:()=>{e(d)&&D()},toggle:()=>D(),next:()=>xe(),prev:()=>Re(),togglePlaylist:()=>Be(),setVolume:t=>{const r=Math.max(0,Math.min(1,Number(t)));n(A,r),e(a)&&E(a,e(a).volume=e(A))},getState:()=>({isPlaying:e(d),trackName:e(we),volume:e(A),currentTime:e(se),duration:e(P),canShowControls:_e,visualizerReady:Ke}),ensureLoaded:()=>{console.log("üéµ Music player ensureLoaded called"),e(o).length?F():G()},getAnalyser:()=>_||window.MUSIC_ANALYSER||null,openFolderPicker:()=>{try{const t=document.getElementById("music-folder-revived");t&&typeof t.click=="function"&&t.click()}catch(t){console.warn("Folder picker not available:",t)}}},console.log("üéµ MUSIC API registered and ready with POLACZEK integration")),()=>{ge&&cancelAnimationFrame(ge)}));function G(){n(o,[{name:"MERKABA",url:"https://assets.codepen.io/7558/Merkaba.mp3",artist:"AI Generated",working:!0},{name:"DHAMIKA",url:"https://assets.codepen.io/7558/Dhamika.mp3",artist:"AI Generated",working:!0},{name:"VACANT",url:"https://assets.codepen.io/7558/Vacant.mp3",artist:"AI Generated",working:!0},{name:"LXSTNGHT",url:"https://assets.codepen.io/7558/lxstnght-back_1.mp3",artist:"AI Generated",working:!0},{name:"Neony - Miuosh",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",artist:"Miuosh",working:!1},{name:"White Flag - Dido",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",artist:"Dido",working:!1}]),F()}function F(){e(o)[e(c)]&&(n(we,e(o)[e(c)].name),e(o)[e(c)].url?ie=e(o)[e(c)].url:e(o)[e(c)].file&&(ie=URL.createObjectURL(e(o)[e(c)].file)))}function je(){if(!$)try{$=new(window.AudioContext||window.webkitAudioContext),_=$.createAnalyser(),_.fftSize=256,B=new Uint8Array(_.frequencyBinCount),!ne&&e(a)&&(ne=$.createMediaElementSource(e(a)),ne.connect(_),_.connect($.destination),window.MUSIC_ANALYSER=_,window.dispatchEvent(new CustomEvent("music-analyser-ready")))}catch(t){console.warn("Audio visualization not available:",t)}}function Ze(){if(!_||!e(M))return;const t=e(M).getContext("2d");function r(){if(!e(d))return;_.getByteFrequencyData(B),t.clearRect(0,0,e(M).width,e(M).height);const v=e(M).width/B.length*2;let k=0;for(let b=0;b<B.length;b++){const T=B[b]/255*e(M).height*.8,S=B[b]/255;t.fillStyle=`rgba(0, 217, 255, ${.3+S*.7})`,t.fillRect(k,e(M).height-T,v,T),k+=v+1}ge=requestAnimationFrame(r)}r()}function D(){if(!e(o)[e(c)]){G();return}e(a).src||(F(),E(a,e(a).src=ie),E(a,e(a).volume=e(A))),e(d)?(e(a).pause(),n(d,!1)):(n(L,!0),je(),e(a).play().then(()=>{n(d,!0),n(L,!1),Ze(),window.dispatchEvent(new CustomEvent("music-started",{detail:{analyser:_,audioContext:$,source:ne}}))}).catch(t=>{console.error("Play error:",t),n(L,!1),n(d,!1);const r=e(o).findIndex((v,k)=>k>e(c)&&v.working);r!==-1&&(n(c,r),setTimeout(()=>{F(),setTimeout(D,500)},1e3))}))}function ze(t){if(t>=0&&t<e(o).length){const r=e(d);e(d)&&(e(a).pause(),n(d,!1)),n(c,t),F(),E(a,e(a).src=ie),E(a,e(a).volume=e(A)),r&&setTimeout(()=>{D()},300)}}function Re(){e(o).length>0&&(n(c,(e(c)-1+e(o).length)%e(o).length),ze(e(c)))}function xe(){e(o).length>0&&(n(c,(e(c)+1)%e(o).length),ze(e(c)))}function Je(){e(a)&&(n(se,e(a).currentTime),n(P,e(a).duration||0))}function Qe(){xe()}function et(t){n(A,t.target.value/100),e(a)&&E(a,e(a).volume=e(A))}function tt(t){if(e(a)&&e(P)){const r=t.currentTarget.getBoundingClientRect(),v=(t.clientX-r.left)/r.width;E(a,e(a).currentTime=v*e(P))}}function $e(t){const r=Math.floor(t/60),v=Math.floor(t%60);return`${r}:${v.toString().padStart(2,"0")}`}function at(t){const r=Array.from(t.target.files).filter(v=>v.type.startsWith("audio/"));n(o,r.map(v=>({name:v.name.replace(/\.[^/.]+$/,""),file:v,working:!0}))),n(c,0),F(),n(X,!0)}function Be(){n(X,!e(X))}function st(){n(ae,!e(ae))}function it(t){ke=!0,Ue=t.clientX-e(be),Ne=t.clientY-e(ye)}function nt(t){ke&&(n(be,t.clientX-Ue),n(ye,t.clientY-Ne))}function lt(){ke=!1}function De(){console.log("üö® Emergency fix - reloading working tracks"),n(d,!1),e(a)&&(e(a).pause(),E(a,e(a).src="")),G(),setTimeout(()=>{F()},500)}xt();var le=Ft();u("mousemove",Xe,nt),u("mouseup",Xe,lt);var re=s(le);Fe(re,t=>n(a,t),()=>e(a));var Ae=l(re,2),oe=s(Ae),Me=s(oe),rt=s(Me);i(Me);var Se=l(Me,2),ot=s(Se,!0);i(Se),i(oe);var ct=l(oe,2);{var vt=t=>{var r=pe(),v=he(r);{var k=b=>{var T=St(),S=s(T),ce=s(S),H=s(ce),Te=s(H,!0);i(H);var Y=l(H,2),V=s(Y);i(Y);var ve=l(Y,2);{var ue=m=>{var w=At();f(m,w)},Ce=m=>{var w=pe(),Pe=he(w);{var pt=Le=>{var ht=Mt();f(Le,ht)};z(Pe,Le=>{e(o)[e(c)]?.working===!1&&Le(pt)},!0)}f(m,w)};z(ve,m=>{e(o)[e(c)]?.working?m(ue):m(Ce,!1)})}i(ce),i(S);var h=l(S,2),U=s(h),N=l(U,2),Ie=s(N);{var O=m=>{var w=Ge("‚è≥");f(m,w)},de=m=>{var w=Ge();te(()=>g(w,e(d)?"‚è∏":"‚ñ∂")),f(m,w)};z(Ie,m=>{e(L)?m(O):m(de,!1)})}i(N);var C=l(N,2),W=l(C,2),q=l(W,2);i(h);var K=l(h,2),I=l(s(K),2);yt(I);var fe=l(I,2),Ee=s(fe);i(fe),i(K);var j=l(K,2),Z=s(j),y=s(Z);i(Z),i(j);var R=l(j,2),J=s(R),Q=l(s(J),2),ee=s(Q,!0);i(Q),i(J);var me=l(J,2),Oe=l(s(me),2),mt=s(Oe);i(Oe),i(me),i(R),i(T),te((m,w,Pe)=>{g(Te,e(we)),g(V,`${m??""} / ${w??""}`),N.disabled=e(L),zt(I,e(A)*100),g(Ee,`${Pe??""}%`),Ve(y,`width: ${e(P)?e(se)/e(P)*100:0}%`),He(Q,1,`status-value ${e(d)?"playing":"paused"}`,"svelte-eczhuw"),g(ee,e(L)?"Loading...":e(d)?"Playing":"Paused"),g(mt,`${e(c)+1}/${e(o).length??""}`)},[()=>$e(e(se)),()=>$e(e(P)),()=>Math.round(e(A)*100)]),u("click",U,Re),u("click",N,D),u("click",C,xe),u("click",W,Be),u("click",q,De),u("input",I,et),u("click",Z,tt),f(b,T)};z(v,b=>{e(ae)||b(k)},!0)}f(t,r)};z(ct,t=>{t(vt,!1)})}i(Ae);var Ye=l(Ae,2);{var ut=t=>{var r=Pt(),v=s(r),k=s(v),b=s(k);i(k);var T=l(k,2);i(v);var S=l(v,2),ce=s(S);{var H=h=>{var U=Tt();f(h,U)},Te=h=>{var U=pe(),N=he(U);kt(N,1,()=>e(o),bt,(Ie,O,de)=>{var C=Et();let W;var q=s(C),K=s(q,!0);i(q);var I=l(q,2),fe=s(I,!0);i(I);var Ee=l(I,2);{var j=y=>{var R=Ct();f(y,R)},Z=y=>{var R=pe(),J=he(R);{var Q=ee=>{var me=It();f(ee,me)};z(J,ee=>{e(O).working===!1&&ee(Q)},!0)}f(y,R)};z(Ee,y=>{e(O).working?y(j):y(Z,!1)})}i(C),te(y=>{W=He(C,1,"playlist-item svelte-eczhuw",null,W,y),g(K,e(O).name),g(fe,e(O).artist||"Unknown")},[()=>({active:de===e(c)})]),u("click",C,()=>ze(de)),f(Ie,C)}),f(h,U)};z(ce,h=>{e(o).length===0?h(H):h(Te,!1)})}i(S);var Y=l(S,2),V=s(Y);Fe(V,h=>undefined=h,()=>{});var ve=l(V,2),ue=l(ve,2),Ce=l(ue,2);i(Y),i(r),te(()=>g(b,`üéµ PLAYLIST (${e(o).length??""} tracks)`)),u("click",T,()=>n(X,!1)),u("change",V,at),u("click",ve,()=>document.getElementById("music-folder-revived").click()),u("click",ue,G),u("click",Ce,De),f(t,r)};z(Ye,t=>{e(X)&&_e&&t(ut)})}var dt=l(Ye,2);{var ft=t=>{var r=Lt();Fe(r,v=>n(M,v),()=>e(M)),f(t,r)};z(dt,t=>{e(d)&&_e&&t(ft)})}i(le),te(()=>{Ve(le,`transform: translate(${e(be)??""}px, ${e(ye)??""}px)`),g(rt,`üéµ MUSIC ‚Ä¢ POLACZEK ${e(L)?"(Loading...)":""}`),g(ot,e(ae)?"+":"‚àí")}),u("timeupdate",re,Je),u("ended",re,Qe),u("click",Se,st),u("mousedown",oe,it),f(We,le),_t()}export{jt as default};
