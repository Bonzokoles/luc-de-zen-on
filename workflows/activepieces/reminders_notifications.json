{
  "trigger": {
    "type": "schedule",
    "expression": "*/15 * * * *"
  },
  "actions": [
    {
      "type": "httpRequest",
      "config": {
        "url": "https://api.mybonzo.com/api/reminders",
        "method": "GET"
      }
    },
    {
      "type": "filter",
      "config": {
        "criteria": "reminder time matches current time"
      }
    },
    {
      "type": "switch",
      "config": {
        "cases": [
          {
            "condition": "{{reminder.preferEmail}} === true",
            "actions": [
              {
                "type": "sendEmail",
                "config": {
                  "to": "{{reminder.email}}",
                  "subject": "Przypomnienie z mybonzo",
                  "body": "Masz przypomnienie: {{reminder.text}}"
                }
              }
            ]
          },
          {
            "condition": "{{reminder.preferSMS}} === true",
            "actions": [
              {
                "type": "sendSMS",
                "config": {
                  "to": "{{reminder.phone}}",
                  "message": "Przypomnienie: {{reminder.text}}"
                }
              }
            ]
          }
        ],
        "default": []
      }
    }
  ]
}
